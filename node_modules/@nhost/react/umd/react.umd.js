(function(D,U){typeof exports=="object"&&typeof module!="undefined"?U(exports,require("react"),require("react/jsx-runtime")):typeof define=="function"&&define.amd?define(["exports","react","react/jsx-runtime"],U):(D=typeof globalThis!="undefined"?globalThis:D||self,U(D["@nhost/react"]={},D.React,D._jsx))})(this,function(D,U,Di){"use strict";function Ri(t){const e=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(t){for(const r in t)if(r!=="default"){const n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:()=>t[r]})}}return e.default=t,Object.freeze(e)}const Ci=Ri(U);function $t(t){this.message=t}$t.prototype=new Error,$t.prototype.name="InvalidCharacterError";var Br=typeof window!="undefined"&&window.atob&&window.atob.bind(window)||function(t){var e=String(t).replace(/=+$/,"");if(e.length%4==1)throw new $t("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,n,i=0,s=0,o="";n=e.charAt(s++);~n&&(r=i%4?64*r+n:n,i++%4)?o+=String.fromCharCode(255&r>>(-2*i&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return o};function Pi(t){var e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}try{return function(r){return decodeURIComponent(Br(r).replace(/(.)/g,function(n,i){var s=i.charCodeAt(0).toString(16).toUpperCase();return s.length<2&&(s="0"+s),"%"+s}))}(e)}catch{return Br(e)}}function ct(t){this.message=t}function Gr(t,e){if(typeof t!="string")throw new ct("Invalid token specified");var r=(e=e||{}).header===!0?0:1;try{return JSON.parse(Pi(t.split(".")[r]))}catch(n){throw new ct("Invalid token specified: "+n.message)}}ct.prototype=new Error,ct.prototype.name="InvalidTokenError";/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var S=function(){return S=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},S.apply(this,arguments)};function zt(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function B(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function F(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(d){o={error:d}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function z(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))}var Y;(function(t){t.Start="xstate.start",t.Stop="xstate.stop",t.Raise="xstate.raise",t.Send="xstate.send",t.Cancel="xstate.cancel",t.NullEvent="",t.Assign="xstate.assign",t.After="xstate.after",t.DoneState="done.state",t.DoneInvoke="done.invoke",t.Log="xstate.log",t.Init="xstate.init",t.Invoke="xstate.invoke",t.ErrorExecution="error.execution",t.ErrorCommunication="error.communication",t.ErrorPlatform="error.platform",t.ErrorCustom="xstate.error",t.Update="xstate.update",t.Pure="xstate.pure",t.Choose="xstate.choose"})(Y||(Y={}));var pe;(function(t){t.Parent="#_parent",t.Internal="#_internal"})(pe||(pe={}));var ut=Y.Start,lt=Y.Stop,Ne=Y.Raise,De=Y.Send,Kt=Y.Cancel,qr=Y.NullEvent,dt=Y.Assign,Li=Y.After,Ui=Y.DoneState,ht=Y.Log,Hr=Y.Init,ft=Y.Invoke,Mi=Y.ErrorExecution,Jt=Y.ErrorPlatform,Wt=Y.ErrorCustom,pt=Y.Update,Yr=Y.Choose,$r=Y.Pure;const ji=Object.freeze(Object.defineProperty({__proto__:null,after:Li,assign:dt,cancel:Kt,choose:Yr,doneState:Ui,error:Wt,errorExecution:Mi,errorPlatform:Jt,init:Hr,invoke:ft,log:ht,nullEvent:qr,pure:$r,raise:Ne,send:De,start:ut,stop:lt,update:pt},Symbol.toStringTag,{value:"Module"}));var zr=".",Kr={},Qt="xstate.guard",Fi="",W=process.env.NODE_ENV==="production",vt;function Xt(t,e,r){r===void 0&&(r=zr);var n=Je(t,r),i=Je(e,r);return G(i)?G(n)?i===n:!1:G(n)?n in i:Object.keys(n).every(function(s){return s in i?Xt(n[s],i[s]):!1})}function Jr(t){try{return G(t)||typeof t=="number"?"".concat(t):t.type}catch{throw new Error("Events must be strings or objects with a string event.type property.")}}function Zt(t,e){try{return Ue(t)?t:t.toString().split(e)}catch{throw new Error("'".concat(t,"' is not a valid state path."))}}function Vi(t){return typeof t=="object"&&"value"in t&&"context"in t&&"event"in t&&"_event"in t}function Je(t,e){if(Vi(t))return t.value;if(Ue(t))return mt(t);if(typeof t!="string")return t;var r=Zt(t,e);return mt(r)}function mt(t){if(t.length===1)return t[0];for(var e={},r=e,n=0;n<t.length-1;n++)n===t.length-2?r[t[n]]=t[n+1]:(r[t[n]]={},r=r[t[n]]);return e}function We(t,e){for(var r={},n=Object.keys(t),i=0;i<n.length;i++){var s=n[i];r[s]=e(t[s],s,t,i)}return r}function Wr(t,e,r){var n,i,s={};try{for(var o=B(Object.keys(t)),d=o.next();!d.done;d=o.next()){var u=d.value,l=t[u];r(l)&&(s[u]=e(l,u,t))}}catch(a){n={error:a}}finally{try{d&&!d.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return s}var Bi=function(t){return function(e){var r,n,i=e;try{for(var s=B(t),o=s.next();!o.done;o=s.next()){var d=o.value;i=i[d]}}catch(u){r={error:u}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return i}};function Gi(t,e){return function(r){var n,i,s=r;try{for(var o=B(t),d=o.next();!d.done;d=o.next()){var u=d.value;s=s[e][u]}}catch(l){n={error:l}}finally{try{d&&!d.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return s}}function yt(t){if(!t)return[[]];if(G(t))return[[t]];var e=Q(Object.keys(t).map(function(r){var n=t[r];return typeof n!="string"&&(!n||!Object.keys(n).length)?[[r]]:yt(t[r]).map(function(i){return[r].concat(i)})}));return e}function Q(t){var e;return(e=[]).concat.apply(e,z([],F(t),!1))}function Qr(t){return Ue(t)?t:[t]}function le(t){return t===void 0?[]:Qr(t)}function gt(t,e,r){var n,i;if($(t))return t(e,r.data);var s={};try{for(var o=B(Object.keys(t)),d=o.next();!d.done;d=o.next()){var u=d.value,l=t[u];$(l)?s[u]=l(e,r.data):s[u]=l}}catch(a){n={error:a}}finally{try{d&&!d.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return s}function qi(t){return/^(done|error)\./.test(t)}function Xr(t){return!!(t instanceof Promise||t!==null&&($(t)||typeof t=="object")&&$(t.then))}function Hi(t){return t!==null&&typeof t=="object"&&"transition"in t&&typeof t.transition=="function"}function Yi(t,e){var r,n,i=F([[],[]],2),s=i[0],o=i[1];try{for(var d=B(t),u=d.next();!u.done;u=d.next()){var l=u.value;e(l)?s.push(l):o.push(l)}}catch(a){r={error:a}}finally{try{u&&!u.done&&(n=d.return)&&n.call(d)}finally{if(r)throw r.error}}return[s,o]}function Zr(t,e){return We(t.states,function(r,n){if(r){var i=(G(e)?void 0:e[n])||(r?r.current:void 0);if(i)return{current:i,states:Zr(r,i)}}})}function $i(t,e){return{current:e,states:Zr(t,e)}}function en(t,e,r,n){W||ne(!!t,"Attempting to update undefined context");var i=t&&r.reduce(function(s,o){var d,u,l=o.assignment,a={state:n,action:o,_event:e},c={};if($(l))c=l(s,e.data,a);else try{for(var h=B(Object.keys(l)),f=h.next();!f.done;f=h.next()){var p=f.value,m=l[p];c[p]=$(m)?m(s,e.data,a):m}}catch(w){d={error:w}}finally{try{f&&!f.done&&(u=h.return)&&u.call(h)}finally{if(d)throw d.error}}return Object.assign({},s,c)},t);return i}var ne=function(){};W||(ne=function(t,e){var r=t instanceof Error?t:void 0;if(!(!r&&t)&&console!==void 0){var n=["Warning: ".concat(e)];r&&n.push(r),console.warn.apply(console,n)}});function Ue(t){return Array.isArray(t)}function $(t){return typeof t=="function"}function G(t){return typeof t=="string"}function tn(t,e){if(t)return G(t)?{type:Qt,name:t,predicate:e?e[t]:void 0}:$(t)?{type:Qt,name:t.name,predicate:t}:t}function zi(t){try{return"subscribe"in t&&$(t.subscribe)}catch{return!1}}var xe=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();vt={},vt[xe]=function(){return this},vt[Symbol.observable]=function(){return this};function ge(t){return!!t&&"__xstatenode"in t}function Ki(t){return!!t&&typeof t.send=="function"}var Ji=function(){var t=0;return function(){return t++,t.toString(16)}}();function er(t,e){return G(t)||typeof t=="number"?S({type:t},e):t}function oe(t,e){if(!G(t)&&"$$type"in t&&t.$$type==="scxml")return t;var r=er(t);return S({name:r.type,data:r,$$type:"scxml",type:"external"},e)}function Me(t,e){var r=Qr(e).map(function(n){return typeof n=="undefined"||typeof n=="string"||ge(n)?{target:n,event:t}:S(S({},n),{event:t})});return r}function Wi(t){if(!(t===void 0||t===Fi))return le(t)}function Qi(t,e,r){if(!W){var n=t.stack?" Stacktrace was '".concat(t.stack,"'"):"";if(t===e)console.error("Missing onError handler for invocation '".concat(r,"', error was '").concat(t,"'.").concat(n));else{var i=e.stack?" Stacktrace was '".concat(e.stack,"'"):"";console.error("Missing onError handler and/or unhandled exception/promise rejection for invocation '".concat(r,"'. ")+"Original error: '".concat(t,"'. ").concat(n," Current error is '").concat(e,"'.").concat(i))}}}function rn(t,e,r,n,i){var s=t.options.guards,o={state:i,cond:e,_event:n};if(e.type===Qt)return((s==null?void 0:s[e.name])||e.predicate)(r,n.data,o);var d=s==null?void 0:s[e.type];if(!d)throw new Error("Guard '".concat(e.type,"' is not implemented on machine '").concat(t.id,"'."));return d(r,n.data,o)}function nn(t){return typeof t=="string"?{type:t}:t}function Qe(t,e,r){var n=function(){},i=typeof t=="object",s=i?t:null;return{next:((i?t.next:t)||n).bind(s),error:((i?t.error:e)||n).bind(s),complete:((i?t.complete:r)||n).bind(s)}}function Et(t,e){return"".concat(t,":invocation[").concat(e,"]")}var Re=oe({type:Hr});function Tt(t,e){return e&&e[t]||void 0}function je(t,e){var r;if(G(t)||typeof t=="number"){var n=Tt(t,e);$(n)?r={type:t,exec:n}:n?r=n:r={type:t,exec:void 0}}else if($(t))r={type:t.name||t.toString(),exec:t};else{var n=Tt(t.type,e);if($(n))r=S(S({},t),{exec:n});else if(n){var i=n.type||t.type;r=S(S(S({},n),t),{type:i})}else r=t}return r}var Ee=function(t,e){if(!t)return[];var r=Ue(t)?t:[t];return r.map(function(n){return je(n,e)})};function St(t){var e=je(t);return S(S({id:G(t)?t:e.id},e),{type:e.type})}function sn(t){return G(t)?{type:Ne,event:t}:Ae(t,{to:pe.Internal})}function on(t){return{type:Ne,_event:oe(t.event)}}function Ae(t,e){return{to:e?e.to:void 0,type:De,event:$(t)?t:er(t),delay:e?e.delay:void 0,id:e&&e.id!==void 0?e.id:$(t)?t.name:Jr(t)}}function an(t,e,r,n){var i={_event:r},s=oe($(t.event)?t.event(e,r.data,i):t.event),o;if(G(t.delay)){var d=n&&n[t.delay];o=$(d)?d(e,r.data,i):d}else o=$(t.delay)?t.delay(e,r.data,i):t.delay;var u=$(t.to)?t.to(e,r.data,i):t.to;return S(S({},t),{to:u,_event:s,event:s.data,delay:o})}function tr(t,e){return Ae(t,S(S({},e),{to:pe.Parent}))}function Xi(t,e,r){return Ae(e,S(S({},r),{to:t}))}function Zi(){return tr(pt)}function es(t,e){return Ae(t,S(S({},e),{to:function(r,n,i){var s=i._event;return s.origin}}))}var ts=function(t,e){return{context:t,event:e}};function rs(t,e){return t===void 0&&(t=ts),{type:ht,label:e,expr:t}}var cn=function(t,e,r){return S(S({},t),{value:G(t.expr)?t.expr:t.expr(e,r.data,{_event:r})})},un=function(t){return{type:Kt,sendId:t}};function ln(t){var e=St(t);return{type:Y.Start,activity:e,exec:void 0}}function dn(t){var e=$(t)?t:St(t);return{type:Y.Stop,activity:e,exec:void 0}}function hn(t,e,r){var n=$(t.activity)?t.activity(e,r.data):t.activity,i=typeof n=="string"?{id:n}:n,s={type:Y.Stop,activity:i};return s}var fn=function(t){return{type:dt,assignment:t}};function ns(t){return typeof t=="object"&&"type"in t}function pn(t,e){var r=e?"#".concat(e):"";return"".concat(Y.After,"(").concat(t,")").concat(r)}function Xe(t,e){var r="".concat(Y.DoneState,".").concat(t),n={type:r,data:e};return n.toString=function(){return r},n}function Ze(t,e){var r="".concat(Y.DoneInvoke,".").concat(t),n={type:r,data:e};return n.toString=function(){return r},n}function Fe(t,e){var r="".concat(Y.ErrorPlatform,".").concat(t),n={type:r,data:e};return n.toString=function(){return r},n}function is(t){return{type:Y.Pure,get:t}}function ss(t,e){if(!W&&(!t||typeof t=="function")){var r=t;t=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var s=typeof r=="function"?r.apply(void 0,z([],F(n),!1)):r;if(!s)throw new Error("Attempted to forward event to undefined actor. This risks an infinite loop in the sender.");return s}}return Ae(function(n,i){return i},S(S({},e),{to:t}))}function os(t,e){return tr(function(r,n,i){return{type:Wt,data:$(t)?t(r,n,i):t}},S(S({},e),{to:pe.Parent}))}function as(t){return{type:Y.Choose,conds:t}}var cs=function(t){var e,r,n=[];try{for(var i=B(t),s=i.next();!s.done;s=i.next())for(var o=s.value,d=0;d<o.length;){if(o[d].type===dt){n.push(o[d]),o.splice(d,1);continue}d++}}catch(u){e={error:u}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return n};function et(t,e,r,n,i,s,o){o===void 0&&(o=!1);var d=o?[]:cs(i),u=d.length?en(r,n,d,e):r,l=o?[r]:void 0,a=[];function c(p){var m;switch(p.type){case Ne:return on(p);case De:var w=an(p,u,n,t.options.delays);return W||ne(!G(p.delay)||typeof w.delay=="number","No delay reference for delay expression '".concat(p.delay,"' was found on machine '").concat(t.id,"'")),s&&w.to!==pe.Internal&&a.push(w),w;case ht:{var E=cn(p,u,n);return s==null||s(E,u,n),E}case Yr:{var A=p,T=(m=A.conds.find(function(ce){var J=tn(ce.cond,t.options.guards);return!J||rn(t,J,u,n,s?void 0:e)}))===null||m===void 0?void 0:m.actions;if(!T)return[];var O=F(et(t,e,u,n,[Ee(le(T),t.options.actions)],s,o),2),I=O[0],_=O[1];return u=_,l==null||l.push(u),I}case $r:{var T=p.get(u,n.data);if(!T)return[];var N=F(et(t,e,u,n,[Ee(le(T),t.options.actions)],s,o),2),C=N[0],P=N[1];return u=P,l==null||l.push(u),C}case lt:{var E=hn(p,u,n);return s==null||s(E,r,n),E}case dt:{u=en(u,n,[p],s?void 0:e),l==null||l.push(u);break}default:var k=je(p,t.options.actions),M=k.exec;if(s)s(k,u,n);else if(M&&l){var Z=l.length-1;k=S(S({},k),{exec:function(ce){for(var J=[],ye=1;ye<arguments.length;ye++)J[ye-1]=arguments[ye];M.apply(void 0,z([l[Z]],F(J),!1))}})}return k}}function h(p){var m,w,E=[];try{for(var A=B(p),T=A.next();!T.done;T=A.next()){var O=T.value,I=c(O);I&&(E=E.concat(I))}}catch(_){m={error:_}}finally{try{T&&!T.done&&(w=A.return)&&w.call(A)}finally{if(m)throw m.error}}return a.forEach(function(_){s(_,u,n)}),a.length=0,E}var f=Q(i.map(h));return[f,u]}const us=Object.freeze(Object.defineProperty({__proto__:null,actionTypes:ji,after:pn,assign:fn,cancel:un,choose:as,done:Xe,doneInvoke:Ze,error:Fe,escalate:os,forwardTo:ss,getActionFunction:Tt,initEvent:Re,isActionObject:ns,log:rs,pure:is,raise:sn,resolveActions:et,resolveLog:cn,resolveRaise:on,resolveSend:an,resolveStop:hn,respond:es,send:Ae,sendParent:tr,sendTo:Xi,sendUpdate:Zi,start:ln,stop:dn,toActionObject:je,toActionObjects:Ee,toActivityDefinition:St},Symbol.toStringTag,{value:"Module"}));var wt=[],Ve=function(t,e){wt.push(t);var r=e(t);return wt.pop(),r},ls=function(t){return t(wt[wt.length-1])};function vn(t){var e;return e={id:t,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},getSnapshot:function(){},toJSON:function(){return{id:t}}},e[xe]=function(){return this},e}function ds(t,e,r,n){var i,s=nn(t.src),o=(i=e==null?void 0:e.options.services)===null||i===void 0?void 0:i[s.type],d=t.data?gt(t.data,r,n):void 0,u=o?rr(o,t.id,d):vn(t.id);return u.meta=t,u}function rr(t,e,r){var n=vn(e);if(n.deferred=!0,ge(t)){var i=n.state=Ve(void 0,function(){return(r?t.withContext(r):t).initialState});n.getSnapshot=function(){return i}}return n}function hs(t){try{return typeof t.send=="function"}catch{return!1}}function fs(t){return hs(t)&&"id"in t}function ps(t){var e;return S((e={subscribe:function(){return{unsubscribe:function(){}}},id:"anonymous",getSnapshot:function(){}},e[xe]=function(){return this},e),t)}var xt=function(t){return t.type==="atomic"||t.type==="final"};function mn(t){return Object.keys(t.states).map(function(e){return t.states[e]})}function tt(t){return mn(t).filter(function(e){return e.type!=="history"})}function yn(t){var e=[t];return xt(t)?e:e.concat(Q(tt(t).map(yn)))}function rt(t,e){var r,n,i,s,o,d,u,l,a=new Set(t),c=nr(a),h=new Set(e);try{for(var f=B(h),p=f.next();!p.done;p=f.next())for(var m=p.value,w=m.parent;w&&!h.has(w);)h.add(w),w=w.parent}catch(P){r={error:P}}finally{try{p&&!p.done&&(n=f.return)&&n.call(f)}finally{if(r)throw r.error}}var E=nr(h);try{for(var A=B(h),T=A.next();!T.done;T=A.next()){var m=T.value;if(m.type==="compound"&&(!E.get(m)||!E.get(m).length))c.get(m)?c.get(m).forEach(function(k){return h.add(k)}):m.initialStateNodes.forEach(function(k){return h.add(k)});else if(m.type==="parallel")try{for(var O=(o=void 0,B(tt(m))),I=O.next();!I.done;I=O.next()){var _=I.value;h.has(_)||(h.add(_),c.get(_)?c.get(_).forEach(function(k){return h.add(k)}):_.initialStateNodes.forEach(function(k){return h.add(k)}))}}catch(k){o={error:k}}finally{try{I&&!I.done&&(d=O.return)&&d.call(O)}finally{if(o)throw o.error}}}}catch(P){i={error:P}}finally{try{T&&!T.done&&(s=A.return)&&s.call(A)}finally{if(i)throw i.error}}try{for(var N=B(h),C=N.next();!C.done;C=N.next())for(var m=C.value,w=m.parent;w&&!h.has(w);)h.add(w),w=w.parent}catch(P){u={error:P}}finally{try{C&&!C.done&&(l=N.return)&&l.call(N)}finally{if(u)throw u.error}}return h}function gn(t,e){var r=e.get(t);if(!r)return{};if(t.type==="compound"){var n=r[0];if(n){if(xt(n))return n.key}else return{}}var i={};return r.forEach(function(s){i[s.key]=gn(s,e)}),i}function nr(t){var e,r,n=new Map;try{for(var i=B(t),s=i.next();!s.done;s=i.next()){var o=s.value;n.has(o)||n.set(o,[]),o.parent&&(n.has(o.parent)||n.set(o.parent,[]),n.get(o.parent).push(o))}}catch(d){e={error:d}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return n}function vs(t,e){var r=rt([t],e);return gn(t,nr(r))}function nt(t,e){return Array.isArray(t)?t.some(function(r){return r===e}):t instanceof Set?t.has(e):!1}function ms(t){return z([],F(new Set(Q(z([],F(t.map(function(e){return e.ownEvents})),!1)))),!1)}function At(t,e){return e.type==="compound"?tt(e).some(function(r){return r.type==="final"&&nt(t,r)}):e.type==="parallel"?tt(e).every(function(r){return At(t,r)}):!1}function ys(t){return t===void 0&&(t=[]),t.reduce(function(e,r){return r.meta!==void 0&&(e[r.id]=r.meta),e},{})}function En(t){return new Set(Q(t.map(function(e){return e.tags})))}function Tn(t,e){if(t===e)return!0;if(t===void 0||e===void 0)return!1;if(G(t)||G(e))return t===e;var r=Object.keys(t),n=Object.keys(e);return r.length===n.length&&r.every(function(i){return Tn(t[i],e[i])})}function gs(t){return typeof t!="object"||t===null?!1:"value"in t&&"_event"in t}function Es(t,e){var r=t.exec,n=S(S({},t),{exec:r!==void 0?function(){return r(e.context,e.event,{action:t,state:e,_event:e._event})}:void 0});return n}var de=function(){function t(e){var r=this,n;this.actions=[],this.activities=Kr,this.meta={},this.events=[],this.value=e.value,this.context=e.context,this._event=e._event,this._sessionid=e._sessionid,this.event=this._event.data,this.historyValue=e.historyValue,this.history=e.history,this.actions=e.actions||[],this.activities=e.activities||Kr,this.meta=ys(e.configuration),this.events=e.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=e.configuration,this.transitions=e.transitions,this.children=e.children,this.done=!!e.done,this.tags=(n=Array.isArray(e.tags)?new Set(e.tags):e.tags)!==null&&n!==void 0?n:new Set,this.machine=e.machine,Object.defineProperty(this,"nextEvents",{get:function(){return ms(r.configuration)}})}return t.from=function(e,r){if(e instanceof t)return e.context!==r?new t({value:e.value,context:r,_event:e._event,_sessionid:null,historyValue:e.historyValue,history:e.history,actions:[],activities:e.activities,meta:{},events:[],configuration:[],transitions:[],children:{}}):e;var n=Re;return new t({value:e,context:r,_event:n,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,meta:void 0,events:[],configuration:[],transitions:[],children:{}})},t.create=function(e){return new t(e)},t.inert=function(e,r){if(e instanceof t){if(!e.actions.length)return e;var n=Re;return new t({value:e.value,context:r,_event:n,_sessionid:null,historyValue:e.historyValue,history:e.history,activities:e.activities,configuration:e.configuration,transitions:[],children:{}})}return t.from(e,r)},t.prototype.toStrings=function(e,r){var n=this;if(e===void 0&&(e=this.value),r===void 0&&(r="."),G(e))return[e];var i=Object.keys(e);return i.concat.apply(i,z([],F(i.map(function(s){return n.toStrings(e[s],r).map(function(o){return s+r+o})})),!1))},t.prototype.toJSON=function(){var e=this;e.configuration,e.transitions;var r=e.tags;e.machine;var n=zt(e,["configuration","transitions","tags","machine"]);return S(S({},n),{tags:Array.from(r)})},t.prototype.matches=function(e){return Xt(e,this.value)},t.prototype.hasTag=function(e){return this.tags.has(e)},t.prototype.can=function(e){var r;W&&ne(!!this.machine,"state.can(...) used outside of a machine-created State object; this will always return false.");var n=(r=this.machine)===null||r===void 0?void 0:r.getTransitionData(this,e);return!!(n!=null&&n.transitions.length)&&n.transitions.some(function(i){return i.target!==void 0||i.actions.length})},t}(),Ts={deferEvents:!1},Sn=function(){function t(e){this.processingEvent=!1,this.queue=[],this.initialized=!1,this.options=S(S({},Ts),e)}return t.prototype.initialize=function(e){if(this.initialized=!0,e){if(!this.options.deferEvents){this.schedule(e);return}this.process(e)}this.flushEvents()},t.prototype.schedule=function(e){if(!this.initialized||this.processingEvent){this.queue.push(e);return}if(this.queue.length!==0)throw new Error("Event queue should be empty when it is not processing events");this.process(e),this.flushEvents()},t.prototype.clear=function(){this.queue=[]},t.prototype.flushEvents=function(){for(var e=this.queue.shift();e;)this.process(e),e=this.queue.shift()},t.prototype.process=function(e){this.processingEvent=!0;try{e()}catch(r){throw this.clear(),r}finally{this.processingEvent=!1}},t}(),ir=new Map,Ss=0,Ot={bookId:function(){return"x:".concat(Ss++)},register:function(t,e){return ir.set(t,e),t},get:function(t){return ir.get(t)},free:function(t){ir.delete(t)}};function sr(){if(typeof globalThis!="undefined")return globalThis;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global;W||console.warn("XState could not find a global object in this environment. Please let the maintainers know and raise an issue here: https://github.com/statelyai/xstate/issues")}function ws(){var t=sr();if(t&&"__xstate__"in t)return t.__xstate__}function xs(t){if(sr()){var e=ws();e&&e.register(t)}}function As(t,e){e===void 0&&(e={});var r=t.initialState,n=new Set,i=[],s=!1,o=function(){if(!s){for(s=!0;i.length>0;){var l=i.shift();r=t.transition(r,l,u),n.forEach(function(a){return a.next(r)})}s=!1}},d=ps({id:e.id,send:function(l){i.push(l),o()},getSnapshot:function(){return r},subscribe:function(l,a,c){var h=Qe(l,a,c);return n.add(h),h.next(r),{unsubscribe:function(){n.delete(h)}}}}),u={parent:e.parent,self:d,id:e.id||"anonymous",observers:n};return r=t.start?t.start(u):r,d}var or={sync:!1,autoForward:!1},te;(function(t){t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped"})(te||(te={}));var Os=function(){function t(e,r){r===void 0&&(r=t.defaultOptions);var n=this;this.machine=e,this.delayedEventsMap={},this.listeners=new Set,this.contextListeners=new Set,this.stopListeners=new Set,this.doneListeners=new Set,this.eventListeners=new Set,this.sendListeners=new Set,this.initialized=!1,this.status=te.NotStarted,this.children=new Map,this.forwardTo=new Set,this._outgoingQueue=[],this.init=this.start,this.send=function(a,c){if(Ue(a))return n.batch(a),n.state;var h=oe(er(a,c));if(n.status===te.Stopped)return W||ne(!1,'Event "'.concat(h.name,'" was sent to stopped service "').concat(n.machine.id,`". This service has already reached its final state, and will not transition.
Event: `).concat(JSON.stringify(h.data))),n.state;if(n.status!==te.Running&&!n.options.deferEvents)throw new Error('Event "'.concat(h.name,'" was sent to uninitialized service "').concat(n.machine.id,`". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.
Event: `).concat(JSON.stringify(h.data)));return n.scheduler.schedule(function(){n.forward(h);var f=n._nextState(h);n.update(f,h)}),n._state},this.sendTo=function(a,c,h){var f=n.parent&&(c===pe.Parent||n.parent.id===c),p=f?n.parent:G(c)?n.children.get(c)||Ot.get(c):Ki(c)?c:void 0;if(!p){if(!f)throw new Error("Unable to send event to child '".concat(c,"' from service '").concat(n.id,"'."));W||ne(!1,"Service '".concat(n.id,"' has no parent: unable to send event ").concat(a.type));return}if("machine"in p){if(n.status!==te.Stopped||n.parent!==p||n.state.done){var m=S(S({},a),{name:a.name===Wt?"".concat(Fe(n.id)):a.name,origin:n.sessionId});!h&&n.machine.config.predictableActionArguments?n._outgoingQueue.push([p,m]):p.send(m)}}else!h&&n.machine.config.predictableActionArguments?n._outgoingQueue.push([p,a.data]):p.send(a.data)},this._exec=function(a,c,h,f){f===void 0&&(f=n.machine.options.actions);var p=a.exec||Tt(a.type,f),m=$(p)?p:p?p.exec:a.exec;if(m)try{return m(c,h.data,n.machine.config.predictableActionArguments?{action:a,_event:h}:{action:a,state:n.state,_event:h})}catch(Z){throw n.parent&&n.parent.send({type:"xstate.error",data:Z}),Z}switch(a.type){case De:var w=a;if(typeof w.delay=="number"){n.defer(w);return}else w.to?n.sendTo(w._event,w.to,h===Re):n.send(w._event);break;case Kt:n.cancel(a.sendId);break;case ut:{if(n.status!==te.Running)return;var E=a.activity;if(!n.machine.config.predictableActionArguments&&!n.state.activities[E.id||E.type])break;if(E.type===Y.Invoke){var A=nn(E.src),T=n.machine.options.services?n.machine.options.services[A.type]:void 0,O=E.id,I=E.data;W||ne(!("forward"in E),"`forward` property is deprecated (found in invocation of '".concat(E.src,"' in in machine '").concat(n.machine.id,"'). ")+"Please use `autoForward` instead.");var _="autoForward"in E?E.autoForward:!!E.forward;if(!T){W||ne(!1,"No service found for invocation '".concat(E.src,"' in machine '").concat(n.machine.id,"'."));return}var N=I?gt(I,c,h):void 0;if(typeof T=="string")return;var C=$(T)?T(c,h.data,{data:N,src:A,meta:E.meta}):T;if(!C)return;var P=void 0;ge(C)&&(C=N?C.withContext(N):C,P={autoForward:_}),n.spawn(C,O,P)}else n.spawnActivity(E);break}case lt:{n.stopChild(a.activity.id);break}case ht:var k=a.label,M=a.value;k?n.logger(k,M):n.logger(M);break;default:W||ne(!1,"No implementation found for action type '".concat(a.type,"'"));break}};var i=S(S({},t.defaultOptions),r),s=i.clock,o=i.logger,d=i.parent,u=i.id,l=u!==void 0?u:e.id;this.id=l,this.logger=o,this.clock=s,this.parent=d,this.options=i,this.scheduler=new Sn({deferEvents:this.options.deferEvents}),this.sessionId=Ot.bookId()}return Object.defineProperty(t.prototype,"initialState",{get:function(){var e=this;return this._initialState?this._initialState:Ve(this,function(){return e._initialState=e.machine.initialState,e._initialState})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return W||ne(this.status!==te.NotStarted,"Attempted to read state from uninitialized service '".concat(this.id,"'. Make sure the service is started first.")),this._state},enumerable:!1,configurable:!0}),t.prototype.execute=function(e,r){var n,i;try{for(var s=B(e.actions),o=s.next();!o.done;o=s.next()){var d=o.value;this.exec(d,e,r)}}catch(u){n={error:u}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}},t.prototype.update=function(e,r){var n,i,s,o,d,u,l,a,c=this;if(e._sessionid=this.sessionId,this._state=e,(!this.machine.config.predictableActionArguments||r===Re)&&this.options.execute)this.execute(this.state);else for(var h=void 0;h=this._outgoingQueue.shift();)h[0].send(h[1]);if(this.children.forEach(function(P){c.state.children[P.id]=P}),this.devTools&&this.devTools.send(r.data,e),e.event)try{for(var f=B(this.eventListeners),p=f.next();!p.done;p=f.next()){var m=p.value;m(e.event)}}catch(P){n={error:P}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(n)throw n.error}}try{for(var w=B(this.listeners),E=w.next();!E.done;E=w.next()){var m=E.value;m(e,e.event)}}catch(P){s={error:P}}finally{try{E&&!E.done&&(o=w.return)&&o.call(w)}finally{if(s)throw s.error}}try{for(var A=B(this.contextListeners),T=A.next();!T.done;T=A.next()){var O=T.value;O(this.state.context,this.state.history?this.state.history.context:void 0)}}catch(P){d={error:P}}finally{try{T&&!T.done&&(u=A.return)&&u.call(A)}finally{if(d)throw d.error}}if(this.state.done){var I=e.configuration.find(function(P){return P.type==="final"&&P.parent===c.machine}),_=I&&I.doneData?gt(I.doneData,e.context,r):void 0;try{for(var N=B(this.doneListeners),C=N.next();!C.done;C=N.next()){var m=C.value;m(Ze(this.id,_))}}catch(P){l={error:P}}finally{try{C&&!C.done&&(a=N.return)&&a.call(N)}finally{if(l)throw l.error}}this._stop(),this._stopChildren()}},t.prototype.onTransition=function(e){return this.listeners.add(e),this.status===te.Running&&e(this.state,this.state.event),this},t.prototype.subscribe=function(e,r,n){var i=this,s=Qe(e,r,n);this.listeners.add(s.next),this.status!==te.NotStarted&&s.next(this.state);var o=function(){i.doneListeners.delete(o),i.stopListeners.delete(o),s.complete()};return this.status===te.Stopped?s.complete():(this.onDone(o),this.onStop(o)),{unsubscribe:function(){i.listeners.delete(s.next),i.doneListeners.delete(o),i.stopListeners.delete(o)}}},t.prototype.onEvent=function(e){return this.eventListeners.add(e),this},t.prototype.onSend=function(e){return this.sendListeners.add(e),this},t.prototype.onChange=function(e){return this.contextListeners.add(e),this},t.prototype.onStop=function(e){return this.stopListeners.add(e),this},t.prototype.onDone=function(e){return this.doneListeners.add(e),this},t.prototype.off=function(e){return this.listeners.delete(e),this.eventListeners.delete(e),this.sendListeners.delete(e),this.stopListeners.delete(e),this.doneListeners.delete(e),this.contextListeners.delete(e),this},t.prototype.start=function(e){var r=this;if(this.status===te.Running)return this;this.machine._init(),Ot.register(this.sessionId,this),this.initialized=!0,this.status=te.Running;var n=e===void 0?this.initialState:Ve(this,function(){return gs(e)?r.machine.resolveState(e):r.machine.resolveState(de.from(e,r.machine.context))});return this.options.devTools&&this.attachDev(),this.scheduler.initialize(function(){r.update(n,Re)}),this},t.prototype._stopChildren=function(){this.children.forEach(function(e){$(e.stop)&&e.stop()}),this.children.clear()},t.prototype._stop=function(){var e,r,n,i,s,o,d,u,l,a;try{for(var c=B(this.listeners),h=c.next();!h.done;h=c.next()){var f=h.value;this.listeners.delete(f)}}catch(N){e={error:N}}finally{try{h&&!h.done&&(r=c.return)&&r.call(c)}finally{if(e)throw e.error}}try{for(var p=B(this.stopListeners),m=p.next();!m.done;m=p.next()){var f=m.value;f(),this.stopListeners.delete(f)}}catch(N){n={error:N}}finally{try{m&&!m.done&&(i=p.return)&&i.call(p)}finally{if(n)throw n.error}}try{for(var w=B(this.contextListeners),E=w.next();!E.done;E=w.next()){var f=E.value;this.contextListeners.delete(f)}}catch(N){s={error:N}}finally{try{E&&!E.done&&(o=w.return)&&o.call(w)}finally{if(s)throw s.error}}try{for(var A=B(this.doneListeners),T=A.next();!T.done;T=A.next()){var f=T.value;this.doneListeners.delete(f)}}catch(N){d={error:N}}finally{try{T&&!T.done&&(u=A.return)&&u.call(A)}finally{if(d)throw d.error}}if(!this.initialized)return this;this.initialized=!1,this.status=te.Stopped,this._initialState=void 0;try{for(var O=B(Object.keys(this.delayedEventsMap)),I=O.next();!I.done;I=O.next()){var _=I.value;this.clock.clearTimeout(this.delayedEventsMap[_])}}catch(N){l={error:N}}finally{try{I&&!I.done&&(a=O.return)&&a.call(O)}finally{if(l)throw l.error}}this.scheduler.clear(),this.scheduler=new Sn({deferEvents:this.options.deferEvents})},t.prototype.stop=function(){var e=this,r=this.scheduler;return this._stop(),r.schedule(function(){var n=oe({type:"xstate.stop"}),i=Ve(e,function(){var s=Q(z([],F(e.state.configuration),!1).sort(function(a,c){return c.order-a.order}).map(function(a){return Ee(a.onExit,e.machine.options.actions)})),o=F(et(e.machine,e.state,e.state.context,n,[s],e.machine.config.predictableActionArguments?e._exec:void 0,e.machine.config.predictableActionArguments||e.machine.config.preserveActionOrder),2),d=o[0],u=o[1],l=new de({value:e.state.value,context:u,_event:n,_sessionid:e.sessionId,historyValue:void 0,history:e.state,actions:d.filter(function(a){return a.type!==Ne&&(a.type!==De||!!a.to&&a.to!==pe.Internal)}),activities:{},events:[],configuration:[],transitions:[],children:{},done:e.state.done,tags:e.state.tags,machine:e.machine});return l.changed=!0,l});e.update(i,n),e._stopChildren(),Ot.free(e.sessionId)}),this},t.prototype.batch=function(e){var r=this;if(this.status===te.NotStarted&&this.options.deferEvents)W||ne(!1,"".concat(e.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,`" and are deferred. Make sure .start() is called for this service.
Event: `).concat(JSON.stringify(event)));else if(this.status!==te.Running)throw new Error("".concat(e.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.'));if(e.length){var n=!!this.machine.config.predictableActionArguments&&this._exec;this.scheduler.schedule(function(){var i,s,o=r.state,d=!1,u=[],l=function(f){var p=oe(f);r.forward(p),o=Ve(r,function(){return r.machine.transition(o,p,void 0,n||void 0)}),u.push.apply(u,z([],F(r.machine.config.predictableActionArguments?o.actions:o.actions.map(function(m){return Es(m,o)})),!1)),d=d||!!o.changed};try{for(var a=B(e),c=a.next();!c.done;c=a.next()){var h=c.value;l(h)}}catch(f){i={error:f}}finally{try{c&&!c.done&&(s=a.return)&&s.call(a)}finally{if(i)throw i.error}}o.changed=d,o.actions=u,r.update(o,oe(e[e.length-1]))})}},t.prototype.sender=function(e){return this.send.bind(this,e)},t.prototype._nextState=function(e,r){var n=this;r===void 0&&(r=!!this.machine.config.predictableActionArguments&&this._exec);var i=oe(e);if(i.name.indexOf(Jt)===0&&!this.state.nextEvents.some(function(o){return o.indexOf(Jt)===0}))throw i.data.data;var s=Ve(this,function(){return n.machine.transition(n.state,i,void 0,r||void 0)});return s},t.prototype.nextState=function(e){return this._nextState(e,!1)},t.prototype.forward=function(e){var r,n;try{for(var i=B(this.forwardTo),s=i.next();!s.done;s=i.next()){var o=s.value,d=this.children.get(o);if(!d)throw new Error("Unable to forward event '".concat(e,"' from interpreter '").concat(this.id,"' to nonexistant child '").concat(o,"'."));d.send(e)}}catch(u){r={error:u}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},t.prototype.defer=function(e){var r=this;this.delayedEventsMap[e.id]=this.clock.setTimeout(function(){e.to?r.sendTo(e._event,e.to,!0):r.send(e._event)},e.delay)},t.prototype.cancel=function(e){this.clock.clearTimeout(this.delayedEventsMap[e]),delete this.delayedEventsMap[e]},t.prototype.exec=function(e,r,n){n===void 0&&(n=this.machine.options.actions),this._exec(e,r.context,r._event,n)},t.prototype.removeChild=function(e){var r;this.children.delete(e),this.forwardTo.delete(e),(r=this.state)===null||r===void 0||delete r.children[e]},t.prototype.stopChild=function(e){var r=this.children.get(e);r&&(this.removeChild(e),$(r.stop)&&r.stop())},t.prototype.spawn=function(e,r,n){if(this.status!==te.Running)return rr(e,r);if(Xr(e))return this.spawnPromise(Promise.resolve(e),r);if($(e))return this.spawnCallback(e,r);if(fs(e))return this.spawnActor(e,r);if(zi(e))return this.spawnObservable(e,r);if(ge(e))return this.spawnMachine(e,S(S({},n),{id:r}));if(Hi(e))return this.spawnBehavior(e,r);throw new Error('Unable to spawn entity "'.concat(r,'" of type "').concat(typeof e,'".'))},t.prototype.spawnMachine=function(e,r){var n=this;r===void 0&&(r={});var i=new t(e,S(S({},this.options),{parent:this,id:r.id||e.id})),s=S(S({},or),r);s.sync&&i.onTransition(function(d){n.send(pt,{state:d,id:i.id})});var o=i;return this.children.set(i.id,o),s.autoForward&&this.forwardTo.add(i.id),i.onDone(function(d){n.removeChild(i.id),n.send(oe(d,{origin:i.id}))}).start(),o},t.prototype.spawnBehavior=function(e,r){var n=As(e,{id:r,parent:this});return this.children.set(r,n),n},t.prototype.spawnPromise=function(e,r){var n,i=this,s=!1,o;e.then(function(u){s||(o=u,i.removeChild(r),i.send(oe(Ze(r,u),{origin:r})))},function(u){if(!s){i.removeChild(r);var l=Fe(r,u);try{i.send(oe(l,{origin:r}))}catch(a){Qi(u,a,r),i.devTools&&i.devTools.send(l,i.state),i.machine.strict&&i.stop()}}});var d=(n={id:r,send:function(){},subscribe:function(u,l,a){var c=Qe(u,l,a),h=!1;return e.then(function(f){h||(c.next(f),!h&&c.complete())},function(f){h||c.error(f)}),{unsubscribe:function(){return h=!0}}},stop:function(){s=!0},toJSON:function(){return{id:r}},getSnapshot:function(){return o}},n[xe]=function(){return this},n);return this.children.set(r,d),d},t.prototype.spawnCallback=function(e,r){var n,i=this,s=!1,o=new Set,d=new Set,u,l=function(h){u=h,d.forEach(function(f){return f(h)}),!s&&i.send(oe(h,{origin:r}))},a;try{a=e(l,function(h){o.add(h)})}catch(h){this.send(Fe(r,h))}if(Xr(a))return this.spawnPromise(a,r);var c=(n={id:r,send:function(h){return o.forEach(function(f){return f(h)})},subscribe:function(h){var f=Qe(h);return d.add(f.next),{unsubscribe:function(){d.delete(f.next)}}},stop:function(){s=!0,$(a)&&a()},toJSON:function(){return{id:r}},getSnapshot:function(){return u}},n[xe]=function(){return this},n);return this.children.set(r,c),c},t.prototype.spawnObservable=function(e,r){var n,i=this,s,o=e.subscribe(function(u){s=u,i.send(oe(u,{origin:r}))},function(u){i.removeChild(r),i.send(oe(Fe(r,u),{origin:r}))},function(){i.removeChild(r),i.send(oe(Ze(r),{origin:r}))}),d=(n={id:r,send:function(){},subscribe:function(u,l,a){return e.subscribe(u,l,a)},stop:function(){return o.unsubscribe()},getSnapshot:function(){return s},toJSON:function(){return{id:r}}},n[xe]=function(){return this},n);return this.children.set(r,d),d},t.prototype.spawnActor=function(e,r){return this.children.set(r,e),e},t.prototype.spawnActivity=function(e){var r=this.machine.options&&this.machine.options.activities?this.machine.options.activities[e.type]:void 0;if(!r){W||ne(!1,"No implementation found for activity '".concat(e.type,"'"));return}var n=r(this.state.context,e);this.spawnEffect(e.id,n)},t.prototype.spawnEffect=function(e,r){var n;this.children.set(e,(n={id:e,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},stop:r||void 0,getSnapshot:function(){},toJSON:function(){return{id:e}}},n[xe]=function(){return this},n))},t.prototype.attachDev=function(){var e=sr();if(this.options.devTools&&e){if(e.__REDUX_DEVTOOLS_EXTENSION__){var r=typeof this.options.devTools=="object"?this.options.devTools:void 0;this.devTools=e.__REDUX_DEVTOOLS_EXTENSION__.connect(S(S({name:this.id,autoPause:!0,stateSanitizer:function(n){return{value:n.value,context:n.context,actions:n.actions}}},r),{features:S({jump:!1,skip:!1},r?r.features:void 0)}),this.machine),this.devTools.init(this.state)}xs(this)}},t.prototype.toJSON=function(){return{id:this.id}},t.prototype[xe]=function(){return this},t.prototype.getSnapshot=function(){return this.status===te.NotStarted?this.initialState:this._state},t.defaultOptions={execute:!0,deferEvents:!0,clock:{setTimeout:function(e,r){return setTimeout(e,r)},clearTimeout:function(e){return clearTimeout(e)}},logger:console.log.bind(console),devTools:!1},t.interpret=Ce,t}(),bs=function(t){return G(t)?S(S({},or),{name:t}):S(S(S({},or),{name:Ji()}),t)};function ks(t,e){var r=bs(e);return ls(function(n){if(!W){var i=ge(t)||$(t);ne(!!n||i,'Attempted to spawn an Actor (ID: "'.concat(ge(t)?t.id:"undefined",'") outside of a service. This will have no effect.'))}return n?n.spawn(t,r.name,r):rr(t,r.name)})}function Ce(t,e){var r=new Os(t,e);return r}function Is(t){if(typeof t=="string"){var e={type:t};return e.toString=function(){return t},e}return t}function bt(t){return S(S({type:ft},t),{toJSON:function(){t.onDone,t.onError;var e=zt(t,["onDone","onError"]);return S(S({},e),{type:ft,src:Is(t.src)})}})}var Be="",ar="#",it="*",Ge={},qe=function(t){return t[0]===ar},_s=function(){return{actions:{},guards:{},services:{},activities:{},delays:{}}},Ns=function(t,e,r){var n=r.slice(0,-1).some(function(s){return!("cond"in s)&&!("in"in s)&&(G(s.target)||ge(s.target))}),i=e===Be?"the transient event":"event '".concat(e,"'");ne(!n,"One or more transitions for ".concat(i," on state '").concat(t.id,"' are unreachable. ")+"Make sure that the default transition is the last one defined.")},Ds=function(){function t(e,r,n,i){n===void 0&&(n="context"in e?e.context:void 0);var s=this,o;this.config=e,this._context=n,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.tags=[],this.options=Object.assign(_s(),r),this.parent=i==null?void 0:i.parent,this.key=this.config.key||(i==null?void 0:i.key)||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:zr),this.id=this.config.id||z([this.machine.key],F(this.path),!1).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.schema=this.parent?this.machine.schema:(o=this.config.schema)!==null&&o!==void 0?o:{},this.description=this.config.description,W||ne(!("parallel"in this.config),'The "parallel" property is deprecated and will be removed in version 4.1. '.concat(this.config.parallel?"Replace with `type: 'parallel'`":"Use `type: '".concat(this.type,"'`")," in the config for state node '").concat(this.id,"' instead.")),this.initial=this.config.initial,this.states=this.config.states?We(this.config.states,function(l,a){var c,h=new t(l,{},void 0,{parent:s,key:a});return Object.assign(s.idMap,S((c={},c[h.id]=h,c),h.idMap)),h}):Ge;var d=0;function u(l){var a,c;l.order=d++;try{for(var h=B(mn(l)),f=h.next();!f.done;f=h.next()){var p=f.value;u(p)}}catch(m){a={error:m}}finally{try{f&&!f.done&&(c=h.return)&&c.call(h)}finally{if(a)throw a.error}}}u(this),this.history=this.config.history===!0?"shallow":this.config.history||!1,this._transient=!!this.config.always||(this.config.on?Array.isArray(this.config.on)?this.config.on.some(function(l){var a=l.event;return a===Be}):Be in this.config.on:!1),this.strict=!!this.config.strict,this.onEntry=le(this.config.entry||this.config.onEntry).map(function(l){return je(l)}),this.onExit=le(this.config.exit||this.config.onExit).map(function(l){return je(l)}),this.meta=this.config.meta,this.doneData=this.type==="final"?this.config.data:void 0,this.invoke=le(this.config.invoke).map(function(l,a){var c,h;if(ge(l)){var f=Et(s.id,a);return s.machine.options.services=S((c={},c[f]=l,c),s.machine.options.services),bt({src:f,id:f})}else if(G(l.src)){var f=l.id||Et(s.id,a);return bt(S(S({},l),{id:f,src:l.src}))}else if(ge(l.src)||$(l.src)){var f=l.id||Et(s.id,a);return s.machine.options.services=S((h={},h[f]=l.src,h),s.machine.options.services),bt(S(S({id:f},l),{src:f}))}else{var p=l.src;return bt(S(S({id:Et(s.id,a)},l),{src:p}))}}),this.activities=le(this.config.activities).concat(this.invoke).map(function(l){return St(l)}),this.transition=this.transition.bind(this),this.tags=le(this.config.tags)}return t.prototype._init=function(){this.__cache.transitions||yn(this).forEach(function(e){return e.on})},t.prototype.withConfig=function(e,r){var n=this.options,i=n.actions,s=n.activities,o=n.guards,d=n.services,u=n.delays;return new t(this.config,{actions:S(S({},i),e.actions),activities:S(S({},s),e.activities),guards:S(S({},o),e.guards),services:S(S({},d),e.services),delays:S(S({},u),e.delays)},r!=null?r:this.context)},t.prototype.withContext=function(e){return new t(this.config,this.options,e)},Object.defineProperty(t.prototype,"context",{get:function(){return $(this._context)?this._context():this._context},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,context:this.context,type:this.type,initial:this.initial,history:this.history,states:We(this.states,function(e){return e.definition}),on:this.on,transitions:this.transitions,entry:this.onEntry,exit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.doneData,invoke:this.invoke,description:this.description,tags:this.tags}},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return this.definition},Object.defineProperty(t.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var e=this.transitions;return this.__cache.on=e.reduce(function(r,n){return r[n.eventType]=r[n.eventType]||[],r[n.eventType].push(n),r},{})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!1,configurable:!0}),t.prototype.getCandidates=function(e){if(this.__cache.candidates[e])return this.__cache.candidates[e];var r=e===Be,n=this.transitions.filter(function(i){var s=i.eventType===e;return r?s:s||i.eventType===it});return this.__cache.candidates[e]=n,n},t.prototype.getDelayedTransitions=function(){var e=this,r=this.config.after;if(!r)return[];var n=function(s,o){var d=$(s)?"".concat(e.id,":delay[").concat(o,"]"):s,u=pn(d,e.id);return e.onEntry.push(Ae(u,{delay:s})),e.onExit.push(un(u)),u},i=Ue(r)?r.map(function(s,o){var d=n(s.delay,o);return S(S({},s),{event:d})}):Q(Object.keys(r).map(function(s,o){var d=r[s],u=G(d)?{target:d}:d,l=isNaN(+s)?s:+s,a=n(l,o);return le(u).map(function(c){return S(S({},c),{event:a,delay:l})})}));return i.map(function(s){var o=s.delay;return S(S({},e.formatTransition(s)),{delay:o})})},t.prototype.getStateNodes=function(e){var r,n=this;if(!e)return[];var i=e instanceof de?e.value:Je(e,this.delimiter);if(G(i)){var s=this.getStateNode(i).initial;return s!==void 0?this.getStateNodes((r={},r[i]=s,r)):[this,this.states[i]]}var o=Object.keys(i),d=[this];return d.push.apply(d,z([],F(Q(o.map(function(u){return n.getStateNode(u).getStateNodes(i[u])}))),!1)),d},t.prototype.handles=function(e){var r=Jr(e);return this.events.includes(r)},t.prototype.resolveState=function(e){var r=e instanceof de?e:de.create(e),n=Array.from(rt([],this.getStateNodes(r.value)));return new de(S(S({},r),{value:this.resolve(r.value),configuration:n,done:At(n,this),tags:En(n),machine:this.machine}))},t.prototype.transitionLeafNode=function(e,r,n){var i=this.getStateNode(e),s=i.next(r,n);return!s||!s.transitions.length?this.next(r,n):s},t.prototype.transitionCompoundNode=function(e,r,n){var i=Object.keys(e),s=this.getStateNode(i[0]),o=s._transition(e[i[0]],r,n);return!o||!o.transitions.length?this.next(r,n):o},t.prototype.transitionParallelNode=function(e,r,n){var i,s,o={};try{for(var d=B(Object.keys(e)),u=d.next();!u.done;u=d.next()){var l=u.value,a=e[l];if(a){var c=this.getStateNode(l),h=c._transition(a,r,n);h&&(o[l]=h)}}}catch(A){i={error:A}}finally{try{u&&!u.done&&(s=d.return)&&s.call(d)}finally{if(i)throw i.error}}var f=Object.keys(o).map(function(A){return o[A]}),p=Q(f.map(function(A){return A.transitions})),m=f.some(function(A){return A.transitions.length>0});if(!m)return this.next(r,n);var w=Q(f.map(function(A){return A.entrySet})),E=Q(Object.keys(o).map(function(A){return o[A].configuration}));return{transitions:p,entrySet:w,exitSet:Q(f.map(function(A){return A.exitSet})),configuration:E,source:r,actions:Q(Object.keys(o).map(function(A){return o[A].actions}))}},t.prototype._transition=function(e,r,n){return G(e)?this.transitionLeafNode(e,r,n):Object.keys(e).length===1?this.transitionCompoundNode(e,r,n):this.transitionParallelNode(e,r,n)},t.prototype.getTransitionData=function(e,r){return this._transition(e.value,e,oe(r))},t.prototype.next=function(e,r){var n,i,s=this,o=r.name,d=[],u=[],l;try{for(var a=B(this.getCandidates(o)),c=a.next();!c.done;c=a.next()){var h=c.value,f=h.cond,p=h.in,m=e.context,w=p?G(p)&&qe(p)?e.matches(Je(this.getStateNodeById(p).path,this.delimiter)):Xt(Je(p,this.delimiter),Bi(this.path.slice(0,-2))(e.value)):!0,E=!1;try{E=!f||rn(this.machine,f,m,r,e)}catch(I){throw new Error("Unable to evaluate guard '".concat(f.name||f.type,"' in transition for event '").concat(o,"' in state node '").concat(this.id,`':
`).concat(I.message))}if(E&&w){h.target!==void 0&&(u=h.target),d.push.apply(d,z([],F(h.actions),!1)),l=h;break}}}catch(I){n={error:I}}finally{try{c&&!c.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}if(l){if(!u.length)return{transitions:[l],entrySet:[],exitSet:[],configuration:e.value?[this]:[],source:e,actions:d};var A=Q(u.map(function(I){return s.getRelativeStateNodes(I,e.historyValue)})),T=!!l.internal,O=[];return T||u.forEach(function(I){O.push.apply(O,z([],F(s.getExternalReentryNodes(I)),!1))}),{transitions:[l],entrySet:O,exitSet:T?[]:[this],configuration:A,source:e,actions:d}}},t.prototype.getExternalReentryNodes=function(e){for(var r=[],n=F(e.order>this.order?[e,this]:[this,e],2),i=n[0],s=n[1];i&&i!==s;)r.push(i),i=i.parent;return i!==s?[]:(r.push(s),r)},t.prototype.getActions=function(e,r,n,i,s,o,d){var u,l,a,c,h=this,f=rt([],o?this.getStateNodes(o.value):[this]);try{for(var p=B(e),m=p.next();!m.done;m=p.next()){var w=m.value;(!nt(f,w)||nt(n.entrySet,w.parent))&&n.entrySet.push(w)}}catch(k){u={error:k}}finally{try{m&&!m.done&&(l=p.return)&&l.call(p)}finally{if(u)throw u.error}}try{for(var E=B(f),A=E.next();!A.done;A=E.next()){var w=A.value;(!nt(e,w)||nt(n.exitSet,w.parent))&&n.exitSet.push(w)}}catch(k){a={error:k}}finally{try{A&&!A.done&&(c=E.return)&&c.call(E)}finally{if(a)throw a.error}}var T=Q(n.entrySet.map(function(k){var M=[];if(k.type!=="final")return M;var Z=k.parent;if(!Z.parent)return M;M.push(Xe(k.id,k.doneData),Xe(Z.id,k.doneData?gt(k.doneData,i,s):void 0));var ce=Z.parent;return ce.type==="parallel"&&tt(ce).every(function(J){return At(n.configuration,J)})&&M.push(Xe(ce.id)),M}));n.exitSet.sort(function(k,M){return M.order-k.order}),n.entrySet.sort(function(k,M){return k.order-M.order});var O=new Set(n.entrySet),I=new Set(n.exitSet),_=Array.from(O).map(function(k){var M=k.onEntry,Z=k.activities.map(function(ce){return ln(ce)});return Ee(d?z(z([],F(M),!1),F(Z),!1):z(z([],F(Z),!1),F(M),!1),h.machine.options.actions)}).concat([T.map(sn)]),N=Array.from(I).map(function(k){return Ee(z(z([],F(k.onExit),!1),F(k.activities.map(function(M){return dn(M)})),!1),h.machine.options.actions)}),C=N.concat([Ee(n.actions,this.machine.options.actions)]).concat(_);if(r){var P=Ee(Q(z([],F(e),!1).sort(function(k,M){return M.order-k.order}).map(function(k){return k.onExit})),this.machine.options.actions).filter(function(k){return k.type!==Ne&&(k.type!==De||!!k.to&&k.to!==pe.Internal)});return C.concat([P])}return C},t.prototype.transition=function(e,r,n,i){e===void 0&&(e=this.initialState);var s=oe(r),o;if(e instanceof de)o=n===void 0?e:this.resolveState(de.from(e,n));else{var d=G(e)?this.resolve(mt(this.getResolvedPath(e))):this.resolve(e),u=n!=null?n:this.machine.context;o=this.resolveState(de.from(d,u))}if(!W&&s.name===it)throw new Error("An event cannot have the wildcard type ('".concat(it,"')"));if(this.strict&&!this.events.includes(s.name)&&!qi(s.name))throw new Error("Machine '".concat(this.id,"' does not accept event '").concat(s.name,"'"));var l=this._transition(o.value,o,s)||{transitions:[],configuration:[],entrySet:[],exitSet:[],source:o,actions:[]},a=rt([],this.getStateNodes(o.value)),c=l.configuration.length?rt(a,l.configuration):a;return l.configuration=z([],F(c),!1),this.resolveTransition(l,o,o.context,i,s)},t.prototype.resolveRaisedTransition=function(e,r,n,i){var s,o=e.actions;return e=this.transition(e,r,void 0,i),e._event=n,e.event=n.data,(s=e.actions).unshift.apply(s,z([],F(o),!1)),e},t.prototype.resolveTransition=function(e,r,n,i,s){var o,d,u,l,a=this;s===void 0&&(s=Re);var c=e.configuration,h=!r||e.transitions.length>0,f=h?e.configuration:r?r.configuration:[],p=At(f,this),m=h?vs(this.machine,c):void 0,w=r?r.historyValue?r.historyValue:e.source?this.machine.historyValue(r.value):void 0:void 0,E=this.getActions(new Set(f),p,e,n,s,r,i),A=r?S({},r.activities):{};try{for(var T=B(E),O=T.next();!O.done;O=T.next()){var I=O.value;try{for(var _=(u=void 0,B(I)),N=_.next();!N.done;N=_.next()){var C=N.value;C.type===ut?A[C.activity.id||C.activity.type]=C:C.type===lt&&(A[C.activity.id||C.activity.type]=!1)}}catch(ue){u={error:ue}}finally{try{N&&!N.done&&(l=_.return)&&l.call(_)}finally{if(u)throw u.error}}}}catch(ue){o={error:ue}}finally{try{O&&!O.done&&(d=T.return)&&d.call(T)}finally{if(o)throw o.error}}var P=F(et(this,r,n,s,E,i,this.machine.config.predictableActionArguments||this.machine.config.preserveActionOrder),2),k=P[0],M=P[1],Z=F(Yi(k,function(ue){return ue.type===Ne||ue.type===De&&ue.to===pe.Internal}),2),ce=Z[0],J=Z[1],ye=k.filter(function(ue){var re;return ue.type===ut&&((re=ue.activity)===null||re===void 0?void 0:re.type)===ft}),we=ye.reduce(function(ue,re){return ue[re.activity.id]=ds(re.activity,a.machine,M,s),ue},r?S({},r.children):{}),v=new de({value:m||r.value,context:M,_event:s,_sessionid:r?r._sessionid:null,historyValue:m?w?$i(w,m):void 0:r?r.historyValue:void 0,history:!m||e.source?r:void 0,actions:m?J:[],activities:m?A:r?r.activities:{},events:[],configuration:f,transitions:e.transitions,children:we,done:p,tags:En(f),machine:this}),x=n!==M;v.changed=s.name===pt||x;var L=v.history;L&&delete L.history;var K=!p&&(this._transient||c.some(function(ue){return ue._transient}));if(!h&&(!K||s.name===Be))return v;var q=v;if(!p)for(K&&(q=this.resolveRaisedTransition(q,{type:qr},s,i));ce.length;){var H=ce.shift();q=this.resolveRaisedTransition(q,H._event,s,i)}var Ke=q.changed||(L?!!q.actions.length||x||typeof L.value!=typeof q.value||!Tn(q.value,L.value):void 0);return q.changed=Ke,q.history=L,q},t.prototype.getStateNode=function(e){if(qe(e))return this.machine.getStateNodeById(e);if(!this.states)throw new Error("Unable to retrieve child state '".concat(e,"' from '").concat(this.id,"'; no child states exist."));var r=this.states[e];if(!r)throw new Error("Child state '".concat(e,"' does not exist on '").concat(this.id,"'"));return r},t.prototype.getStateNodeById=function(e){var r=qe(e)?e.slice(ar.length):e;if(r===this.id)return this;var n=this.machine.idMap[r];if(!n)throw new Error("Child state node '#".concat(r,"' does not exist on machine '").concat(this.id,"'"));return n},t.prototype.getStateNodeByPath=function(e){if(typeof e=="string"&&qe(e))try{return this.getStateNodeById(e.slice(1))}catch{}for(var r=Zt(e,this.delimiter).slice(),n=this;r.length;){var i=r.shift();if(!i.length)break;n=n.getStateNode(i)}return n},t.prototype.resolve=function(e){var r,n=this;if(!e)return this.initialStateValue||Ge;switch(this.type){case"parallel":return We(this.initialStateValue,function(s,o){return s?n.getStateNode(o).resolve(e[o]||s):Ge});case"compound":if(G(e)){var i=this.getStateNode(e);return i.type==="parallel"||i.type==="compound"?(r={},r[e]=i.initialStateValue,r):e}return Object.keys(e).length?We(e,function(s,o){return s?n.getStateNode(o).resolve(s):Ge}):this.initialStateValue||{};default:return e||Ge}},t.prototype.getResolvedPath=function(e){if(qe(e)){var r=this.machine.idMap[e.slice(ar.length)];if(!r)throw new Error("Unable to find state node '".concat(e,"'"));return r.path}return Zt(e,this.delimiter)},Object.defineProperty(t.prototype,"initialStateValue",{get:function(){var e;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;var r;if(this.type==="parallel")r=Wr(this.states,function(n){return n.initialStateValue||Ge},function(n){return n.type!=="history"});else if(this.initial!==void 0){if(!this.states[this.initial])throw new Error("Initial state '".concat(this.initial,"' not found on '").concat(this.key,"'"));r=xt(this.states[this.initial])?this.initial:(e={},e[this.initial]=this.states[this.initial].initialStateValue,e)}else r={};return this.__cache.initialStateValue=r,this.__cache.initialStateValue},enumerable:!1,configurable:!0}),t.prototype.getInitialState=function(e,r){this._init();var n=this.getStateNodes(e);return this.resolveTransition({configuration:n,entrySet:z([],F(n),!1),exitSet:[],transitions:[],source:void 0,actions:[]},void 0,r!=null?r:this.machine.context,void 0)},Object.defineProperty(t.prototype,"initialState",{get:function(){var e=this.initialStateValue;if(!e)throw new Error("Cannot retrieve initial state from simple state '".concat(this.id,"'."));return this.getInitialState(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){var e;if(this.type==="history"){var r=this.config;G(r.target)?e=qe(r.target)?mt(this.machine.getStateNodeById(r.target).path.slice(this.path.length-1)):r.target:e=r.target}return e},enumerable:!1,configurable:!0}),t.prototype.getRelativeStateNodes=function(e,r,n){return n===void 0&&(n=!0),n?e.type==="history"?e.resolveHistory(r):e.initialStateNodes:[e]},Object.defineProperty(t.prototype,"initialStateNodes",{get:function(){var e=this;if(xt(this))return[this];if(this.type==="compound"&&!this.initial)return W||ne(!1,"Compound state node '".concat(this.id,"' has no initial state.")),[this];var r=yt(this.initialStateValue);return Q(r.map(function(n){return e.getFromRelativePath(n)}))},enumerable:!1,configurable:!0}),t.prototype.getFromRelativePath=function(e){if(!e.length)return[this];var r=F(e),n=r[0],i=r.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '".concat(n,"' from node with no states"));var s=this.getStateNode(n);if(s.type==="history")return s.resolveHistory();if(!this.states[n])throw new Error("Child state '".concat(n,"' does not exist on '").concat(this.id,"'"));return this.states[n].getFromRelativePath(i)},t.prototype.historyValue=function(e){if(Object.keys(this.states).length)return{current:e||this.initialStateValue,states:Wr(this.states,function(r,n){if(!e)return r.historyValue();var i=G(e)?void 0:e[n];return r.historyValue(i||r.initialStateValue)},function(r){return!r.history})}},t.prototype.resolveHistory=function(e){var r=this;if(this.type!=="history")return[this];var n=this.parent;if(!e){var i=this.target;return i?Q(yt(i).map(function(o){return n.getFromRelativePath(o)})):n.initialStateNodes}var s=Gi(n.path,"states")(e).current;return G(s)?[n.getStateNode(s)]:Q(yt(s).map(function(o){return r.history==="deep"?n.getFromRelativePath(o):[n.states[o[0]]]}))},Object.defineProperty(t.prototype,"stateIds",{get:function(){var e=this,r=Q(Object.keys(this.states).map(function(n){return e.states[n].stateIds}));return[this.id].concat(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"events",{get:function(){var e,r,n,i;if(this.__cache.events)return this.__cache.events;var s=this.states,o=new Set(this.ownEvents);if(s)try{for(var d=B(Object.keys(s)),u=d.next();!u.done;u=d.next()){var l=u.value,a=s[l];if(a.states)try{for(var c=(n=void 0,B(a.events)),h=c.next();!h.done;h=c.next()){var f=h.value;o.add("".concat(f))}}catch(p){n={error:p}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}}}catch(p){e={error:p}}finally{try{u&&!u.done&&(r=d.return)&&r.call(d)}finally{if(e)throw e.error}}return this.__cache.events=Array.from(o)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ownEvents",{get:function(){var e=new Set(this.transitions.filter(function(r){return!(!r.target&&!r.actions.length&&r.internal)}).map(function(r){return r.eventType}));return Array.from(e)},enumerable:!1,configurable:!0}),t.prototype.resolveTarget=function(e){var r=this;if(e!==void 0)return e.map(function(n){if(!G(n))return n;var i=n[0]===r.delimiter;if(i&&!r.parent)return r.getStateNodeByPath(n.slice(1));var s=i?r.key+n:n;if(r.parent)try{var o=r.parent.getStateNodeByPath(s);return o}catch(d){throw new Error("Invalid transition definition for state node '".concat(r.id,`':
`).concat(d.message))}else return r.getStateNodeByPath(s)})},t.prototype.formatTransition=function(e){var r=this,n=Wi(e.target),i="internal"in e?e.internal:n?n.some(function(u){return G(u)&&u[0]===r.delimiter}):!0,s=this.machine.options.guards,o=this.resolveTarget(n),d=S(S({},e),{actions:Ee(le(e.actions)),cond:tn(e.cond,s),target:o,source:this,internal:i,eventType:e.event,toJSON:function(){return S(S({},d),{target:d.target?d.target.map(function(u){return"#".concat(u.id)}):void 0,source:"#".concat(r.id)})}});return d},t.prototype.formatTransitions=function(){var e,r,n=this,i;if(!this.config.on)i=[];else if(Array.isArray(this.config.on))i=this.config.on;else{var s=this.config.on,o=it,d=s[o],u=d===void 0?[]:d,l=zt(s,[typeof o=="symbol"?o:o+""]);i=Q(Object.keys(l).map(function(A){!W&&A===Be&&ne(!1,"Empty string transition configs (e.g., `{ on: { '': ... }}`) for transient transitions are deprecated. Specify the transition in the `{ always: ... }` property instead. "+'Please check the `on` configuration for "#'.concat(n.id,'".'));var T=Me(A,l[A]);return W||Ns(n,A,T),T}).concat(Me(it,u)))}var a=this.config.always?Me("",this.config.always):[],c=this.config.onDone?Me(String(Xe(this.id)),this.config.onDone):[];W||ne(!(this.config.onDone&&!this.parent),'Root nodes cannot have an ".onDone" transition. Please check the config of "'.concat(this.id,'".'));var h=Q(this.invoke.map(function(A){var T=[];return A.onDone&&T.push.apply(T,z([],F(Me(String(Ze(A.id)),A.onDone)),!1)),A.onError&&T.push.apply(T,z([],F(Me(String(Fe(A.id)),A.onError)),!1)),T})),f=this.after,p=Q(z(z(z(z([],F(c),!1),F(h),!1),F(i),!1),F(a),!1).map(function(A){return le(A).map(function(T){return n.formatTransition(T)})}));try{for(var m=B(f),w=m.next();!w.done;w=m.next()){var E=w.value;p.push(E)}}catch(A){e={error:A}}finally{try{w&&!w.done&&(r=m.return)&&r.call(m)}finally{if(e)throw e.error}}return p},t}(),wn=!1;function Oe(t,e){return!W&&!t.predictableActionArguments&&!wn&&(wn=!0,console.warn("It is highly recommended to set `predictableActionArguments` to `true` when using `createMachine`. https://xstate.js.org/docs/guides/actions.html")),new Ds(t,e)}var j=fn,ie=Ae;/*! js-cookie v3.0.1 | MIT */function kt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)t[n]=r[n]}return t}var Rs={read:function(t){return t[0]==='"'&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function cr(t,e){function r(i,s,o){if(typeof document!="undefined"){o=kt({},e,o),typeof o.expires=="number"&&(o.expires=new Date(Date.now()+o.expires*864e5)),o.expires&&(o.expires=o.expires.toUTCString()),i=encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var d="";for(var u in o)o[u]&&(d+="; "+u,o[u]!==!0&&(d+="="+o[u].split(";")[0]));return document.cookie=i+"="+t.write(s,i)+d}}function n(i){if(!(typeof document=="undefined"||arguments.length&&!i)){for(var s=document.cookie?document.cookie.split("; "):[],o={},d=0;d<s.length;d++){var u=s[d].split("="),l=u.slice(1).join("=");try{var a=decodeURIComponent(u[0]);if(o[a]=t.read(l,a),i===a)break}catch{}}return i?o[i]:o}}return Object.create({set:r,get:n,remove:function(i,s){r(i,"",kt({},s,{expires:-1}))},withAttributes:function(i){return cr(this.converter,kt({},this.attributes,i))},withConverter:function(i){return cr(kt({},this.converter,i),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(t)}})}var ur=cr(Rs,{path:"/"}),lr=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function dr(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Cs(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){if(this instanceof n){var i=[null];i.push.apply(i,arguments);var s=Function.bind.apply(e,i);return new s}return e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var hr={exports:{}};(function(t,e){(function(r){function n(i){var s=i&&i.Promise||r.Promise,o=i&&i.XMLHttpRequest||r.XMLHttpRequest;return function(){var d=Object.create(r,{fetch:{value:void 0,writable:!0}});return function(u,l){l(e)}(this,function(u){var l=typeof d!="undefined"&&d||typeof self!="undefined"&&self||typeof l!="undefined"&&l,a={searchParams:"URLSearchParams"in l,iterable:"Symbol"in l&&"iterator"in Symbol,blob:"FileReader"in l&&"Blob"in l&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in l,arrayBuffer:"ArrayBuffer"in l};function c(v){return v&&DataView.prototype.isPrototypeOf(v)}if(a.arrayBuffer)var h=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],f=ArrayBuffer.isView||function(v){return v&&h.indexOf(Object.prototype.toString.call(v))>-1};function p(v){if(typeof v!="string"&&(v=String(v)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(v)||v==="")throw new TypeError("Invalid character in header field name");return v.toLowerCase()}function m(v){return typeof v!="string"&&(v=String(v)),v}function w(v){var x={next:function(){var L=v.shift();return{done:L===void 0,value:L}}};return a.iterable&&(x[Symbol.iterator]=function(){return x}),x}function E(v){this.map={},v instanceof E?v.forEach(function(x,L){this.append(L,x)},this):Array.isArray(v)?v.forEach(function(x){this.append(x[0],x[1])},this):v&&Object.getOwnPropertyNames(v).forEach(function(x){this.append(x,v[x])},this)}E.prototype.append=function(v,x){v=p(v),x=m(x);var L=this.map[v];this.map[v]=L?L+", "+x:x},E.prototype.delete=function(v){delete this.map[p(v)]},E.prototype.get=function(v){return v=p(v),this.has(v)?this.map[v]:null},E.prototype.has=function(v){return this.map.hasOwnProperty(p(v))},E.prototype.set=function(v,x){this.map[p(v)]=m(x)},E.prototype.forEach=function(v,x){for(var L in this.map)this.map.hasOwnProperty(L)&&v.call(x,this.map[L],L,this)},E.prototype.keys=function(){var v=[];return this.forEach(function(x,L){v.push(L)}),w(v)},E.prototype.values=function(){var v=[];return this.forEach(function(x){v.push(x)}),w(v)},E.prototype.entries=function(){var v=[];return this.forEach(function(x,L){v.push([L,x])}),w(v)},a.iterable&&(E.prototype[Symbol.iterator]=E.prototype.entries);function A(v){if(v.bodyUsed)return s.reject(new TypeError("Already read"));v.bodyUsed=!0}function T(v){return new s(function(x,L){v.onload=function(){x(v.result)},v.onerror=function(){L(v.error)}})}function O(v){var x=new FileReader,L=T(x);return x.readAsArrayBuffer(v),L}function I(v){var x=new FileReader,L=T(x);return x.readAsText(v),L}function _(v){for(var x=new Uint8Array(v),L=new Array(x.length),K=0;K<x.length;K++)L[K]=String.fromCharCode(x[K]);return L.join("")}function N(v){if(v.slice)return v.slice(0);var x=new Uint8Array(v.byteLength);return x.set(new Uint8Array(v)),x.buffer}function C(){return this.bodyUsed=!1,this._initBody=function(v){this.bodyUsed=this.bodyUsed,this._bodyInit=v,v?typeof v=="string"?this._bodyText=v:a.blob&&Blob.prototype.isPrototypeOf(v)?this._bodyBlob=v:a.formData&&FormData.prototype.isPrototypeOf(v)?this._bodyFormData=v:a.searchParams&&URLSearchParams.prototype.isPrototypeOf(v)?this._bodyText=v.toString():a.arrayBuffer&&a.blob&&c(v)?(this._bodyArrayBuffer=N(v.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(v)||f(v))?this._bodyArrayBuffer=N(v):this._bodyText=v=Object.prototype.toString.call(v):this._bodyText="",this.headers.get("content-type")||(typeof v=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):a.searchParams&&URLSearchParams.prototype.isPrototypeOf(v)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a.blob&&(this.blob=function(){var v=A(this);if(v)return v;if(this._bodyBlob)return s.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return s.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return s.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var v=A(this);return v||(ArrayBuffer.isView(this._bodyArrayBuffer)?s.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):s.resolve(this._bodyArrayBuffer))}else return this.blob().then(O)}),this.text=function(){var v=A(this);if(v)return v;if(this._bodyBlob)return I(this._bodyBlob);if(this._bodyArrayBuffer)return s.resolve(_(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return s.resolve(this._bodyText)},a.formData&&(this.formData=function(){return this.text().then(Z)}),this.json=function(){return this.text().then(JSON.parse)},this}var P=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function k(v){var x=v.toUpperCase();return P.indexOf(x)>-1?x:v}function M(v,x){if(!(this instanceof M))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');x=x||{};var L=x.body;if(v instanceof M){if(v.bodyUsed)throw new TypeError("Already read");this.url=v.url,this.credentials=v.credentials,x.headers||(this.headers=new E(v.headers)),this.method=v.method,this.mode=v.mode,this.signal=v.signal,!L&&v._bodyInit!=null&&(L=v._bodyInit,v.bodyUsed=!0)}else this.url=String(v);if(this.credentials=x.credentials||this.credentials||"same-origin",(x.headers||!this.headers)&&(this.headers=new E(x.headers)),this.method=k(x.method||this.method||"GET"),this.mode=x.mode||this.mode||null,this.signal=x.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&L)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(L),(this.method==="GET"||this.method==="HEAD")&&(x.cache==="no-store"||x.cache==="no-cache")){var K=/([?&])_=[^&]*/;if(K.test(this.url))this.url=this.url.replace(K,"$1_="+new Date().getTime());else{var q=/\?/;this.url+=(q.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}M.prototype.clone=function(){return new M(this,{body:this._bodyInit})};function Z(v){var x=new FormData;return v.trim().split("&").forEach(function(L){if(L){var K=L.split("="),q=K.shift().replace(/\+/g," "),H=K.join("=").replace(/\+/g," ");x.append(decodeURIComponent(q),decodeURIComponent(H))}}),x}function ce(v){var x=new E,L=v.replace(/\r?\n[\t ]+/g," ");return L.split("\r").map(function(K){return K.indexOf(`
`)===0?K.substr(1,K.length):K}).forEach(function(K){var q=K.split(":"),H=q.shift().trim();if(H){var Ke=q.join(":").trim();x.append(H,Ke)}}),x}C.call(M.prototype);function J(v,x){if(!(this instanceof J))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');x||(x={}),this.type="default",this.status=x.status===void 0?200:x.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in x?x.statusText:"",this.headers=new E(x.headers),this.url=x.url||"",this._initBody(v)}C.call(J.prototype),J.prototype.clone=function(){return new J(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new E(this.headers),url:this.url})},J.error=function(){var v=new J(null,{status:0,statusText:""});return v.type="error",v};var ye=[301,302,303,307,308];J.redirect=function(v,x){if(ye.indexOf(x)===-1)throw new RangeError("Invalid status code");return new J(null,{status:x,headers:{location:v}})},u.DOMException=l.DOMException;try{new u.DOMException}catch{u.DOMException=function(x,L){this.message=x,this.name=L;var K=Error(x);this.stack=K.stack},u.DOMException.prototype=Object.create(Error.prototype),u.DOMException.prototype.constructor=u.DOMException}function we(v,x){return new s(function(L,K){var q=new M(v,x);if(q.signal&&q.signal.aborted)return K(new u.DOMException("Aborted","AbortError"));var H=new o;function Ke(){H.abort()}H.onload=function(){var re={status:H.status,statusText:H.statusText,headers:ce(H.getAllResponseHeaders()||"")};re.url="responseURL"in H?H.responseURL:re.headers.get("X-Request-URL");var Yt="response"in H?H.response:H.responseText;setTimeout(function(){L(new J(Yt,re))},0)},H.onerror=function(){setTimeout(function(){K(new TypeError("Network request failed"))},0)},H.ontimeout=function(){setTimeout(function(){K(new TypeError("Network request failed"))},0)},H.onabort=function(){setTimeout(function(){K(new u.DOMException("Aborted","AbortError"))},0)};function ue(re){try{return re===""&&l.location.href?l.location.href:re}catch{return re}}H.open(q.method,ue(q.url),!0),q.credentials==="include"?H.withCredentials=!0:q.credentials==="omit"&&(H.withCredentials=!1),"responseType"in H&&(a.blob?H.responseType="blob":a.arrayBuffer&&q.headers.get("Content-Type")&&q.headers.get("Content-Type").indexOf("application/octet-stream")!==-1&&(H.responseType="arraybuffer")),x&&typeof x.headers=="object"&&!(x.headers instanceof E)?Object.getOwnPropertyNames(x.headers).forEach(function(re){H.setRequestHeader(re,m(x.headers[re]))}):q.headers.forEach(function(re,Yt){H.setRequestHeader(Yt,re)}),q.signal&&(q.signal.addEventListener("abort",Ke),H.onreadystatechange=function(){H.readyState===4&&q.signal.removeEventListener("abort",Ke)}),H.send(typeof q._bodyInit=="undefined"?null:q._bodyInit)})}we.polyfill=!0,l.fetch||(l.fetch=we,l.Headers=E,l.Request=M,l.Response=J),u.Headers=E,u.Request=M,u.Response=J,u.fetch=we,Object.defineProperty(u,"__esModule",{value:!0})}),{fetch:d.fetch,Headers:d.Headers,Request:d.Request,Response:d.Response,DOMException:d.DOMException}}()}t.exports=n})(typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:lr)})(hr,hr.exports);var Ps=hr.exports;const fr=dr(Ps),He="nhostRefreshToken",It="nhostRefreshTokenId",Ye="nhostRefreshTokenExpiresAt",Ls=3,Us=60,xn=5,An=0,On=1,ve=10,_t=20;let Nt=class extends Error{constructor(e){super(e.message),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),e instanceof Error?(this.name=e.name,this.error={error:e.name,status:On,message:e.message}):(this.name=e.error,this.error=e)}};const be={status:ve,error:"invalid-email",message:"Email is incorrectly formatted"},Ms={status:ve,error:"invalid-mfa-type",message:"MFA type is invalid"},js={status:ve,error:"invalid-mfa-code",message:"MFA code is invalid"},pr={status:ve,error:"invalid-password",message:"Password is incorrectly formatted"},bn={status:ve,error:"invalid-phone-number",message:"Phone number is incorrectly formatted"},Fs={status:ve,error:"invalid-mfa-ticket",message:"MFA ticket is invalid"},Vs={status:ve,error:"no-mfa-ticket",message:"No MFA ticket has been provided"},Bs={status:ve,error:"no-refresh-token",message:"No refresh token has been provided"},Gs={status:_t,error:"refresher-already-running",message:"The token refresher is already running. You must wait until is has finished before submitting a new token."},me={status:_t,error:"already-signed-in",message:"User is already signed in"},qs={status:_t,error:"unauthenticated-user",message:"User is not authenticated"},Hs={status:_t,error:"unverified-user",message:"Email needs verification"},Ys={status:ve,error:"invalid-refresh-token",message:"Invalid or expired refresh token"},$s={status:On,error:"invalid-sign-in-method",message:"Invalid sign-in method"},vr={user:null,mfa:null,accessToken:{value:null,expiresAt:null,expiresInSeconds:15},refreshTimer:{startedAt:null,attempts:0,lastAttempt:null},refreshToken:{value:null},importTokenAttempts:0,errors:{}};function zs(t){return new TextEncoder().encode(t)}function Pe(t){const e=new Uint8Array(t);let r="";for(const n of e)r+=String.fromCharCode(n);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function mr(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),r=(4-e.length%4)%4,n=e.padEnd(e.length+r,"="),i=atob(n),s=new ArrayBuffer(i.length),o=new Uint8Array(s);for(let d=0;d<i.length;d++)o[d]=i.charCodeAt(d);return s}function kn(){return(window==null?void 0:window.PublicKeyCredential)!==void 0&&typeof window.PublicKeyCredential=="function"}function In(t){const{id:e}=t;return{...t,id:mr(e),transports:t.transports}}function _n(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}let ae=class extends Error{constructor(e,r="WebAuthnError"){super(e),this.name=r}};function Ks({error:t,options:e}){var r,n;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal===new AbortController().signal)return new ae("Registration ceremony was sent an abort signal","AbortError")}else if(t.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new ae("Discoverable credentials were required but no available authenticator supported it","ConstraintError");if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new ae("User verification was required but no available authenticator supported it","ConstraintError")}else{if(t.name==="InvalidStateError")return new ae("The authenticator was previously registered","InvalidStateError");if(t.name==="NotAllowedError")return new ae("User clicked cancel, or the registration ceremony timed out","NotAllowedError");if(t.name==="NotSupportedError")return i.pubKeyCredParams.filter(s=>s.type==="public-key").length===0?new ae('No entry in pubKeyCredParams was of type "public-key"',"NotSupportedError"):new ae("No available authenticator supported any of the specified pubKeyCredParams algorithms","NotSupportedError");if(t.name==="SecurityError"){const s=window.location.hostname;if(_n(s)){if(i.rp.id!==s)return new ae(`The RP ID "${i.rp.id}" is invalid for this domain`,"SecurityError")}else return new ae(`${window.location.hostname} is an invalid domain`,"SecurityError")}else if(t.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new ae("User ID was not between 1 and 64 characters","TypeError")}else if(t.name==="UnknownError")return new ae("The authenticator was unable to process the specified options, or could not create a new credential","UnknownError")}return t}class Js{createNewAbortSignal(){return this.controller&&this.controller.abort(),this.controller=new AbortController,this.controller.signal}reset(){this.controller=void 0}}const Dt=new Js;async function Nn(t){if(!kn())throw new Error("WebAuthn is not supported in this browser");const e={publicKey:{...t,challenge:mr(t.challenge),user:{...t.user,id:zs(t.user.id)},excludeCredentials:t.excludeCredentials.map(In)}};e.signal=Dt.createNewAbortSignal();let r;try{r=await navigator.credentials.create(e)}catch(u){throw Ks({error:u,options:e})}finally{Dt.reset()}if(!r)throw new Error("Registration was not completed");const{id:n,rawId:i,response:s,type:o}=r,d={id:n,rawId:Pe(i),response:{attestationObject:Pe(s.attestationObject),clientDataJSON:Pe(s.clientDataJSON)},type:o,clientExtensionResults:r.getClientExtensionResults(),authenticatorAttachment:r.authenticatorAttachment};return typeof s.getTransports=="function"&&(d.transports=s.getTransports()),d}function Ws(t){return new TextDecoder("utf-8").decode(t)}async function Qs(){if(navigator.credentials.conditionalMediationSupported)return!0;const t=window.PublicKeyCredential;return t.isConditionalMediationAvailable!==void 0&&t.isConditionalMediationAvailable()}function Xs({error:t,options:e}){var r;const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal===new AbortController().signal)return new ae("Authentication ceremony was sent an abort signal","AbortError")}else{if(t.name==="NotAllowedError")return!((r=n.allowCredentials)===null||r===void 0)&&r.length?new ae("No available authenticator recognized any of the allowed credentials","NotAllowedError"):new ae("User clicked cancel, or the authentication ceremony timed out","NotAllowedError");if(t.name==="SecurityError"){const i=window.location.hostname;if(_n(i)){if(n.rpId!==i)return new ae(`The RP ID "${n.rpId}" is invalid for this domain`,"SecurityError")}else return new ae(`${window.location.hostname} is an invalid domain`,"SecurityError")}else if(t.name==="UnknownError")return new ae("The authenticator was unable to process the specified options, or could not create a new assertion signature","UnknownError")}return t}async function Zs(t,e=!1){var r,n;if(!kn())throw new Error("WebAuthn is not supported in this browser");let i;((r=t.allowCredentials)===null||r===void 0?void 0:r.length)!==0&&(i=(n=t.allowCredentials)===null||n===void 0?void 0:n.map(In));const s={...t,challenge:mr(t.challenge),allowCredentials:i},o={};if(e){if(!await Qs())throw Error("Browser does not support WebAuthn autofill");if(document.querySelectorAll("input[autocomplete*='webauthn']").length<1)throw Error('No <input> with `"webauthn"` in its `autocomplete` attribute was detected');o.mediation="conditional",s.allowCredentials=[]}o.publicKey=s,o.signal=Dt.createNewAbortSignal();let d;try{d=await navigator.credentials.get(o)}catch(f){throw Xs({error:f,options:o})}finally{Dt.reset()}if(!d)throw new Error("Authentication was not completed");const{id:u,rawId:l,response:a,type:c}=d;let h;return a.userHandle&&(h=Ws(a.userHandle)),{id:u,rawId:Pe(l),response:{authenticatorData:Pe(a.authenticatorData),clientDataJSON:Pe(a.clientDataJSON),signature:Pe(a.signature),userHandle:h},type:c,clientExtensionResults:d.getClientExtensionResults(),authenticatorAttachment:d.authenticatorAttachment}}const Rt=typeof window!="undefined",Ct=new Map,eo=t=>{var e;return Rt&&typeof localStorage!="undefined"?localStorage.getItem(t):(e=Ct.get(t))!=null?e:null},to=(t,e)=>{Rt&&typeof localStorage!="undefined"?e?localStorage.setItem(t,e):localStorage.removeItem(t):e?Ct.set(t,e):Ct.has(t)&&Ct.delete(t)},ro=(t,e)=>{if(t==="localStorage"||t==="web")return eo;if(t==="cookie")return r=>{var n;return Rt&&(n=ur.get(r))!=null?n:null};if(!e)throw Error(`clientStorageType is set to '${t}' but no clientStorage has been given`);if(t==="react-native")return r=>{var n;return(n=e.getItem)==null?void 0:n.call(e,r)};if(t==="capacitor")return r=>{var n;return(n=e.get)==null?void 0:n.call(e,{key:r})};if(t==="expo-secure-storage")return r=>{var n;return(n=e.getItemAsync)==null?void 0:n.call(e,r)};if(t==="custom"){if(e.getItem&&e.removeItem)return e.getItem;if(e.getItemAsync)return e.getItemAsync;throw Error(`clientStorageType is set to 'custom' but clientStorage is missing either "getItem" and "removeItem" properties or "getItemAsync" property`)}throw Error(`Unknown storage type: ${t}`)},no=(t,e)=>{if(t==="localStorage"||t==="web")return to;if(t==="cookie")return(r,n)=>{Rt&&(n?ur.set(r,n,{expires:30,sameSite:"lax",httpOnly:!1}):ur.remove(r))};if(!e)throw Error(`clientStorageType is set to '${t}' but no clienStorage has been given`);if(t==="react-native")return(r,n)=>{var i,s;return n?(i=e.setItem)==null?void 0:i.call(e,r,n):(s=e.removeItem)==null?void 0:s.call(e,r)};if(t==="capacitor")return(r,n)=>{var i,s;return n?(i=e.set)==null?void 0:i.call(e,{key:r,value:n}):(s=e.remove)==null?void 0:s.call(e,{key:r})};if(t==="expo-secure-storage")return async(r,n)=>{var i,s;return n?(i=e.setItemAsync)==null?void 0:i.call(e,r,n):(s=e.deleteItemAsync)==null?void 0:s.call(e,r)};if(t==="custom"){if(!e.removeItem)throw Error("clientStorageType is set to 'custom' but clientStorage is missing a removeItem property");if(e.setItem)return(r,n)=>{var i,s;return n?(i=e.setItem)==null?void 0:i.call(e,r,n):(s=e.removeItem)==null?void 0:s.call(e,r)};if(e.setItemAsync)return async(r,n)=>{var i,s;return n?(i=e.setItemAsync)==null?void 0:i.call(e,r,n):(s=e.removeItem)==null?void 0:s.call(e,r)};throw Error("clientStorageType is set to 'custom' but clientStorage is missing setItem or setItemAsync property")}throw Error(`Unknown storage type: ${t}`)},Pt=t=>!t||!t.accessToken.value||!t.accessToken.expiresAt||!t.user?null:{accessToken:t.accessToken.value,accessTokenExpiresIn:(t.accessToken.expiresAt.getTime()-Date.now())/1e3,refreshToken:t.refreshToken.value,user:t.user},ke=({accessToken:t,refreshToken:e,isError:r,user:n,error:i})=>r?{session:null,error:i}:n&&t?{session:{accessToken:t,accessTokenExpiresIn:0,refreshToken:e,user:n},error:null}:{session:null,error:null},io=()=>typeof window!="undefined";let Dn=globalThis.fetch;typeof EdgeRuntime!="string"&&(Dn=fr().fetch);const Rn=async(t,e,{token:r,body:n}={})=>{const i={"Content-Type":"application/json",Accept:"*/*"};r&&(i.Authorization=`Bearer ${r}`);const s={method:e,headers:i};n&&(s.body=JSON.stringify(n));try{const o=await Dn(t,s);if(!o.ok){const d=await o.json();return Promise.reject({error:d})}try{return{data:await o.json(),error:null}}catch{return console.warn(`Unexpected response: can't parse the response of the server at ${t}`),{data:"OK",error:null}}}catch{const o={message:"Network Error",status:An,error:"network"};return Promise.reject({error:o})}},Te=async(t,e,r)=>Rn(t,"POST",{token:r,body:e}),so=(t,e)=>Rn(t,"GET",{token:e}),yr=(t,e)=>{const r=e&&Object.entries(e).map(([n,i])=>{const s=Array.isArray(i)?i.join(","):typeof i=="object"?JSON.stringify(i):i;return`${n}=${encodeURIComponent(s)}`}).join("&");return r?`${t}?${r}`:t},he=(t,e)=>{if(!(e!=null&&e.redirectTo))return e;const{redirectTo:r,...n}=e;if(!t)return r.startsWith("/")?n:e;const i=new URL(t),s=Object.fromEntries(new URLSearchParams(i.search)),o=new URL(r.startsWith("/")?i.origin+r:r),d=new URLSearchParams(o.search);let u=Object.fromEntries(d);r.startsWith("/")&&(u={...s,...u});let l=i.pathname;return o.pathname.length>1&&(l+=o.pathname.slice(1)),{...n,redirectTo:yr(o.origin+l,u)}};function Lt(t,e){var r;if(!e){if(typeof window=="undefined")return;e=((r=window.location)==null?void 0:r.href)||""}t=t.replace(/[\[\]]/g,"\\$&");const n=new RegExp("[?&#]"+t+"(=([^&#]*)|&|#|$)"),i=n.exec(e);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null}function Cn(t){var e;if(typeof window=="undefined")return;const r=window==null?void 0:window.location;if(r&&r){const n=new URLSearchParams(r.search),i=new URLSearchParams((e=r.hash)==null?void 0:e.slice(1));n.delete(t),i.delete(t);let s=window.location.pathname;Array.from(n).length&&(s+=`?${n.toString()}`),Array.from(i).length&&(s+=`#${i.toString()}`),window.history.pushState({},"",s)}}const Ie=t=>!!t&&typeof t=="string"&&!!String(t).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/),gr=t=>!!t&&typeof t=="string"&&t.length>=Ls,Pn=t=>!!t&&typeof t=="string",oo=t=>t&&typeof t=="string"&&t.match(/^mfaTotp:[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i),ao=({backendUrl:t,clientUrl:e,clientStorageType:r="web",clientStorage:n,refreshIntervalTime:i,autoRefreshToken:s=!0,autoSignIn:o=!0})=>{const d=ro(r,n),u=no(r,n),l=async(a,c,h)=>(await Te(`${t}${a}`,c,h)).data;return Oe({schema:{context:{},events:{},services:{}},tsTypes:{},context:vr,predictableActionArguments:!0,id:"nhost",type:"parallel",states:{authentication:{initial:"starting",on:{SESSION_UPDATE:[{cond:"hasSession",actions:["saveSession","resetTimer","reportTokenChanged"],target:".signedIn"}]},states:{starting:{tags:["loading"],always:{cond:"isSignedIn",target:"signedIn"},invoke:{id:"importRefreshToken",src:"importRefreshToken",onDone:[{cond:"hasSession",actions:["saveSession","reportTokenChanged"],target:"signedIn"},{target:"signedOut"}],onError:[{cond:"shouldRetryImportToken",actions:"incrementTokenImportAttempts",target:"retryTokenImport"},{actions:["saveAuthenticationError"],target:"signedOut"}]}},retryTokenImport:{tags:["loading"],after:{RETRY_IMPORT_TOKEN_DELAY:"starting"}},signedOut:{initial:"noErrors",entry:"reportSignedOut",states:{noErrors:{},success:{},needsSmsOtp:{},needsMfa:{},failed:{},signingOut:{entry:["clearContextExceptRefreshToken"],exit:["destroyRefreshToken","reportTokenChanged"],invoke:{src:"signout",id:"signingOut",onDone:{target:"success"},onError:{target:"failed",actions:["saveAuthenticationError"]}}}},on:{SIGNIN_PASSWORD:"authenticating.password",SIGNIN_ANONYMOUS:"authenticating.anonymous",SIGNIN_SECURITY_KEY_EMAIL:"authenticating.securityKeyEmail",SIGNIN_MFA_TOTP:"authenticating.mfa.totp",SIGNIN_PAT:"authenticating.pat"}},authenticating:{entry:"resetErrors",states:{password:{invoke:{src:"signInPassword",id:"authenticateUserWithPassword",onDone:[{cond:"hasMfaTicket",actions:["saveMfaTicket"],target:"#nhost.authentication.signedOut.needsMfa"},{actions:["saveSession","reportTokenChanged"],target:"#nhost.authentication.signedIn"}],onError:[{cond:"unverified",target:["#nhost.authentication.signedOut","#nhost.registration.incomplete.needsEmailVerification"]},{actions:"saveAuthenticationError",target:"#nhost.authentication.signedOut.failed"}]}},pat:{invoke:{src:"signInPAT",id:"authenticateWithPAT",onDone:{actions:["savePATSession","reportTokenChanged"],target:"#nhost.authentication.signedIn"},onError:{actions:"saveAuthenticationError",target:"#nhost.authentication.signedOut.failed"}}},anonymous:{invoke:{src:"signInAnonymous",id:"authenticateAnonymously",onDone:{actions:["saveSession","reportTokenChanged"],target:"#nhost.authentication.signedIn"},onError:{actions:"saveAuthenticationError",target:"#nhost.authentication.signedOut.failed"}}},mfa:{states:{totp:{invoke:{src:"signInMfaTotp",id:"signInMfaTotp",onDone:{actions:["saveSession","reportTokenChanged"],target:"#nhost.authentication.signedIn"},onError:{actions:["saveAuthenticationError"],target:"#nhost.authentication.signedOut.failed"}}}}},securityKeyEmail:{invoke:{src:"signInSecurityKeyEmail",id:"authenticateUserWithSecurityKey",onDone:{actions:["saveSession","reportTokenChanged"],target:"#nhost.authentication.signedIn"},onError:[{cond:"unverified",target:["#nhost.authentication.signedOut","#nhost.registration.incomplete.needsEmailVerification"]},{actions:"saveAuthenticationError",target:"#nhost.authentication.signedOut.failed"}]}}}},signedIn:{type:"parallel",entry:["reportSignedIn","cleanUrl","broadcastToken","resetErrors"],on:{SIGNOUT:"signedOut.signingOut"},states:{refreshTimer:{id:"timer",initial:"idle",states:{disabled:{type:"final"},stopped:{always:{cond:"noToken",target:"idle"}},idle:{always:[{cond:"isAutoRefreshDisabled",target:"disabled"},{cond:"isRefreshTokenPAT",target:"disabled"},{cond:"hasRefreshToken",target:"running"}]},running:{initial:"pending",entry:"resetTimer",states:{pending:{after:{1e3:{internal:!1,target:"pending"}},always:{cond:"refreshTimerShouldRefresh",target:"refreshing"}},refreshing:{invoke:{src:"refreshToken",id:"refreshToken",onDone:{actions:["saveSession","resetTimer","reportTokenChanged"],target:"pending"},onError:[{actions:"saveRefreshAttempt",target:"pending"}]}}}}}}}}}},token:{initial:"idle",states:{idle:{on:{TRY_TOKEN:"running"},initial:"noErrors",states:{noErrors:{},error:{}}},running:{invoke:{src:"refreshToken",id:"authenticateWithToken",onDone:{actions:["saveSession","reportTokenChanged"],target:["#nhost.authentication.signedIn","idle.noErrors"]},onError:[{cond:"isSignedIn",target:"idle.error"},{actions:"saveAuthenticationError",target:["#nhost.authentication.signedOut.failed","idle.error"]}]}}}},registration:{initial:"incomplete",on:{SIGNED_IN:[{cond:"isAnonymous",target:".incomplete"},".complete"]},states:{incomplete:{on:{SIGNUP_EMAIL_PASSWORD:"emailPassword",SIGNUP_SECURITY_KEY:"securityKey",PASSWORDLESS_EMAIL:"passwordlessEmail",PASSWORDLESS_SMS:"passwordlessSms",PASSWORDLESS_SMS_OTP:"passwordlessSmsOtp"},initial:"noErrors",states:{noErrors:{},needsEmailVerification:{},needsOtp:{},failed:{}}},emailPassword:{entry:["resetErrors"],invoke:{src:"signUpEmailPassword",id:"signUpEmailPassword",onDone:[{cond:"hasSession",actions:["saveSession","reportTokenChanged"],target:"#nhost.authentication.signedIn"},{actions:"clearContext",target:["#nhost.authentication.signedOut","incomplete.needsEmailVerification"]}],onError:[{cond:"unverified",target:"incomplete.needsEmailVerification"},{actions:"saveRegistrationError",target:"incomplete.failed"}]}},securityKey:{entry:["resetErrors"],invoke:{src:"signUpSecurityKey",id:"signUpSecurityKey",onDone:[{cond:"hasSession",actions:["saveSession","reportTokenChanged"],target:"#nhost.authentication.signedIn"},{actions:"clearContext",target:["#nhost.authentication.signedOut","incomplete.needsEmailVerification"]}],onError:[{cond:"unverified",target:"incomplete.needsEmailVerification"},{actions:"saveRegistrationError",target:"incomplete.failed"}]}},passwordlessEmail:{entry:["resetErrors"],invoke:{src:"passwordlessEmail",id:"passwordlessEmail",onDone:{actions:"clearContext",target:["#nhost.authentication.signedOut","incomplete.needsEmailVerification"]},onError:{actions:"saveRegistrationError",target:"incomplete.failed"}}},passwordlessSms:{entry:["resetErrors"],invoke:{src:"passwordlessSms",id:"passwordlessSms",onDone:{actions:"clearContext",target:["#nhost.authentication.signedOut","incomplete.needsOtp"]},onError:{actions:"saveRegistrationError",target:"incomplete.failed"}}},passwordlessSmsOtp:{entry:["resetErrors"],invoke:{src:"passwordlessSmsOtp",id:"passwordlessSmsOtp",onDone:{actions:["saveSession","reportTokenChanged"],target:"#nhost.authentication.signedIn"},onError:{actions:"saveRegistrationError",target:"incomplete.failed"}}},complete:{on:{SIGNED_OUT:"incomplete"}}}}}},{actions:{reportSignedIn:ie("SIGNED_IN"),reportSignedOut:ie("SIGNED_OUT"),reportTokenChanged:ie("TOKEN_CHANGED"),incrementTokenImportAttempts:j({importTokenAttempts:({importTokenAttempts:a})=>a+1}),clearContext:j(()=>(u(Ye,null),u(He,null),u(It,null),{...vr})),clearContextExceptRefreshToken:j(({refreshToken:{value:a}})=>(u(Ye,null),{...vr,refreshToken:{value:a}})),saveSession:j({user:(a,{data:c})=>{var h;return((h=c==null?void 0:c.session)==null?void 0:h.user)||null},accessToken:(a,{data:c})=>{if(c.session){const{accessTokenExpiresIn:h,accessToken:f}=c.session,p=new Date(Date.now()+h*1e3);return u(Ye,p.toISOString()),{value:f,expiresAt:p,expiresInSeconds:h}}return u(Ye,null),{value:null,expiresAt:null,expiresInSeconds:null}},refreshToken:(a,{data:c})=>{var h,f;const p=((h=c.session)==null?void 0:h.refreshToken)||null,m=((f=c.session)==null?void 0:f.refreshTokenId)||null;return p&&u(He,p),m&&u(It,m),{value:p}}}),savePATSession:j({user:(a,{data:c})=>{var h;return((h=c==null?void 0:c.session)==null?void 0:h.user)||null},accessToken:(a,{data:c})=>{if(c.session){const{accessTokenExpiresIn:h,accessToken:f}=c.session,p=new Date(Date.now()+h*1e3);return u(Ye,p.toISOString()),{value:f,expiresAt:p,expiresInSeconds:h}}return u(Ye,null),{value:null,expiresAt:null,expiresInSeconds:null}},refreshToken:(a,{data:c})=>{var h,f;const p=((h=c.session)==null?void 0:h.refreshToken)||null,m=((f=c.session)==null?void 0:f.refreshTokenId)||null;return p&&u(He,p),m&&u(It,m),{value:p,isPAT:!0}}}),saveMfaTicket:j({mfa:(a,c)=>{var h;return(h=c.data)==null?void 0:h.mfa}}),resetTimer:j({refreshTimer:a=>({startedAt:new Date,attempts:0,lastAttempt:null})}),saveRefreshAttempt:j({refreshTimer:(a,c)=>({startedAt:a.refreshTimer.startedAt,attempts:a.refreshTimer.attempts+1,lastAttempt:new Date})}),saveAuthenticationError:j({errors:({errors:a},{data:{error:c}})=>({...a,authentication:c})}),resetErrors:j({errors:a=>({}),importTokenAttempts:a=>0}),saveRegistrationError:j({errors:({errors:a},{data:{error:c}})=>({...a,registration:c})}),destroyRefreshToken:j({refreshToken:a=>(u(He,null),u(It,null),{value:null})}),cleanUrl:()=>{o&&Lt("refreshToken")&&(Cn("refreshToken"),Cn("type"))},broadcastToken:a=>{if(o)try{new BroadcastChannel("nhost").postMessage(a.refreshToken.value)}catch{}}},guards:{isAnonymous:(a,c)=>{var h;return!!((h=a.user)!=null&&h.isAnonymous)},isSignedIn:a=>!!a.user&&!!a.accessToken.value,noToken:a=>!a.refreshToken.value,isRefreshTokenPAT:a=>{var c;return!!((c=a.refreshToken)!=null&&c.isPAT)},hasRefreshToken:a=>!!a.refreshToken.value,isAutoRefreshDisabled:()=>!s,refreshTimerShouldRefresh:a=>{const{expiresAt:c}=a.accessToken;if(!c)return!1;if(a.refreshTimer.lastAttempt)return a.refreshTimer.attempts>xn?!1:Date.now()-a.refreshTimer.lastAttempt.getTime()>Math.pow(2,a.refreshTimer.attempts-1)*5e3;if(i&&Date.now()-a.refreshTimer.startedAt.getTime()>i*1e3)return!0;const h=a.accessToken.expiresInSeconds;return h?c.getTime()-Date.now()-1e3*Math.min(Us,h*.5)<=0:!1},shouldRetryImportToken:(a,c)=>a.importTokenAttempts<xn&&(c.data.error.status===An||c.data.error.status>=500),unverified:(a,{data:{error:c}})=>c.status===401&&(c.message==="Email is not verified"||c.error==="unverified-user"),hasSession:(a,c)=>{var h;return!!((h=c.data)!=null&&h.session)},hasMfaTicket:(a,c)=>{var h;return!!((h=c.data)!=null&&h.mfa)}},services:{signInPassword:(a,{email:c,password:h})=>Ie(c)?gr(h)?l("/signin/email-password",{email:c,password:h}):Promise.reject({error:pr}):Promise.reject({error:be}),signInPAT:(a,{pat:c})=>l("/signin/pat",{personalAccessToken:c}),passwordlessSms:(a,{phoneNumber:c,options:h})=>{var f;return Pn(c)?(f=a.user)!=null&&f.isAnonymous?(console.warn("Deanonymisation from a phone number is not yet implemented in hasura-auth"),l("/user/deanonymize",{signInMethod:"passwordless",connection:"sms",phoneNumber:c,options:he(e,h)},a.accessToken.value)):l("/signin/passwordless/sms",{phoneNumber:c,options:he(e,h)}):Promise.reject({error:bn})},passwordlessSmsOtp:(a,{phoneNumber:c,otp:h})=>Pn(c)?l("/signin/passwordless/sms/otp",{phoneNumber:c,otp:h}):Promise.reject({error:bn}),passwordlessEmail:(a,{email:c,options:h})=>{var f;return Ie(c)?(f=a.user)!=null&&f.isAnonymous?l("/user/deanonymize",{signInMethod:"passwordless",connection:"email",email:c,options:he(e,h)},a.accessToken.value):l("/signin/passwordless/email",{email:c,options:he(e,h)}):Promise.reject({error:be})},signInAnonymous:a=>l("/signin/anonymous"),signInMfaTotp:(a,c)=>{var h;const f=c.ticket||((h=a.mfa)==null?void 0:h.ticket);return f?oo(f)?l("/signin/mfa/totp",{ticket:f,otp:c.otp}):Promise.reject({error:Fs}):Promise.reject({error:Vs})},signInSecurityKeyEmail:async(a,{email:c})=>{if(!Ie(c))throw new Nt(be);const h=await l("/signin/webauthn",{email:c});let f;try{f=await Zs(h)}catch(p){throw new Nt(p)}return l("/signin/webauthn/verify",{email:c,credential:f})},refreshToken:async(a,c)=>{const h=c.type==="TRY_TOKEN"?c.token:a.refreshToken.value;return{session:await l("/token",{refreshToken:h}),error:null}},signout:(a,c)=>l("/signout",{refreshToken:a.refreshToken.value,all:!!c.all}),signUpEmailPassword:async(a,{email:c,password:h,options:f})=>{var p;return Ie(c)?gr(h)?(p=a.user)!=null&&p.isAnonymous?l("/user/deanonymize",{signInMethod:"email-password",email:c,password:h,options:he(e,f)},a.accessToken.value):l("/signup/email-password",{email:c,password:h,options:he(e,f)}):Promise.reject({error:pr}):Promise.reject({error:be})},signUpSecurityKey:async(a,{email:c,options:h})=>{if(!Ie(c))return Promise.reject({error:be});const f=h==null?void 0:h.nickname;f&&delete h.nickname;const p=await l("/signup/webauthn",{email:c,options:h});let m;try{m=await Nn(p)}catch(w){throw new Nt(w)}return l("/signup/webauthn/verify",{credential:m,options:{redirectTo:h==null?void 0:h.redirectTo,nickname:f}})},importRefreshToken:async a=>{if(a.user&&a.refreshToken.value&&a.accessToken.value&&a.accessToken.expiresAt)return{session:{accessToken:a.accessToken.value,accessTokenExpiresIn:a.accessToken.expiresAt.getTime()-Date.now(),refreshToken:a.refreshToken.value,user:a.user},error:null};let c=null;if(o){const f=Lt("refreshToken")||null;if(f)try{return{session:await l("/token",{refreshToken:f}),error:null}}catch(p){c=p.error}else{const p=Lt("error");if(p)return Promise.reject({session:null,error:{status:ve,error:p,message:Lt("errorDescription")||p}})}}const h=await d(He);if(h)try{return{session:await l("/token",{refreshToken:h}),error:null}}catch(f){c=f.error}return c?Promise.reject({error:c,session:null}):{error:null,session:null}}},delays:{RETRY_IMPORT_TOKEN_DELAY:({importTokenAttempts:a})=>Math.pow(2,a-1)*5e3}})},Ln=({backendUrl:t,clientUrl:e,interpreter:r})=>Oe({schema:{context:{},events:{},services:{}},tsTypes:{},predictableActionArguments:!0,id:"changeEmail",initial:"idle",context:{error:null},states:{idle:{on:{REQUEST:[{cond:"invalidEmail",actions:"saveInvalidEmailError",target:".error"},{target:"requesting"}]},initial:"initial",states:{initial:{},success:{},error:{}}},requesting:{invoke:{src:"requestChange",id:"requestChange",onDone:{target:"idle.success",actions:"reportSuccess"},onError:{actions:["saveRequestError","reportError"],target:"idle.error"}}}}},{actions:{saveInvalidEmailError:j({error:n=>be}),saveRequestError:j({error:(n,{data:{error:i}})=>i}),reportError:ie(n=>({type:"ERROR",error:n.error})),reportSuccess:ie("SUCCESS")},guards:{invalidEmail:(n,{email:i})=>!Ie(i)},services:{requestChange:async(n,{email:i,options:s})=>(await Te(`${t}/user/email/change`,{newEmail:i,options:he(e,s)},r==null?void 0:r.getSnapshot().context.accessToken.value)).data}}),Un=({backendUrl:t,interpreter:e})=>Oe({schema:{context:{},events:{},services:{}},tsTypes:{},predictableActionArguments:!0,id:"changePassword",initial:"idle",context:{error:null},states:{idle:{on:{REQUEST:[{cond:"invalidPassword",actions:"saveInvalidPasswordError",target:".error"},{target:"requesting"}]},initial:"initial",states:{initial:{},success:{},error:{}}},requesting:{invoke:{src:"requestChange",id:"requestChange",onDone:{target:"idle.success",actions:"reportSuccess"},onError:{actions:["saveRequestError","reportError"],target:"idle.error"}}}}},{actions:{saveInvalidPasswordError:j({error:r=>pr}),saveRequestError:j({error:(r,{data:{error:n}})=>n}),reportError:ie(r=>({type:"ERROR",error:r.error})),reportSuccess:ie("SUCCESS")},guards:{invalidPassword:(r,{password:n})=>!gr(n)},services:{requestChange:(r,{password:n,ticket:i})=>Te(`${t}/user/password`,{newPassword:n,ticket:i},e==null?void 0:e.getSnapshot().context.accessToken.value)}}),co=({backendUrl:t,interpreter:e})=>Oe({schema:{context:{},events:{}},tsTypes:{},predictableActionArguments:!0,id:"enableMfa",initial:"idle",context:{error:null,imageUrl:null,secret:null},states:{idle:{initial:"initial",on:{GENERATE:"generating"},states:{initial:{},error:{}}},generating:{invoke:{src:"generate",id:"generate",onDone:{target:"generated",actions:["reportGeneratedSuccess","saveGeneration"]},onError:{actions:["saveError","reportGeneratedError"],target:"idle.error"}}},generated:{initial:"idle",states:{idle:{initial:"idle",on:{ACTIVATE:[{cond:"invalidMfaType",actions:"saveInvalidMfaTypeError",target:".error"},{cond:"invalidMfaCode",actions:"saveInvalidMfaCodeError",target:".error"},{target:"activating"}]},states:{idle:{},error:{}}},activating:{invoke:{src:"activate",id:"activate",onDone:{target:"activated",actions:"reportSuccess"},onError:{actions:["saveError","reportError"],target:"idle.error"}}},activated:{type:"final"}}}}},{actions:{saveInvalidMfaTypeError:j({error:r=>Ms}),saveInvalidMfaCodeError:j({error:r=>js}),saveError:j({error:(r,{data:{error:n}})=>n}),saveGeneration:j({imageUrl:(r,{data:{imageUrl:n}})=>n,secret:(r,{data:{totpSecret:n}})=>n}),reportError:ie((r,n)=>(console.log("REPORT",r,n),{type:"ERROR",error:r.error})),reportSuccess:ie("SUCCESS"),reportGeneratedSuccess:ie("GENERATED"),reportGeneratedError:ie(r=>({type:"GENERATED_ERROR",error:r.error}))},guards:{invalidMfaCode:(r,{code:n})=>!n,invalidMfaType:(r,{activeMfaType:n})=>!n||n!=="totp"},services:{generate:async r=>{const{data:n}=await so(`${t}/mfa/totp/generate`,e==null?void 0:e.getSnapshot().context.accessToken.value);return n},activate:(r,{code:n,activeMfaType:i})=>Te(`${t}/user/mfa`,{code:n,activeMfaType:i},e==null?void 0:e.getSnapshot().context.accessToken.value)}}),Mn=({backendUrl:t,clientUrl:e})=>Oe({schema:{context:{},events:{},services:{}},tsTypes:{},predictableActionArguments:!0,id:"changePassword",initial:"idle",context:{error:null},states:{idle:{on:{REQUEST:[{cond:"invalidEmail",actions:"saveInvalidEmailError",target:".error"},{target:"requesting"}]},initial:"initial",states:{initial:{},success:{},error:{}}},requesting:{invoke:{src:"requestChange",id:"requestChange",onDone:{target:"idle.success",actions:"reportSuccess"},onError:{actions:["saveRequestError","reportError"],target:"idle.error"}}}}},{actions:{saveInvalidEmailError:j({error:r=>be}),saveRequestError:j({error:(r,{data:{error:n}})=>n}),reportError:ie(r=>({type:"ERROR",error:r.error})),reportSuccess:ie("SUCCESS")},guards:{invalidEmail:(r,{email:n})=>!Ie(n)},services:{requestChange:(r,{email:n,options:i})=>Te(`${t}/user/password/reset`,{email:n,options:he(e,i)})}}),jn=({backendUrl:t,clientUrl:e})=>Oe({schema:{context:{},events:{},services:{}},tsTypes:{},predictableActionArguments:!0,id:"sendVerificationEmail",initial:"idle",context:{error:null},states:{idle:{on:{REQUEST:[{cond:"invalidEmail",actions:"saveInvalidEmailError",target:".error"},{target:"requesting"}]},initial:"initial",states:{initial:{},success:{},error:{}}},requesting:{invoke:{src:"request",id:"request",onDone:{target:"idle.success",actions:"reportSuccess"},onError:{actions:["saveRequestError","reportError"],target:"idle.error"}}}}},{actions:{saveInvalidEmailError:j({error:r=>be}),saveRequestError:j({error:(r,{data:{error:n}})=>n}),reportError:ie(r=>({type:"ERROR",error:r.error})),reportSuccess:ie("SUCCESS")},guards:{invalidEmail:(r,{email:n})=>!Ie(n)},services:{request:async(r,{email:n,options:i})=>(await Te(`${t}/user/email/send-verification-email`,{email:n,options:he(e,i)})).data}});class uo{constructor({clientStorageType:e="web",autoSignIn:r=!0,autoRefreshToken:n=!0,start:i=!0,backendUrl:s,clientUrl:o,devTools:d,...u}){if(this._started=!1,this._subscriptionsQueue=new Set,this._subscriptions=new Set,this.backendUrl=s,this.clientUrl=o,this._machine=ao({...u,backendUrl:s,clientUrl:o,clientStorageType:e,autoSignIn:r,autoRefreshToken:n}),i&&this.start({devTools:d}),typeof window!="undefined"&&r)try{this._channel=new BroadcastChannel("nhost"),this._channel.addEventListener("message",l=>{var a;const c=(a=this.interpreter)==null?void 0:a.getSnapshot().context.refreshToken.value;this.interpreter&&l.data!==c&&this.interpreter.send("TRY_TOKEN",{token:l.data})})}catch{}}start({devTools:e=!1,initialSession:r,interpreter:n}={}){var i,s;const o={...this.machine.context};r&&(o.user=r.user,o.refreshToken.value=(i=r.refreshToken)!=null?i:null,o.accessToken.value=(s=r.accessToken)!=null?s:null,o.accessToken.expiresAt=new Date(Date.now()+r.accessTokenExpiresIn*1e3));const d=this.machine.withContext(o);this._interpreter||(this._interpreter=n||Ce(d,{devTools:e})),(!this._started||typeof window=="undefined")&&(this._interpreter.initialized&&(this._interpreter.stop(),this._subscriptions.forEach(u=>u())),this._interpreter.start(d.initialState),this._subscriptionsQueue.forEach(u=>u(this))),this._started=!0}get machine(){return this._machine}get interpreter(){return this._interpreter}get started(){return this._started}subscribe(e){if(this.started){const r=e(this);return this._subscriptions.add(r),r}else return this._subscriptionsQueue.add(e),()=>{console.log("onTokenChanged was added before the interpreter started. Cannot unsubscribe listener.")}}}const Fn=async({backendUrl:t,interpreter:e},r)=>{try{const{data:n}=await Te(`${t}/user/webauthn/add`,{},e==null?void 0:e.getSnapshot().context.accessToken.value);let i;try{i=await Nn(n)}catch(o){throw new Nt(o)}const{data:s}=await Te(`${t}/user/webauthn/verify`,{credential:i,nickname:r},e==null?void 0:e.getSnapshot().context.accessToken.value);return{key:s,isError:!1,error:null,isSuccess:!0}}catch(n){const{error:i}=n;return{isError:!0,error:i,isSuccess:!1}}},Vn=async(t,e,r)=>new Promise(n=>{t.send("REQUEST",{email:e,options:r}),t.onTransition(i=>{i.matches({idle:"error"})?n({error:i.context.error,isError:!0,needsEmailVerification:!1}):i.matches({idle:"success"})&&n({error:null,isError:!1,needsEmailVerification:!0})})}),Bn=async(t,e,r)=>new Promise(n=>{t.send("REQUEST",{password:e,ticket:r}),t.onTransition(i=>{i.matches({idle:"error"})?n({error:i.context.error,isError:!0,isSuccess:!1}):i.matches({idle:"success"})&&n({error:null,isError:!1,isSuccess:!0})})}),lo=t=>new Promise(e=>{t.send("GENERATE"),t.onTransition(r=>{r.matches("generated")?e({error:null,isError:!1,isGenerated:!0,qrCodeDataUrl:r.context.imageUrl||""}):r.matches({idle:"error"})&&e({error:r.context.error||null,isError:!0,isGenerated:!1,qrCodeDataUrl:""})})}),ho=(t,e)=>new Promise(r=>{t.send("ACTIVATE",{activeMfaType:"totp",code:e}),t.onTransition(n=>{n.matches({generated:"activated"})?r({error:null,isActivated:!0,isError:!1}):n.matches({generated:{idle:"error"}})&&r({error:n.context.error,isActivated:!1,isError:!0})})}),Gn=async(t,e,r)=>new Promise(n=>{t.send("REQUEST",{email:e,options:r}),t.onTransition(i=>{i.matches({idle:"error"})?n({error:i.context.error,isError:!0,isSent:!1}):i.matches({idle:"success"})&&n({error:null,isError:!1,isSent:!0})})}),qn=(t,e,r)=>new Promise(n=>{t.send("REQUEST",{email:e,options:r}),t.onTransition(i=>{i.matches({idle:"error"})?n({error:i.context.error,isError:!0,isSent:!1}):i.matches({idle:"success"})&&n({error:null,isError:!1,isSent:!0})})}),Hn=t=>new Promise(e=>{const{changed:r}=t.send("SIGNIN_ANONYMOUS");r||e({isSuccess:!1,isError:!0,error:me,user:null,accessToken:null,refreshToken:null}),t.onTransition(n=>{n.matches({authentication:"signedIn"})&&e({isSuccess:!0,isError:!1,error:null,user:n.context.user,accessToken:n.context.accessToken.value,refreshToken:n.context.refreshToken.value}),n.matches({authentication:{signedOut:"failed"}})&&e({isSuccess:!1,isError:!0,error:n.context.errors.authentication||null,user:null,accessToken:null,refreshToken:null})})}),Yn=(t,e,r)=>new Promise(n=>{const{changed:i,context:s}=t.send("SIGNIN_PASSWORD",{email:e,password:r});if(!i)return n({accessToken:s.accessToken.value,refreshToken:s.refreshToken.value,error:me,isError:!0,isSuccess:!1,needsEmailVerification:!1,needsMfaOtp:!1,mfa:null,user:s.user});t.onTransition(o=>{o.matches({authentication:{signedOut:"noErrors"},registration:{incomplete:"needsEmailVerification"}})?n({accessToken:null,refreshToken:null,error:null,isError:!1,isSuccess:!1,needsEmailVerification:!0,needsMfaOtp:!1,mfa:null,user:null}):o.matches({authentication:{signedOut:"needsMfa"}})?n({accessToken:null,refreshToken:null,error:null,isError:!1,isSuccess:!1,needsEmailVerification:!1,needsMfaOtp:!0,mfa:o.context.mfa,user:null}):o.matches({authentication:{signedOut:"failed"}})?n({accessToken:null,refreshToken:null,error:o.context.errors.authentication||null,isError:!0,isSuccess:!1,needsEmailVerification:!1,needsMfaOtp:!1,mfa:null,user:null}):o.matches({authentication:"signedIn"})&&n({accessToken:o.context.accessToken.value,refreshToken:o.context.refreshToken.value,error:null,isError:!1,isSuccess:!0,needsEmailVerification:!1,needsMfaOtp:!1,mfa:null,user:o.context.user})})}),Er=(t,e,r)=>new Promise(n=>{const{changed:i}=t.send("PASSWORDLESS_EMAIL",{email:e,options:r});if(!i)return n({error:me,isError:!0,isSuccess:!1});t.onTransition(s=>{s.matches("registration.incomplete.failed")?n({error:s.context.errors.registration||null,isError:!0,isSuccess:!1}):s.matches({authentication:{signedOut:"noErrors"},registration:{incomplete:"needsEmailVerification"}})&&n({error:null,isError:!1,isSuccess:!0})})}),$n=(t,e)=>new Promise(r=>{const{changed:n,context:i}=t.send({type:"SIGNIN_SECURITY_KEY_EMAIL",email:e});if(!n)return r({accessToken:i.accessToken.value,refreshToken:i.refreshToken.value,error:me,isError:!0,isSuccess:!1,needsEmailVerification:!1,user:i.user});t.onTransition(s=>{s.matches({authentication:{signedOut:"noErrors"},registration:{incomplete:"needsEmailVerification"}})?r({accessToken:null,refreshToken:null,error:null,isError:!1,isSuccess:!1,needsEmailVerification:!0,user:null}):s.matches({authentication:{signedOut:"failed"}})?r({accessToken:null,refreshToken:null,error:s.context.errors.authentication||null,isError:!0,isSuccess:!1,needsEmailVerification:!1,user:null}):s.matches({authentication:"signedIn"})&&r({accessToken:s.context.accessToken.value,refreshToken:s.context.refreshToken.value,error:null,isError:!1,isSuccess:!0,needsEmailVerification:!1,user:s.context.user})})}),zn=(t,e,r)=>new Promise(n=>{const{changed:i,context:s}=t.send("SIGNIN_MFA_TOTP",{otp:e,ticket:r});if(!i)return n({accessToken:s.accessToken.value,refreshToken:s.refreshToken.value,error:me,isError:!0,isSuccess:!1,user:s.user});t.onTransition(o=>{o.matches({authentication:{signedOut:"failed"}})?n({accessToken:null,refreshToken:null,error:o.context.errors.authentication||null,isError:!0,isSuccess:!1,user:null}):o.matches({authentication:"signedIn"})&&n({accessToken:o.context.accessToken.value,refreshToken:o.context.refreshToken.value,error:null,isError:!1,isSuccess:!0,user:o.context.user})})}),Kn=(t,e)=>new Promise(r=>{const{changed:n}=t.send("SIGNIN_PAT",{pat:e});n||r({isSuccess:!1,isError:!0,error:me,user:null,accessToken:null,refreshToken:null}),t.onTransition(i=>{if(i.matches({authentication:{signedOut:"failed"}}))return r({accessToken:null,refreshToken:null,user:null,error:i.context.errors.authentication||null,isError:!0,isSuccess:!1});if(i.matches({authentication:"signedIn"}))return r({accessToken:i.context.accessToken.value,refreshToken:i.context.refreshToken.value,user:i.context.user,error:null,isError:!1,isSuccess:!0})})}),Tr=(t,e,r)=>new Promise(n=>{const{changed:i}=t.send("PASSWORDLESS_SMS",{phoneNumber:e,options:r});if(!i)return n({error:me,isError:!0,isSuccess:!1,needsOtp:!1});t.onTransition(s=>{s.matches("registration.incomplete.needsOtp")?n({error:null,isError:!1,isSuccess:!1,needsOtp:!0}):s.matches("registration.incomplete.failed")&&n({error:s.context.errors.authentication||null,isError:!0,isSuccess:!1,needsOtp:!1})})}),Sr=(t,e,r)=>new Promise(n=>{const{changed:i}=t.send({type:"PASSWORDLESS_SMS_OTP",phoneNumber:e,otp:r});if(!i)return n({error:me,isError:!0,isSuccess:!1,user:null,accessToken:null,refreshToken:null});t.onTransition(s=>{s.matches({authentication:"signedIn"})?n({error:null,isError:!1,isSuccess:!0,user:s.context.user,accessToken:s.context.accessToken.value,refreshToken:s.context.refreshToken.value}):s.matches({registration:{incomplete:"failed"}})&&n({error:s.context.errors.authentication||null,isError:!0,isSuccess:!1,user:null,accessToken:null,refreshToken:null})})}),Jn=async(t,e)=>new Promise(r=>{const{event:n}=t.send("SIGNOUT",{all:e});if(n.type!=="SIGNED_OUT")return r({isSuccess:!1,isError:!0,error:qs});t.onTransition(i=>{i.matches({authentication:{signedOut:"success"}})?r({isSuccess:!0,isError:!1,error:null}):i.matches("authentication.signedOut.failed")&&r({isSuccess:!1,isError:!0,error:i.context.errors.signout||null})})}),wr=(t,e,r,n)=>new Promise(i=>{const{changed:s,context:o}=t.send("SIGNUP_EMAIL_PASSWORD",{email:e,password:r,options:n});if(!s)return i({error:me,accessToken:o.accessToken.value,refreshToken:o.refreshToken.value,isError:!0,isSuccess:!1,needsEmailVerification:!1,user:o.user});t.onTransition(d=>{d.matches("registration.incomplete.failed")?i({accessToken:null,refreshToken:null,error:d.context.errors.registration||null,isError:!0,isSuccess:!1,needsEmailVerification:!1,user:null}):d.matches({authentication:{signedOut:"noErrors"},registration:{incomplete:"needsEmailVerification"}})?i({accessToken:null,refreshToken:null,error:null,isError:!1,isSuccess:!1,needsEmailVerification:!0,user:null}):d.matches({authentication:"signedIn",registration:"complete"})&&i({accessToken:d.context.accessToken.value,refreshToken:d.context.refreshToken.value,error:null,isError:!1,isSuccess:!0,needsEmailVerification:!1,user:d.context.user})})}),Wn=(t,e,r)=>new Promise(n=>{const{changed:i,context:s}=t.send("SIGNUP_SECURITY_KEY",{email:e,options:r});if(!i)return n({error:me,accessToken:s.accessToken.value,refreshToken:s.refreshToken.value,isError:!0,isSuccess:!1,needsEmailVerification:!1,user:s.user});t.onTransition(o=>{o.matches("registration.incomplete.failed")?n({accessToken:null,refreshToken:null,error:o.context.errors.registration||null,isError:!0,isSuccess:!1,needsEmailVerification:!1,user:null}):o.matches({authentication:{signedOut:"noErrors"},registration:{incomplete:"needsEmailVerification"}})?n({accessToken:null,refreshToken:null,error:null,isError:!1,isSuccess:!1,needsEmailVerification:!0,user:null}):o.matches({authentication:"signedIn",registration:"complete"})&&n({accessToken:o.context.accessToken.value,refreshToken:o.context.refreshToken.value,error:null,isError:!1,isSuccess:!0,needsEmailVerification:!1,user:o.context.user})})}),fo=async({backendUrl:t,interpreter:e},{expiresAt:r,metadata:n})=>{try{const{data:i}=await Te(`${t}/pat`,{expiresAt:r.toUTCString(),metadata:n},e==null?void 0:e.getSnapshot().context.accessToken.value);return{data:i?{id:i.id||null,personalAccessToken:i.personalAccessToken||null}:null,isError:!1,error:null,isSuccess:!0}}catch(i){const{error:s}=i;return{isError:!0,error:s,isSuccess:!1,data:null}}};class po{constructor({url:e,autoRefreshToken:r=!0,autoSignIn:n=!0,clientStorage:i,clientStorageType:s,refreshIntervalTime:o,start:d=!0}){var u;this.url=e,this._client=new uo({backendUrl:e,clientUrl:typeof window!="undefined"&&((u=window.location)==null?void 0:u.origin)||"",autoRefreshToken:r,autoSignIn:n,start:d,clientStorage:i,clientStorageType:s,refreshIntervalTime:o})}async signUp(e){const r=await this.waitUntilReady(),{email:n,options:i}=e;return"securityKey"in e?ke(await Wn(r,n,i)):ke(await wr(r,n,e.password,i))}async signIn(e){const r=await this.waitUntilReady();if(!e){const n=await Hn(r);return{...ke(n),mfa:null}}if("provider"in e){const{provider:n,options:i}=e,s=yr(`${this._client.backendUrl}/signin/provider/${n}`,he(this._client.clientUrl,i));return io()&&(window.location.href=s),{providerUrl:s,provider:n,session:null,mfa:null,error:null}}if("email"in e&&"password"in e){const n=await Yn(r,e.email,e.password);return n.needsEmailVerification?{session:null,mfa:null,error:Hs}:n.needsMfaOtp?{session:null,mfa:n.mfa,error:null}:{...ke(n),mfa:null}}if("email"in e&&"securityKey"in e){if(e.securityKey!==!0)throw Error("securityKey must be true");const n=await $n(r,e.email);return{...ke(n),mfa:null}}if("email"in e){const{email:n,options:i}=e,{error:s}=await Er(r,n,i);return{session:null,mfa:null,error:s}}if("phoneNumber"in e&&"otp"in e){const n=await Sr(r,e.phoneNumber,e.otp);return{...ke(n),mfa:null}}if("phoneNumber"in e){const{error:n}=await Tr(r,e.phoneNumber,e.options);return{error:n,mfa:null,session:null}}if("otp"in e){const n=await zn(r,e.otp,e.ticket);return{...ke(n),mfa:null}}return{error:$s,mfa:null,session:null}}async signInPAT(e){const r=await this.waitUntilReady(),n=await Kn(r,e);return ke(n)}async signOut(e){const r=await this.waitUntilReady(),{error:n}=await Jn(r,e==null?void 0:e.all);return{error:n}}async resetPassword({email:e,options:r}){const n=Ce(Mn(this._client)).start(),{error:i}=await Gn(n,e,r);return{error:i}}async changePassword({newPassword:e,ticket:r}){const n=Ce(Un(this._client)).start(),{error:i}=await Bn(n,e,r);return{error:i}}async sendVerificationEmail({email:e,options:r}){const n=Ce(jn(this._client)).start(),{error:i}=await qn(n,e,r);return{error:i}}async changeEmail({newEmail:e,options:r}){const n=Ce(Ln(this._client)).start(),{error:i}=await Vn(n,e,r);return{error:i}}async deanonymize(e){const r=await this.waitUntilReady();if(e.signInMethod==="passwordless"){if(e.connection==="email"){const{error:n}=await Er(r,e.email,e.options);return{error:n}}if(e.connection==="sms"){const{error:n}=await Tr(r,e.phoneNumber,e.options);return{error:n}}}if(e.signInMethod==="email-password"){const{error:n}=await wr(r,e.email,e.password,e.options);return{error:n}}throw Error("Unknown deanonymization method")}async addSecurityKey(e){const{error:r,key:n}=await Fn(this._client,e);return{error:r,key:n}}async createPAT(e,r){return fo(this._client,{expiresAt:e,metadata:r})}onTokenChanged(e){return this._client.subscribe(()=>{var r;const n=(r=this._client.interpreter)==null?void 0:r.onTransition(({event:i,context:s})=>{i.type==="TOKEN_CHANGED"&&e(Pt(s))});return()=>n==null?void 0:n.stop()})}onAuthStateChanged(e){return this._client.subscribe(()=>{var r;const n=(r=this._client.interpreter)==null?void 0:r.onTransition(({event:i,context:s})=>{(i.type==="SIGNED_IN"||i.type==="SIGNED_OUT")&&e(i.type,Pt(s))});return()=>n==null?void 0:n.stop()})}isAuthenticated(){var e;return!!((e=this._client.interpreter)!=null&&e.getSnapshot().matches({authentication:"signedIn"}))}async isAuthenticatedAsync(){return(await this.waitUntilReady()).getSnapshot().matches({authentication:"signedIn"})}getAuthenticationStatus(){var e;const r=((e=this.client.interpreter)==null?void 0:e.getSnapshot().context.importTokenAttempts)||0;return this.isReady()?{isAuthenticated:this.isAuthenticated(),isLoading:!1,connectionAttempts:r}:{isAuthenticated:!1,isLoading:!0,connectionAttempts:r}}getAccessToken(){var e,r;return(r=(e=this._client.interpreter)==null?void 0:e.getSnapshot().context.accessToken.value)!=null?r:void 0}getDecodedAccessToken(){const e=this.getAccessToken();return e?Gr(e):null}getHasuraClaims(){var e;return((e=this.getDecodedAccessToken())==null?void 0:e["https://hasura.io/jwt/claims"])||null}getHasuraClaim(e){var r;return((r=this.getHasuraClaims())==null?void 0:r[e.startsWith("x-hasura-")?e:`x-hasura-${e}`])||null}async refreshSession(e){try{const r=await this.waitUntilReady();return new Promise(n=>{const i=e||r.getSnapshot().context.refreshToken.value;if(!i)return n({session:null,error:Bs});const{changed:s}=r.send("TRY_TOKEN",{token:i});if(!s)return n({session:null,error:Gs});r.onTransition(o=>{o.matches({token:{idle:"error"}})?n({session:null,error:Ys}):o.event.type==="TOKEN_CHANGED"&&n({session:Pt(o.context),error:null})})})}catch(r){return{session:null,error:r.message}}}getSession(){var e,r;return Pt((r=(e=this._client.interpreter)==null?void 0:e.getSnapshot())==null?void 0:r.context)}getUser(){var e,r,n;return((n=(r=(e=this._client.interpreter)==null?void 0:e.getSnapshot())==null?void 0:r.context)==null?void 0:n.user)||null}waitUntilReady(){const e=this._client.interpreter;if(!e)throw Error("Auth interpreter not set");return e.getSnapshot().hasTag("loading")?new Promise((r,n)=>{let i=setTimeout(()=>n("The state machine is not yet ready after 15 seconds."),15e3);e.onTransition(s=>{if(!s.hasTag("loading"))return clearTimeout(i),r(e)})}):Promise.resolve(e)}isReady(){var e,r;return!((r=(e=this._client.interpreter)==null?void 0:e.getSnapshot())!=null&&r.hasTag("loading"))}get client(){return this._client}}var vo=typeof self=="object"?self.FormData:window.FormData;const xr=dr(vo);let Qn=globalThis.fetch;const Ar=async(t,e,{accessToken:r,name:n,fileId:i,bucketId:s,adminSecret:o,onUploadProgress:d,headers:u={}}={})=>{var l;const a={...u};s&&e.append("bucket-id",s),o&&(a["x-hasura-admin-secret"]=o),r&&(a.Authorization=`Bearer ${r}`);const c=`${t}/files`;if(typeof XMLHttpRequest=="undefined")try{e instanceof xr&&(Qn=fr().fetch);const h=await Qn(c,{method:"POST",headers:a,body:e}),f=await h.json();return h.ok?{fileMetadata:f,error:null}:{error:{status:h.status,message:((l=f==null?void 0:f.error)==null?void 0:l.message)||h.statusText,error:h.statusText},fileMetadata:null}}catch(h){return{error:{status:0,message:h.message,error:h.message},fileMetadata:null}}return new Promise(h=>{let f=new XMLHttpRequest;f.responseType="json",f.onload=()=>{var p,m,w,E,A;return f.status<200||f.status>=300?h({fileMetadata:null,error:{error:(m=(p=f.response)==null?void 0:p.error)!=null?m:f.response,message:(A=(E=(w=f.response)==null?void 0:w.error)==null?void 0:E.message)!=null?A:f.response,status:f.status}}):h({fileMetadata:f.response,error:null})},f.onerror=()=>h({fileMetadata:null,error:{error:f.statusText,message:f.statusText,status:f.status}}),d&&f.upload.addEventListener("progress",d,!1),f.open("POST",c,!0),Object.entries(a).forEach(([p,m])=>{f.setRequestHeader(p,m)}),f.send(e)})};let Ut;typeof Ut=="undefined"&&(Ut=fr().fetch);class mo{constructor({url:e}){this.url=e}async uploadFormData({formData:e,headers:r,bucketId:n}){const{error:i,fileMetadata:s}=await Ar(this.url,e,{accessToken:this.accessToken,adminSecret:this.adminSecret,bucketId:n,headers:r});return i?{fileMetadata:null,error:i}:s&&!("processedFiles"in s)?{fileMetadata:{processedFiles:[s]},error:null}:{fileMetadata:s,error:null}}async uploadFile({file:e,bucketId:r,id:n,name:i}){const s=typeof window=="undefined"?new xr:new FormData;s.append("file[]",e),s.append("metadata[]",JSON.stringify({id:n,name:i}));const{error:o,fileMetadata:d}=await Ar(this.url,s,{accessToken:this.accessToken,adminSecret:this.adminSecret,bucketId:r,fileId:n,name:i});return o?{fileMetadata:null,error:o}:d&&"processedFiles"in d?{fileMetadata:d.processedFiles[0],error:null}:{fileMetadata:d,error:null}}async getPresignedUrl(e){try{const{fileId:r}=e,n=await Ut(`${this.url}/files/${r}/presignedurl`,{method:"GET",headers:this.generateAuthHeaders()});if(!n.ok)throw new Error(await n.text());return{presignedUrl:await n.json(),error:null}}catch(r){return{presignedUrl:null,error:r}}}async delete(e){try{const{fileId:r}=e,n=await Ut(`${this.url}/files/${r}`,{method:"DELETE",headers:this.generateAuthHeaders()});if(!n.ok)throw new Error(await n.text());return{error:null}}catch(r){return{error:r}}}setAccessToken(e){return this.accessToken=e,this}setAdminSecret(e){return this.adminSecret=e,this}generateAuthHeaders(){if(!(!this.adminSecret&&!this.accessToken))return this.adminSecret?{"x-hasura-admin-secret":this.adminSecret}:{Authorization:`Bearer ${this.accessToken}`}}}function Xn(t,e){if(!e||Object.keys(e).length===0)return t;const r=new URL(t),n=Object.entries(e).reduce((i,[s,o])=>({...i,[s.charAt(0)]:o}),{});return Object.entries(n).forEach(([i,s])=>{s&&r.searchParams.set(i,s)}),r.toString()}class yo{constructor({url:e,adminSecret:r}){this.url=e,this.api=new mo({url:e}),this.setAdminSecret(r)}async upload(e){return"file"in e?this.api.uploadFile(e):this.api.uploadFormData(e)}getPublicUrl(e){const{fileId:r,...n}=e;return Xn(`${this.url}/files/${r}`,n)}async getPresignedUrl(e){const{fileId:r,...n}=e,{presignedUrl:i,error:s}=await this.api.getPresignedUrl(e);if(s)return{presignedUrl:null,error:s};if(!i)return{presignedUrl:null,error:new Error("Invalid file id")};const o=Xn(i.url,n);return{presignedUrl:{...i,url:o},error:null}}async delete(e){const{error:r}=await this.api.delete(e);return r?{error:r}:{error:null}}setAccessToken(e){return this.api.setAccessToken(e),this}setAdminSecret(e){return this.api.setAdminSecret(e),this}}let Or;typeof Or=="undefined"&&(Or=xr);const br={progress:null,loaded:0,error:null,bucketId:void 0,file:void 0,id:void 0},Zn=()=>Oe({predictableActionArguments:!0,schema:{context:{},events:{}},tsTypes:{},context:{...br},initial:"idle",on:{DESTROY:{actions:"sendDestroy",target:"stopped"}},states:{idle:{on:{ADD:{actions:"addFile"},UPLOAD:{cond:"hasFile",target:"uploading"}}},uploading:{entry:"resetProgress",on:{UPLOAD_PROGRESS:{actions:["incrementProgress","sendProgress"]},UPLOAD_DONE:"uploaded",UPLOAD_ERROR:"error",CANCEL:"idle"},invoke:{src:"uploadFile"}},uploaded:{entry:["setFileMetadata","sendDone"],on:{ADD:{actions:"addFile",target:"idle"},UPLOAD:{actions:"resetContext",target:"uploading"}}},error:{entry:["setError","sendError"],on:{ADD:{actions:"addFile",target:"idle"},UPLOAD:{actions:"resetContext",target:"uploading"}}},stopped:{type:"final"}}},{guards:{hasFile:(t,e)=>!!t.file||!!e.file},actions:{incrementProgress:j({loaded:(t,{loaded:e})=>e,progress:(t,{progress:e})=>e}),setFileMetadata:j({id:(t,{id:e})=>e,bucketId:(t,{bucketId:e})=>e,progress:t=>100}),setError:j({error:(t,{error:e})=>e}),sendProgress:()=>{},sendError:()=>{},sendDestroy:()=>{},sendDone:()=>{},resetProgress:j({progress:t=>null,loaded:t=>0}),resetContext:j(t=>br),addFile:j({file:(t,{file:e})=>e,bucketId:(t,{bucketId:e})=>e,id:(t,{id:e})=>e})},services:{uploadFile:(t,e)=>r=>{const n=e.file||t.file,i=new Or;i.append("file[]",n);let s=0;return Ar(e.url,i,{fileId:e.id||t.id,bucketId:e.bucketId||t.bucketId,accessToken:e.accessToken,adminSecret:e.adminSecret,name:e.name||n.name,onUploadProgress:o=>{const d=o.total?Math.round(o.loaded*n.size/o.total):0,u=d-s;s=d,r({type:"UPLOAD_PROGRESS",progress:o.total?Math.round(d*100/o.total):0,loaded:d,additions:u})}}).then(({fileMetadata:o,error:d})=>{if(d&&r({type:"UPLOAD_ERROR",error:d}),o&&!("processedFiles"in o)){const{id:u,bucketId:l}=o;r({type:"UPLOAD_DONE",id:u,bucketId:l})}if(o&&"processedFiles"in o){const{id:u,bucketId:l}=o.processedFiles[0];r({type:"UPLOAD_DONE",id:u,bucketId:l})}}),()=>{}}}}),{pure:kr,sendParent:Mt}=us,go=()=>Oe({id:"files-list",schema:{context:{},events:{}},tsTypes:{},predictableActionArguments:!0,context:{progress:null,files:[],loaded:0,total:0},initial:"idle",on:{UPLOAD:{cond:"hasFileToDownload",actions:"addItem",target:"uploading"},ADD:{actions:"addItem"},REMOVE:{actions:"removeItem"}},states:{idle:{entry:["resetProgress","resetLoaded","resetTotal"],on:{CLEAR:{actions:"clearList",target:"idle"}}},uploading:{entry:["upload","startProgress","resetLoaded","resetTotal"],on:{UPLOAD_PROGRESS:{actions:["incrementProgress"]},UPLOAD_DONE:[{cond:"isAllUploaded",target:"uploaded"},{cond:"isAllUploadedOrError",target:"error"}],UPLOAD_ERROR:[{cond:"isAllUploaded",target:"uploaded"},{cond:"isAllUploadedOrError",target:"error"}],CANCEL:{actions:"cancel",target:"idle"}}},uploaded:{entry:"setUploaded",on:{CLEAR:{actions:"clearList",target:"idle"}}},error:{on:{CLEAR:{actions:"clearList",target:"idle"}}}}},{guards:{hasFileToDownload:(t,e)=>t.files.some(r=>r.getSnapshot().matches("idle"))||!!e.files,isAllUploaded:t=>t.files.every(e=>{var r;return(r=e.getSnapshot())==null?void 0:r.matches("uploaded")}),isAllUploadedOrError:t=>t.files.every(e=>{const r=e.getSnapshot();return(r==null?void 0:r.matches("error"))||(r==null?void 0:r.matches("uploaded"))})},actions:{incrementProgress:j((t,e)=>{const r=t.loaded+e.additions,n=Math.round(r*100/t.total);return{...t,loaded:r,progress:n}}),setUploaded:j({progress:t=>100,loaded:({files:t})=>t.map(e=>e.getSnapshot()).filter(e=>e.matches("uploaded")).reduce((e,r)=>{var n;return e+((n=r.context.file)==null?void 0:n.size)},0)}),resetTotal:j({total:({files:t})=>t.map(e=>e.getSnapshot()).filter(e=>!e.matches("uploaded")).reduce((e,r)=>{var n;return e+((n=r.context.file)==null?void 0:n.size)},0)}),resetLoaded:j({loaded:t=>0}),startProgress:j({progress:t=>0}),resetProgress:j({progress:t=>null}),addItem:j((t,{files:e,bucketId:r})=>{const n=e?Array.isArray(e)?e:"item"in e?Array.from(e):[e]:[],i=t.total+n.reduce((o,d)=>o+d.size,0),s=Math.round(t.loaded*100/i);return{files:[...t.files,...n.map(o=>ks(Zn().withConfig({actions:{sendProgress:Mt((d,{additions:u})=>({type:"UPLOAD_PROGRESS",additions:u})),sendDone:Mt("UPLOAD_DONE"),sendError:Mt("UPLOAD_ERROR"),sendDestroy:Mt("REMOVE")}}).withContext({...br,file:o,bucketId:r}),{sync:!0}))],total:i,loaded:t.loaded,progress:s}}),removeItem:j({files:t=>t.files.filter(e=>{var r,n;const i=(r=e.getSnapshot())==null?void 0:r.matches("stopped");return i&&((n=e.stop)==null||n.call(e)),!i})}),clearList:kr(t=>t.files.map(e=>ie({type:"DESTROY"},{to:e.id}))),upload:kr((t,e)=>t.files.map(r=>ie(e,{to:r.id}))),cancel:kr(t=>t.files.map(e=>ie({type:"CANCEL"},{to:e.id})))}}),Eo=async(t,e)=>new Promise(r=>{e.send({type:"UPLOAD",...t}),e.subscribe(n=>{var i;n.matches("error")?r({error:n.context.error,isError:!0,isUploaded:!1}):n.matches("uploaded")&&r({error:null,isError:!1,isUploaded:!0,id:n.context.id,bucketId:n.context.id,name:(i=n.context.file)==null?void 0:i.name})})}),To=async(t,e)=>new Promise(r=>{e.send({type:"UPLOAD",...t,files:t.files}),e.onTransition(n=>{n.matches("error")?r({errors:n.context.files.filter(i=>{var s;return(s=i.getSnapshot())==null?void 0:s.context.error}),isError:!0,files:[]}):n.matches("uploaded")&&r({errors:[],isError:!1,files:n.context.files})})});function So(t,e){return e=e||{},new Promise(function(r,n){var i=new XMLHttpRequest,s=[],o=[],d={},u=function(){return{ok:(i.status/100|0)==2,statusText:i.statusText,status:i.status,url:i.responseURL,text:function(){return Promise.resolve(i.responseText)},json:function(){return Promise.resolve(i.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([i.response]))},clone:u,headers:{keys:function(){return s},entries:function(){return o},get:function(a){return d[a.toLowerCase()]},has:function(a){return a.toLowerCase()in d}}}};for(var l in i.open(e.method||"get",t,!0),i.onload=function(){i.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(a,c,h){s.push(c=c.toLowerCase()),o.push([c,h]),d[c]=d[c]?d[c]+","+h:h}),r(u())},i.onerror=n,i.withCredentials=e.credentials=="include",e.headers)i.setRequestHeader(l,e.headers[l]);i.send(e.body||null)})}const ei=Cs(Object.freeze(Object.defineProperty({__proto__:null,default:So},Symbol.toStringTag,{value:"Module"})));var wo=self.fetch||(self.fetch=ei.default||ei);const ti=dr(wo);function jt(t,e){if(!!!t)throw new Error(e)}function xo(t){return typeof t=="object"&&t!==null}function Ao(t,e){if(!!!t)throw new Error(e!=null?e:"Unexpected invariant triggered.")}const Oo=/\r\n|[\n\r]/g;function Ir(t,e){let r=0,n=1;for(const i of t.body.matchAll(Oo)){if(typeof i.index=="number"||Ao(!1),i.index>=e)break;r=i.index+i[0].length,n+=1}return{line:n,column:e+1-r}}function bo(t){return ri(t.source,Ir(t.source,t.start))}function ri(t,e){const r=t.locationOffset.column-1,n="".padStart(r)+t.body,i=e.line-1,s=t.locationOffset.line-1,o=e.line+s,d=e.line===1?r:0,u=e.column+d,l=`${t.name}:${o}:${u}
`,a=n.split(/\r\n|[\n\r]/g),c=a[i];if(c.length>120){const h=Math.floor(u/80),f=u%80,p=[];for(let m=0;m<c.length;m+=80)p.push(c.slice(m,m+80));return l+ni([[`${o} |`,p[0]],...p.slice(1,h+1).map(m=>["|",m]),["|","^".padStart(f)],["|",p[h+1]]])}return l+ni([[`${o-1} |`,a[i-1]],[`${o} |`,c],["|","^".padStart(u)],[`${o+1} |`,a[i+1]]])}function ni(t){const e=t.filter(([n,i])=>i!==void 0),r=Math.max(...e.map(([n])=>n.length));return e.map(([n,i])=>n.padStart(r)+(i?" "+i:"")).join(`
`)}function ko(t){const e=t[0];return e==null||"kind"in e||"length"in e?{nodes:e,source:t[1],positions:t[2],path:t[3],originalError:t[4],extensions:t[5]}:e}class _r extends Error{constructor(e,...r){var n,i,s;const{nodes:o,source:d,positions:u,path:l,originalError:a,extensions:c}=ko(r);super(e),this.name="GraphQLError",this.path=l!=null?l:void 0,this.originalError=a!=null?a:void 0,this.nodes=ii(Array.isArray(o)?o:o?[o]:void 0);const h=ii((n=this.nodes)===null||n===void 0?void 0:n.map(p=>p.loc).filter(p=>p!=null));this.source=d!=null?d:h==null||(i=h[0])===null||i===void 0?void 0:i.source,this.positions=u!=null?u:h==null?void 0:h.map(p=>p.start),this.locations=u&&d?u.map(p=>Ir(d,p)):h==null?void 0:h.map(p=>Ir(p.source,p.start));const f=xo(a==null?void 0:a.extensions)?a==null?void 0:a.extensions:void 0;this.extensions=(s=c!=null?c:f)!==null&&s!==void 0?s:Object.create(null),Object.defineProperties(this,{message:{writable:!0,enumerable:!0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),a!=null&&a.stack?Object.defineProperty(this,"stack",{value:a.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,_r):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}get[Symbol.toStringTag](){return"GraphQLError"}toString(){let e=this.message;if(this.nodes)for(const r of this.nodes)r.loc&&(e+=`

`+bo(r.loc));else if(this.source&&this.locations)for(const r of this.locations)e+=`

`+ri(this.source,r);return e}toJSON(){const e={message:this.message};return this.locations!=null&&(e.locations=this.locations),this.path!=null&&(e.path=this.path),this.extensions!=null&&Object.keys(this.extensions).length>0&&(e.extensions=this.extensions),e}}function ii(t){return t===void 0||t.length===0?void 0:t}function se(t,e,r){return new _r(`Syntax Error: ${r}`,{source:t,positions:[e]})}class Io{constructor(e,r,n){this.start=e.start,this.end=r.end,this.startToken=e,this.endToken=r,this.source=n}get[Symbol.toStringTag](){return"Location"}toJSON(){return{start:this.start,end:this.end}}}class si{constructor(e,r,n,i,s,o){this.kind=e,this.start=r,this.end=n,this.line=i,this.column=s,this.value=o,this.prev=null,this.next=null}get[Symbol.toStringTag](){return"Token"}toJSON(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}}}const oi={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},_o=new Set(Object.keys(oi));function ai(t){const e=t==null?void 0:t.kind;return typeof e=="string"&&_o.has(e)}var $e;(function(t){t.QUERY="query",t.MUTATION="mutation",t.SUBSCRIPTION="subscription"})($e||($e={}));var Nr;(function(t){t.QUERY="QUERY",t.MUTATION="MUTATION",t.SUBSCRIPTION="SUBSCRIPTION",t.FIELD="FIELD",t.FRAGMENT_DEFINITION="FRAGMENT_DEFINITION",t.FRAGMENT_SPREAD="FRAGMENT_SPREAD",t.INLINE_FRAGMENT="INLINE_FRAGMENT",t.VARIABLE_DEFINITION="VARIABLE_DEFINITION",t.SCHEMA="SCHEMA",t.SCALAR="SCALAR",t.OBJECT="OBJECT",t.FIELD_DEFINITION="FIELD_DEFINITION",t.ARGUMENT_DEFINITION="ARGUMENT_DEFINITION",t.INTERFACE="INTERFACE",t.UNION="UNION",t.ENUM="ENUM",t.ENUM_VALUE="ENUM_VALUE",t.INPUT_OBJECT="INPUT_OBJECT",t.INPUT_FIELD_DEFINITION="INPUT_FIELD_DEFINITION"})(Nr||(Nr={}));var R;(function(t){t.NAME="Name",t.DOCUMENT="Document",t.OPERATION_DEFINITION="OperationDefinition",t.VARIABLE_DEFINITION="VariableDefinition",t.SELECTION_SET="SelectionSet",t.FIELD="Field",t.ARGUMENT="Argument",t.FRAGMENT_SPREAD="FragmentSpread",t.INLINE_FRAGMENT="InlineFragment",t.FRAGMENT_DEFINITION="FragmentDefinition",t.VARIABLE="Variable",t.INT="IntValue",t.FLOAT="FloatValue",t.STRING="StringValue",t.BOOLEAN="BooleanValue",t.NULL="NullValue",t.ENUM="EnumValue",t.LIST="ListValue",t.OBJECT="ObjectValue",t.OBJECT_FIELD="ObjectField",t.DIRECTIVE="Directive",t.NAMED_TYPE="NamedType",t.LIST_TYPE="ListType",t.NON_NULL_TYPE="NonNullType",t.SCHEMA_DEFINITION="SchemaDefinition",t.OPERATION_TYPE_DEFINITION="OperationTypeDefinition",t.SCALAR_TYPE_DEFINITION="ScalarTypeDefinition",t.OBJECT_TYPE_DEFINITION="ObjectTypeDefinition",t.FIELD_DEFINITION="FieldDefinition",t.INPUT_VALUE_DEFINITION="InputValueDefinition",t.INTERFACE_TYPE_DEFINITION="InterfaceTypeDefinition",t.UNION_TYPE_DEFINITION="UnionTypeDefinition",t.ENUM_TYPE_DEFINITION="EnumTypeDefinition",t.ENUM_VALUE_DEFINITION="EnumValueDefinition",t.INPUT_OBJECT_TYPE_DEFINITION="InputObjectTypeDefinition",t.DIRECTIVE_DEFINITION="DirectiveDefinition",t.SCHEMA_EXTENSION="SchemaExtension",t.SCALAR_TYPE_EXTENSION="ScalarTypeExtension",t.OBJECT_TYPE_EXTENSION="ObjectTypeExtension",t.INTERFACE_TYPE_EXTENSION="InterfaceTypeExtension",t.UNION_TYPE_EXTENSION="UnionTypeExtension",t.ENUM_TYPE_EXTENSION="EnumTypeExtension",t.INPUT_OBJECT_TYPE_EXTENSION="InputObjectTypeExtension"})(R||(R={}));function Dr(t){return t===9||t===32}function st(t){return t>=48&&t<=57}function ci(t){return t>=97&&t<=122||t>=65&&t<=90}function ui(t){return ci(t)||t===95}function No(t){return ci(t)||st(t)||t===95}function Do(t){var e;let r=Number.MAX_SAFE_INTEGER,n=null,i=-1;for(let o=0;o<t.length;++o){var s;const d=t[o],u=Ro(d);u!==d.length&&(n=(s=n)!==null&&s!==void 0?s:o,i=o,o!==0&&u<r&&(r=u))}return t.map((o,d)=>d===0?o:o.slice(r)).slice((e=n)!==null&&e!==void 0?e:0,i+1)}function Ro(t){let e=0;for(;e<t.length&&Dr(t.charCodeAt(e));)++e;return e}function Co(t,e){const r=t.replace(/"""/g,'\\"""'),n=r.split(/\r\n|[\n\r]/g),i=n.length===1,s=n.length>1&&n.slice(1).every(f=>f.length===0||Dr(f.charCodeAt(0))),o=r.endsWith('\\"""'),d=t.endsWith('"')&&!o,u=t.endsWith("\\"),l=d||u,a=!(e!=null&&e.minimize)&&(!i||t.length>70||l||s||o);let c="";const h=i&&Dr(t.charCodeAt(0));return(a&&!h||s)&&(c+=`
`),c+=r,(a||l)&&(c+=`
`),'"""'+c+'"""'}var y;(function(t){t.SOF="<SOF>",t.EOF="<EOF>",t.BANG="!",t.DOLLAR="$",t.AMP="&",t.PAREN_L="(",t.PAREN_R=")",t.SPREAD="...",t.COLON=":",t.EQUALS="=",t.AT="@",t.BRACKET_L="[",t.BRACKET_R="]",t.BRACE_L="{",t.PIPE="|",t.BRACE_R="}",t.NAME="Name",t.INT="Int",t.FLOAT="Float",t.STRING="String",t.BLOCK_STRING="BlockString",t.COMMENT="Comment"})(y||(y={}));class Po{constructor(e){const r=new si(y.SOF,0,0,0,0);this.source=e,this.lastToken=r,this.token=r,this.line=1,this.lineStart=0}get[Symbol.toStringTag](){return"Lexer"}advance(){return this.lastToken=this.token,this.token=this.lookahead()}lookahead(){let e=this.token;if(e.kind!==y.EOF)do if(e.next)e=e.next;else{const r=Uo(this,e.end);e.next=r,r.prev=e,e=r}while(e.kind===y.COMMENT);return e}}function Lo(t){return t===y.BANG||t===y.DOLLAR||t===y.AMP||t===y.PAREN_L||t===y.PAREN_R||t===y.SPREAD||t===y.COLON||t===y.EQUALS||t===y.AT||t===y.BRACKET_L||t===y.BRACKET_R||t===y.BRACE_L||t===y.PIPE||t===y.BRACE_R}function ze(t){return t>=0&&t<=55295||t>=57344&&t<=1114111}function Ft(t,e){return li(t.charCodeAt(e))&&di(t.charCodeAt(e+1))}function li(t){return t>=55296&&t<=56319}function di(t){return t>=56320&&t<=57343}function Le(t,e){const r=t.source.body.codePointAt(e);if(r===void 0)return y.EOF;if(r>=32&&r<=126){const n=String.fromCodePoint(r);return n==='"'?`'"'`:`"${n}"`}return"U+"+r.toString(16).toUpperCase().padStart(4,"0")}function ee(t,e,r,n,i){const s=t.line,o=1+r-t.lineStart;return new si(e,r,n,s,o,i)}function Uo(t,e){const r=t.source.body,n=r.length;let i=e;for(;i<n;){const s=r.charCodeAt(i);switch(s){case 65279:case 9:case 32:case 44:++i;continue;case 10:++i,++t.line,t.lineStart=i;continue;case 13:r.charCodeAt(i+1)===10?i+=2:++i,++t.line,t.lineStart=i;continue;case 35:return Mo(t,i);case 33:return ee(t,y.BANG,i,i+1);case 36:return ee(t,y.DOLLAR,i,i+1);case 38:return ee(t,y.AMP,i,i+1);case 40:return ee(t,y.PAREN_L,i,i+1);case 41:return ee(t,y.PAREN_R,i,i+1);case 46:if(r.charCodeAt(i+1)===46&&r.charCodeAt(i+2)===46)return ee(t,y.SPREAD,i,i+3);break;case 58:return ee(t,y.COLON,i,i+1);case 61:return ee(t,y.EQUALS,i,i+1);case 64:return ee(t,y.AT,i,i+1);case 91:return ee(t,y.BRACKET_L,i,i+1);case 93:return ee(t,y.BRACKET_R,i,i+1);case 123:return ee(t,y.BRACE_L,i,i+1);case 124:return ee(t,y.PIPE,i,i+1);case 125:return ee(t,y.BRACE_R,i,i+1);case 34:return r.charCodeAt(i+1)===34&&r.charCodeAt(i+2)===34?qo(t,i):Fo(t,i)}if(st(s)||s===45)return jo(t,i,s);if(ui(s))return Ho(t,i);throw se(t.source,i,s===39?`Unexpected single quote character ('), did you mean to use a double quote (")?`:ze(s)||Ft(r,i)?`Unexpected character: ${Le(t,i)}.`:`Invalid character: ${Le(t,i)}.`)}return ee(t,y.EOF,n,n)}function Mo(t,e){const r=t.source.body,n=r.length;let i=e+1;for(;i<n;){const s=r.charCodeAt(i);if(s===10||s===13)break;if(ze(s))++i;else if(Ft(r,i))i+=2;else break}return ee(t,y.COMMENT,e,i,r.slice(e+1,i))}function jo(t,e,r){const n=t.source.body;let i=e,s=r,o=!1;if(s===45&&(s=n.charCodeAt(++i)),s===48){if(s=n.charCodeAt(++i),st(s))throw se(t.source,i,`Invalid number, unexpected digit after 0: ${Le(t,i)}.`)}else i=Rr(t,i,s),s=n.charCodeAt(i);if(s===46&&(o=!0,s=n.charCodeAt(++i),i=Rr(t,i,s),s=n.charCodeAt(i)),(s===69||s===101)&&(o=!0,s=n.charCodeAt(++i),(s===43||s===45)&&(s=n.charCodeAt(++i)),i=Rr(t,i,s),s=n.charCodeAt(i)),s===46||ui(s))throw se(t.source,i,`Invalid number, expected digit but got: ${Le(t,i)}.`);return ee(t,o?y.FLOAT:y.INT,e,i,n.slice(e,i))}function Rr(t,e,r){if(!st(r))throw se(t.source,e,`Invalid number, expected digit but got: ${Le(t,e)}.`);const n=t.source.body;let i=e+1;for(;st(n.charCodeAt(i));)++i;return i}function Fo(t,e){const r=t.source.body,n=r.length;let i=e+1,s=i,o="";for(;i<n;){const d=r.charCodeAt(i);if(d===34)return o+=r.slice(s,i),ee(t,y.STRING,e,i+1,o);if(d===92){o+=r.slice(s,i);const u=r.charCodeAt(i+1)===117?r.charCodeAt(i+2)===123?Vo(t,i):Bo(t,i):Go(t,i);o+=u.value,i+=u.size,s=i;continue}if(d===10||d===13)break;if(ze(d))++i;else if(Ft(r,i))i+=2;else throw se(t.source,i,`Invalid character within String: ${Le(t,i)}.`)}throw se(t.source,i,"Unterminated string.")}function Vo(t,e){const r=t.source.body;let n=0,i=3;for(;i<12;){const s=r.charCodeAt(e+i++);if(s===125){if(i<5||!ze(n))break;return{value:String.fromCodePoint(n),size:i}}if(n=n<<4|ot(s),n<0)break}throw se(t.source,e,`Invalid Unicode escape sequence: "${r.slice(e,e+i)}".`)}function Bo(t,e){const r=t.source.body,n=hi(r,e+2);if(ze(n))return{value:String.fromCodePoint(n),size:6};if(li(n)&&r.charCodeAt(e+6)===92&&r.charCodeAt(e+7)===117){const i=hi(r,e+8);if(di(i))return{value:String.fromCodePoint(n,i),size:12}}throw se(t.source,e,`Invalid Unicode escape sequence: "${r.slice(e,e+6)}".`)}function hi(t,e){return ot(t.charCodeAt(e))<<12|ot(t.charCodeAt(e+1))<<8|ot(t.charCodeAt(e+2))<<4|ot(t.charCodeAt(e+3))}function ot(t){return t>=48&&t<=57?t-48:t>=65&&t<=70?t-55:t>=97&&t<=102?t-87:-1}function Go(t,e){const r=t.source.body;switch(r.charCodeAt(e+1)){case 34:return{value:'"',size:2};case 92:return{value:"\\",size:2};case 47:return{value:"/",size:2};case 98:return{value:"\b",size:2};case 102:return{value:"\f",size:2};case 110:return{value:`
`,size:2};case 114:return{value:"\r",size:2};case 116:return{value:"	",size:2}}throw se(t.source,e,`Invalid character escape sequence: "${r.slice(e,e+2)}".`)}function qo(t,e){const r=t.source.body,n=r.length;let i=t.lineStart,s=e+3,o=s,d="";const u=[];for(;s<n;){const l=r.charCodeAt(s);if(l===34&&r.charCodeAt(s+1)===34&&r.charCodeAt(s+2)===34){d+=r.slice(o,s),u.push(d);const a=ee(t,y.BLOCK_STRING,e,s+3,Do(u).join(`
`));return t.line+=u.length-1,t.lineStart=i,a}if(l===92&&r.charCodeAt(s+1)===34&&r.charCodeAt(s+2)===34&&r.charCodeAt(s+3)===34){d+=r.slice(o,s),o=s+1,s+=4;continue}if(l===10||l===13){d+=r.slice(o,s),u.push(d),l===13&&r.charCodeAt(s+1)===10?s+=2:++s,d="",o=s,i=s;continue}if(ze(l))++s;else if(Ft(r,s))s+=2;else throw se(t.source,s,`Invalid character within String: ${Le(t,s)}.`)}throw se(t.source,s,"Unterminated string.")}function Ho(t,e){const r=t.source.body,n=r.length;let i=e+1;for(;i<n;){const s=r.charCodeAt(i);if(No(s))++i;else break}return ee(t,y.NAME,e,i,r.slice(e,i))}const Yo=10,fi=2;function Cr(t){return Vt(t,[])}function Vt(t,e){switch(typeof t){case"string":return JSON.stringify(t);case"function":return t.name?`[function ${t.name}]`:"[function]";case"object":return $o(t,e);default:return String(t)}}function $o(t,e){if(t===null)return"null";if(e.includes(t))return"[Circular]";const r=[...e,t];if(zo(t)){const n=t.toJSON();if(n!==t)return typeof n=="string"?n:Vt(n,r)}else if(Array.isArray(t))return Jo(t,r);return Ko(t,r)}function zo(t){return typeof t.toJSON=="function"}function Ko(t,e){const r=Object.entries(t);return r.length===0?"{}":e.length>fi?"["+Wo(t)+"]":"{ "+r.map(([i,s])=>i+": "+Vt(s,e)).join(", ")+" }"}function Jo(t,e){if(t.length===0)return"[]";if(e.length>fi)return"[Array]";const r=Math.min(Yo,t.length),n=t.length-r,i=[];for(let s=0;s<r;++s)i.push(Vt(t[s],e));return n===1?i.push("... 1 more item"):n>1&&i.push(`... ${n} more items`),"["+i.join(", ")+"]"}function Wo(t){const e=Object.prototype.toString.call(t).replace(/^\[object /,"").replace(/]$/,"");if(e==="Object"&&typeof t.constructor=="function"){const r=t.constructor.name;if(typeof r=="string"&&r!=="")return r}return e}const Qo=globalThis.process&&globalThis.process.env.NODE_ENV==="production"?function(e,r){return e instanceof r}:function(e,r){if(e instanceof r)return!0;if(typeof e=="object"&&e!==null){var n;const i=r.prototype[Symbol.toStringTag],s=Symbol.toStringTag in e?e[Symbol.toStringTag]:(n=e.constructor)===null||n===void 0?void 0:n.name;if(i===s){const o=Cr(e);throw new Error(`Cannot use ${i} "${o}" from another module or realm.

Ensure that there is only one instance of "graphql" in the node_modules
directory. If different versions of "graphql" are the dependencies of other
relied on modules, use "resolutions" to ensure only one version is installed.

https://yarnpkg.com/en/docs/selective-version-resolutions

Duplicate "graphql" modules cannot be used at the same time since different
versions may have different capabilities and behavior. The data from one
version used in the function from another could produce confusing and
spurious results.`)}}return!1};class pi{constructor(e,r="GraphQL request",n={line:1,column:1}){typeof e=="string"||jt(!1,`Body must be a string. Received: ${Cr(e)}.`),this.body=e,this.name=r,this.locationOffset=n,this.locationOffset.line>0||jt(!1,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||jt(!1,"column in locationOffset is 1-indexed and must be positive.")}get[Symbol.toStringTag](){return"Source"}}function Xo(t){return Qo(t,pi)}function Zo(t,e){return new ea(t,e).parseDocument()}class ea{constructor(e,r={}){const n=Xo(e)?e:new pi(e);this._lexer=new Po(n),this._options=r,this._tokenCounter=0}parseName(){const e=this.expectToken(y.NAME);return this.node(e,{kind:R.NAME,value:e.value})}parseDocument(){return this.node(this._lexer.token,{kind:R.DOCUMENT,definitions:this.many(y.SOF,this.parseDefinition,y.EOF)})}parseDefinition(){if(this.peek(y.BRACE_L))return this.parseOperationDefinition();const e=this.peekDescription(),r=e?this._lexer.lookahead():this._lexer.token;if(r.kind===y.NAME){switch(r.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}if(e)throw se(this._lexer.source,this._lexer.token.start,"Unexpected description, descriptions are supported only on type definitions.");switch(r.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"extend":return this.parseTypeSystemExtension()}}throw this.unexpected(r)}parseOperationDefinition(){const e=this._lexer.token;if(this.peek(y.BRACE_L))return this.node(e,{kind:R.OPERATION_DEFINITION,operation:$e.QUERY,name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet()});const r=this.parseOperationType();let n;return this.peek(y.NAME)&&(n=this.parseName()),this.node(e,{kind:R.OPERATION_DEFINITION,operation:r,name:n,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseOperationType(){const e=this.expectToken(y.NAME);switch(e.value){case"query":return $e.QUERY;case"mutation":return $e.MUTATION;case"subscription":return $e.SUBSCRIPTION}throw this.unexpected(e)}parseVariableDefinitions(){return this.optionalMany(y.PAREN_L,this.parseVariableDefinition,y.PAREN_R)}parseVariableDefinition(){return this.node(this._lexer.token,{kind:R.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(y.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(y.EQUALS)?this.parseConstValueLiteral():void 0,directives:this.parseConstDirectives()})}parseVariable(){const e=this._lexer.token;return this.expectToken(y.DOLLAR),this.node(e,{kind:R.VARIABLE,name:this.parseName()})}parseSelectionSet(){return this.node(this._lexer.token,{kind:R.SELECTION_SET,selections:this.many(y.BRACE_L,this.parseSelection,y.BRACE_R)})}parseSelection(){return this.peek(y.SPREAD)?this.parseFragment():this.parseField()}parseField(){const e=this._lexer.token,r=this.parseName();let n,i;return this.expectOptionalToken(y.COLON)?(n=r,i=this.parseName()):i=r,this.node(e,{kind:R.FIELD,alias:n,name:i,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(y.BRACE_L)?this.parseSelectionSet():void 0})}parseArguments(e){const r=e?this.parseConstArgument:this.parseArgument;return this.optionalMany(y.PAREN_L,r,y.PAREN_R)}parseArgument(e=!1){const r=this._lexer.token,n=this.parseName();return this.expectToken(y.COLON),this.node(r,{kind:R.ARGUMENT,name:n,value:this.parseValueLiteral(e)})}parseConstArgument(){return this.parseArgument(!0)}parseFragment(){const e=this._lexer.token;this.expectToken(y.SPREAD);const r=this.expectOptionalKeyword("on");return!r&&this.peek(y.NAME)?this.node(e,{kind:R.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1)}):this.node(e,{kind:R.INLINE_FRAGMENT,typeCondition:r?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentDefinition(){const e=this._lexer.token;return this.expectKeyword("fragment"),this._options.allowLegacyFragmentVariables===!0?this.node(e,{kind:R.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()}):this.node(e,{kind:R.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentName(){if(this._lexer.token.value==="on")throw this.unexpected();return this.parseName()}parseValueLiteral(e){const r=this._lexer.token;switch(r.kind){case y.BRACKET_L:return this.parseList(e);case y.BRACE_L:return this.parseObject(e);case y.INT:return this.advanceLexer(),this.node(r,{kind:R.INT,value:r.value});case y.FLOAT:return this.advanceLexer(),this.node(r,{kind:R.FLOAT,value:r.value});case y.STRING:case y.BLOCK_STRING:return this.parseStringLiteral();case y.NAME:switch(this.advanceLexer(),r.value){case"true":return this.node(r,{kind:R.BOOLEAN,value:!0});case"false":return this.node(r,{kind:R.BOOLEAN,value:!1});case"null":return this.node(r,{kind:R.NULL});default:return this.node(r,{kind:R.ENUM,value:r.value})}case y.DOLLAR:if(e)if(this.expectToken(y.DOLLAR),this._lexer.token.kind===y.NAME){const n=this._lexer.token.value;throw se(this._lexer.source,r.start,`Unexpected variable "$${n}" in constant value.`)}else throw this.unexpected(r);return this.parseVariable();default:throw this.unexpected()}}parseConstValueLiteral(){return this.parseValueLiteral(!0)}parseStringLiteral(){const e=this._lexer.token;return this.advanceLexer(),this.node(e,{kind:R.STRING,value:e.value,block:e.kind===y.BLOCK_STRING})}parseList(e){const r=()=>this.parseValueLiteral(e);return this.node(this._lexer.token,{kind:R.LIST,values:this.any(y.BRACKET_L,r,y.BRACKET_R)})}parseObject(e){const r=()=>this.parseObjectField(e);return this.node(this._lexer.token,{kind:R.OBJECT,fields:this.any(y.BRACE_L,r,y.BRACE_R)})}parseObjectField(e){const r=this._lexer.token,n=this.parseName();return this.expectToken(y.COLON),this.node(r,{kind:R.OBJECT_FIELD,name:n,value:this.parseValueLiteral(e)})}parseDirectives(e){const r=[];for(;this.peek(y.AT);)r.push(this.parseDirective(e));return r}parseConstDirectives(){return this.parseDirectives(!0)}parseDirective(e){const r=this._lexer.token;return this.expectToken(y.AT),this.node(r,{kind:R.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(e)})}parseTypeReference(){const e=this._lexer.token;let r;if(this.expectOptionalToken(y.BRACKET_L)){const n=this.parseTypeReference();this.expectToken(y.BRACKET_R),r=this.node(e,{kind:R.LIST_TYPE,type:n})}else r=this.parseNamedType();return this.expectOptionalToken(y.BANG)?this.node(e,{kind:R.NON_NULL_TYPE,type:r}):r}parseNamedType(){return this.node(this._lexer.token,{kind:R.NAMED_TYPE,name:this.parseName()})}peekDescription(){return this.peek(y.STRING)||this.peek(y.BLOCK_STRING)}parseDescription(){if(this.peekDescription())return this.parseStringLiteral()}parseSchemaDefinition(){const e=this._lexer.token,r=this.parseDescription();this.expectKeyword("schema");const n=this.parseConstDirectives(),i=this.many(y.BRACE_L,this.parseOperationTypeDefinition,y.BRACE_R);return this.node(e,{kind:R.SCHEMA_DEFINITION,description:r,directives:n,operationTypes:i})}parseOperationTypeDefinition(){const e=this._lexer.token,r=this.parseOperationType();this.expectToken(y.COLON);const n=this.parseNamedType();return this.node(e,{kind:R.OPERATION_TYPE_DEFINITION,operation:r,type:n})}parseScalarTypeDefinition(){const e=this._lexer.token,r=this.parseDescription();this.expectKeyword("scalar");const n=this.parseName(),i=this.parseConstDirectives();return this.node(e,{kind:R.SCALAR_TYPE_DEFINITION,description:r,name:n,directives:i})}parseObjectTypeDefinition(){const e=this._lexer.token,r=this.parseDescription();this.expectKeyword("type");const n=this.parseName(),i=this.parseImplementsInterfaces(),s=this.parseConstDirectives(),o=this.parseFieldsDefinition();return this.node(e,{kind:R.OBJECT_TYPE_DEFINITION,description:r,name:n,interfaces:i,directives:s,fields:o})}parseImplementsInterfaces(){return this.expectOptionalKeyword("implements")?this.delimitedMany(y.AMP,this.parseNamedType):[]}parseFieldsDefinition(){return this.optionalMany(y.BRACE_L,this.parseFieldDefinition,y.BRACE_R)}parseFieldDefinition(){const e=this._lexer.token,r=this.parseDescription(),n=this.parseName(),i=this.parseArgumentDefs();this.expectToken(y.COLON);const s=this.parseTypeReference(),o=this.parseConstDirectives();return this.node(e,{kind:R.FIELD_DEFINITION,description:r,name:n,arguments:i,type:s,directives:o})}parseArgumentDefs(){return this.optionalMany(y.PAREN_L,this.parseInputValueDef,y.PAREN_R)}parseInputValueDef(){const e=this._lexer.token,r=this.parseDescription(),n=this.parseName();this.expectToken(y.COLON);const i=this.parseTypeReference();let s;this.expectOptionalToken(y.EQUALS)&&(s=this.parseConstValueLiteral());const o=this.parseConstDirectives();return this.node(e,{kind:R.INPUT_VALUE_DEFINITION,description:r,name:n,type:i,defaultValue:s,directives:o})}parseInterfaceTypeDefinition(){const e=this._lexer.token,r=this.parseDescription();this.expectKeyword("interface");const n=this.parseName(),i=this.parseImplementsInterfaces(),s=this.parseConstDirectives(),o=this.parseFieldsDefinition();return this.node(e,{kind:R.INTERFACE_TYPE_DEFINITION,description:r,name:n,interfaces:i,directives:s,fields:o})}parseUnionTypeDefinition(){const e=this._lexer.token,r=this.parseDescription();this.expectKeyword("union");const n=this.parseName(),i=this.parseConstDirectives(),s=this.parseUnionMemberTypes();return this.node(e,{kind:R.UNION_TYPE_DEFINITION,description:r,name:n,directives:i,types:s})}parseUnionMemberTypes(){return this.expectOptionalToken(y.EQUALS)?this.delimitedMany(y.PIPE,this.parseNamedType):[]}parseEnumTypeDefinition(){const e=this._lexer.token,r=this.parseDescription();this.expectKeyword("enum");const n=this.parseName(),i=this.parseConstDirectives(),s=this.parseEnumValuesDefinition();return this.node(e,{kind:R.ENUM_TYPE_DEFINITION,description:r,name:n,directives:i,values:s})}parseEnumValuesDefinition(){return this.optionalMany(y.BRACE_L,this.parseEnumValueDefinition,y.BRACE_R)}parseEnumValueDefinition(){const e=this._lexer.token,r=this.parseDescription(),n=this.parseEnumValueName(),i=this.parseConstDirectives();return this.node(e,{kind:R.ENUM_VALUE_DEFINITION,description:r,name:n,directives:i})}parseEnumValueName(){if(this._lexer.token.value==="true"||this._lexer.token.value==="false"||this._lexer.token.value==="null")throw se(this._lexer.source,this._lexer.token.start,`${Bt(this._lexer.token)} is reserved and cannot be used for an enum value.`);return this.parseName()}parseInputObjectTypeDefinition(){const e=this._lexer.token,r=this.parseDescription();this.expectKeyword("input");const n=this.parseName(),i=this.parseConstDirectives(),s=this.parseInputFieldsDefinition();return this.node(e,{kind:R.INPUT_OBJECT_TYPE_DEFINITION,description:r,name:n,directives:i,fields:s})}parseInputFieldsDefinition(){return this.optionalMany(y.BRACE_L,this.parseInputValueDef,y.BRACE_R)}parseTypeSystemExtension(){const e=this._lexer.lookahead();if(e.kind===y.NAME)switch(e.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(e)}parseSchemaExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");const r=this.parseConstDirectives(),n=this.optionalMany(y.BRACE_L,this.parseOperationTypeDefinition,y.BRACE_R);if(r.length===0&&n.length===0)throw this.unexpected();return this.node(e,{kind:R.SCHEMA_EXTENSION,directives:r,operationTypes:n})}parseScalarTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");const r=this.parseName(),n=this.parseConstDirectives();if(n.length===0)throw this.unexpected();return this.node(e,{kind:R.SCALAR_TYPE_EXTENSION,name:r,directives:n})}parseObjectTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");const r=this.parseName(),n=this.parseImplementsInterfaces(),i=this.parseConstDirectives(),s=this.parseFieldsDefinition();if(n.length===0&&i.length===0&&s.length===0)throw this.unexpected();return this.node(e,{kind:R.OBJECT_TYPE_EXTENSION,name:r,interfaces:n,directives:i,fields:s})}parseInterfaceTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");const r=this.parseName(),n=this.parseImplementsInterfaces(),i=this.parseConstDirectives(),s=this.parseFieldsDefinition();if(n.length===0&&i.length===0&&s.length===0)throw this.unexpected();return this.node(e,{kind:R.INTERFACE_TYPE_EXTENSION,name:r,interfaces:n,directives:i,fields:s})}parseUnionTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");const r=this.parseName(),n=this.parseConstDirectives(),i=this.parseUnionMemberTypes();if(n.length===0&&i.length===0)throw this.unexpected();return this.node(e,{kind:R.UNION_TYPE_EXTENSION,name:r,directives:n,types:i})}parseEnumTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");const r=this.parseName(),n=this.parseConstDirectives(),i=this.parseEnumValuesDefinition();if(n.length===0&&i.length===0)throw this.unexpected();return this.node(e,{kind:R.ENUM_TYPE_EXTENSION,name:r,directives:n,values:i})}parseInputObjectTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");const r=this.parseName(),n=this.parseConstDirectives(),i=this.parseInputFieldsDefinition();if(n.length===0&&i.length===0)throw this.unexpected();return this.node(e,{kind:R.INPUT_OBJECT_TYPE_EXTENSION,name:r,directives:n,fields:i})}parseDirectiveDefinition(){const e=this._lexer.token,r=this.parseDescription();this.expectKeyword("directive"),this.expectToken(y.AT);const n=this.parseName(),i=this.parseArgumentDefs(),s=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");const o=this.parseDirectiveLocations();return this.node(e,{kind:R.DIRECTIVE_DEFINITION,description:r,name:n,arguments:i,repeatable:s,locations:o})}parseDirectiveLocations(){return this.delimitedMany(y.PIPE,this.parseDirectiveLocation)}parseDirectiveLocation(){const e=this._lexer.token,r=this.parseName();if(Object.prototype.hasOwnProperty.call(Nr,r.value))return r;throw this.unexpected(e)}node(e,r){return this._options.noLocation!==!0&&(r.loc=new Io(e,this._lexer.lastToken,this._lexer.source)),r}peek(e){return this._lexer.token.kind===e}expectToken(e){const r=this._lexer.token;if(r.kind===e)return this.advanceLexer(),r;throw se(this._lexer.source,r.start,`Expected ${vi(e)}, found ${Bt(r)}.`)}expectOptionalToken(e){return this._lexer.token.kind===e?(this.advanceLexer(),!0):!1}expectKeyword(e){const r=this._lexer.token;if(r.kind===y.NAME&&r.value===e)this.advanceLexer();else throw se(this._lexer.source,r.start,`Expected "${e}", found ${Bt(r)}.`)}expectOptionalKeyword(e){const r=this._lexer.token;return r.kind===y.NAME&&r.value===e?(this.advanceLexer(),!0):!1}unexpected(e){const r=e!=null?e:this._lexer.token;return se(this._lexer.source,r.start,`Unexpected ${Bt(r)}.`)}any(e,r,n){this.expectToken(e);const i=[];for(;!this.expectOptionalToken(n);)i.push(r.call(this));return i}optionalMany(e,r,n){if(this.expectOptionalToken(e)){const i=[];do i.push(r.call(this));while(!this.expectOptionalToken(n));return i}return[]}many(e,r,n){this.expectToken(e);const i=[];do i.push(r.call(this));while(!this.expectOptionalToken(n));return i}delimitedMany(e,r){this.expectOptionalToken(e);const n=[];do n.push(r.call(this));while(this.expectOptionalToken(e));return n}advanceLexer(){const{maxTokens:e}=this._options,r=this._lexer.advance();if(e!==void 0&&r.kind!==y.EOF&&(++this._tokenCounter,this._tokenCounter>e))throw se(this._lexer.source,r.start,`Document contains more that ${e} tokens. Parsing aborted.`)}}function Bt(t){const e=t.value;return vi(t.kind)+(e!=null?` "${e}"`:"")}function vi(t){return Lo(t)?`"${t}"`:t}function ta(t){return`"${t.replace(ra,na)}"`}const ra=/[\x00-\x1f\x22\x5c\x7f-\x9f]/g;function na(t){return ia[t.charCodeAt(0)]}const ia=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000B","\\f","\\r","\\u000E","\\u000F","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001A","\\u001B","\\u001C","\\u001D","\\u001E","\\u001F","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\u007F","\\u0080","\\u0081","\\u0082","\\u0083","\\u0084","\\u0085","\\u0086","\\u0087","\\u0088","\\u0089","\\u008A","\\u008B","\\u008C","\\u008D","\\u008E","\\u008F","\\u0090","\\u0091","\\u0092","\\u0093","\\u0094","\\u0095","\\u0096","\\u0097","\\u0098","\\u0099","\\u009A","\\u009B","\\u009C","\\u009D","\\u009E","\\u009F"],sa=Object.freeze({});function oa(t,e,r=oi){const n=new Map;for(const E of Object.values(R))n.set(E,aa(e,E));let i,s=Array.isArray(t),o=[t],d=-1,u=[],l=t,a,c;const h=[],f=[];do{d++;const E=d===o.length,A=E&&u.length!==0;if(E){if(a=f.length===0?void 0:h[h.length-1],l=c,c=f.pop(),A)if(s){l=l.slice();let O=0;for(const[I,_]of u){const N=I-O;_===null?(l.splice(N,1),O++):l[N]=_}}else{l=Object.defineProperties({},Object.getOwnPropertyDescriptors(l));for(const[O,I]of u)l[O]=I}d=i.index,o=i.keys,u=i.edits,s=i.inArray,i=i.prev}else if(c){if(a=s?d:o[d],l=c[a],l==null)continue;h.push(a)}let T;if(!Array.isArray(l)){var p,m;ai(l)||jt(!1,`Invalid AST Node: ${Cr(l)}.`);const O=E?(p=n.get(l.kind))===null||p===void 0?void 0:p.leave:(m=n.get(l.kind))===null||m===void 0?void 0:m.enter;if(T=O==null?void 0:O.call(e,l,a,c,h,f),T===sa)break;if(T===!1){if(!E){h.pop();continue}}else if(T!==void 0&&(u.push([a,T]),!E))if(ai(T))l=T;else{h.pop();continue}}if(T===void 0&&A&&u.push([a,l]),E)h.pop();else{var w;i={inArray:s,index:d,keys:o,edits:u,prev:i},s=Array.isArray(l),o=s?l:(w=r[l.kind])!==null&&w!==void 0?w:[],d=-1,u=[],c&&f.push(c),c=l}}while(i!==void 0);return u.length!==0?u[u.length-1][1]:t}function aa(t,e){const r=t[e];return typeof r=="object"?r:typeof r=="function"?{enter:r,leave:void 0}:{enter:t.enter,leave:t.leave}}function ca(t){return oa(t,la)}const ua=80,la={Name:{leave:t=>t.value},Variable:{leave:t=>"$"+t.name},Document:{leave:t=>b(t.definitions,`

`)},OperationDefinition:{leave(t){const e=V("(",b(t.variableDefinitions,", "),")"),r=b([t.operation,b([t.name,e]),b(t.directives," ")]," ");return(r==="query"?"":r+" ")+t.selectionSet}},VariableDefinition:{leave:({variable:t,type:e,defaultValue:r,directives:n})=>t+": "+e+V(" = ",r)+V(" ",b(n," "))},SelectionSet:{leave:({selections:t})=>fe(t)},Field:{leave({alias:t,name:e,arguments:r,directives:n,selectionSet:i}){const s=V("",t,": ")+e;let o=s+V("(",b(r,", "),")");return o.length>ua&&(o=s+V(`(
`,Gt(b(r,`
`)),`
)`)),b([o,b(n," "),i]," ")}},Argument:{leave:({name:t,value:e})=>t+": "+e},FragmentSpread:{leave:({name:t,directives:e})=>"..."+t+V(" ",b(e," "))},InlineFragment:{leave:({typeCondition:t,directives:e,selectionSet:r})=>b(["...",V("on ",t),b(e," "),r]," ")},FragmentDefinition:{leave:({name:t,typeCondition:e,variableDefinitions:r,directives:n,selectionSet:i})=>`fragment ${t}${V("(",b(r,", "),")")} on ${e} ${V("",b(n," ")," ")}`+i},IntValue:{leave:({value:t})=>t},FloatValue:{leave:({value:t})=>t},StringValue:{leave:({value:t,block:e})=>e?Co(t):ta(t)},BooleanValue:{leave:({value:t})=>t?"true":"false"},NullValue:{leave:()=>"null"},EnumValue:{leave:({value:t})=>t},ListValue:{leave:({values:t})=>"["+b(t,", ")+"]"},ObjectValue:{leave:({fields:t})=>"{"+b(t,", ")+"}"},ObjectField:{leave:({name:t,value:e})=>t+": "+e},Directive:{leave:({name:t,arguments:e})=>"@"+t+V("(",b(e,", "),")")},NamedType:{leave:({name:t})=>t},ListType:{leave:({type:t})=>"["+t+"]"},NonNullType:{leave:({type:t})=>t+"!"},SchemaDefinition:{leave:({description:t,directives:e,operationTypes:r})=>V("",t,`
`)+b(["schema",b(e," "),fe(r)]," ")},OperationTypeDefinition:{leave:({operation:t,type:e})=>t+": "+e},ScalarTypeDefinition:{leave:({description:t,name:e,directives:r})=>V("",t,`
`)+b(["scalar",e,b(r," ")]," ")},ObjectTypeDefinition:{leave:({description:t,name:e,interfaces:r,directives:n,fields:i})=>V("",t,`
`)+b(["type",e,V("implements ",b(r," & ")),b(n," "),fe(i)]," ")},FieldDefinition:{leave:({description:t,name:e,arguments:r,type:n,directives:i})=>V("",t,`
`)+e+(mi(r)?V(`(
`,Gt(b(r,`
`)),`
)`):V("(",b(r,", "),")"))+": "+n+V(" ",b(i," "))},InputValueDefinition:{leave:({description:t,name:e,type:r,defaultValue:n,directives:i})=>V("",t,`
`)+b([e+": "+r,V("= ",n),b(i," ")]," ")},InterfaceTypeDefinition:{leave:({description:t,name:e,interfaces:r,directives:n,fields:i})=>V("",t,`
`)+b(["interface",e,V("implements ",b(r," & ")),b(n," "),fe(i)]," ")},UnionTypeDefinition:{leave:({description:t,name:e,directives:r,types:n})=>V("",t,`
`)+b(["union",e,b(r," "),V("= ",b(n," | "))]," ")},EnumTypeDefinition:{leave:({description:t,name:e,directives:r,values:n})=>V("",t,`
`)+b(["enum",e,b(r," "),fe(n)]," ")},EnumValueDefinition:{leave:({description:t,name:e,directives:r})=>V("",t,`
`)+b([e,b(r," ")]," ")},InputObjectTypeDefinition:{leave:({description:t,name:e,directives:r,fields:n})=>V("",t,`
`)+b(["input",e,b(r," "),fe(n)]," ")},DirectiveDefinition:{leave:({description:t,name:e,arguments:r,repeatable:n,locations:i})=>V("",t,`
`)+"directive @"+e+(mi(r)?V(`(
`,Gt(b(r,`
`)),`
)`):V("(",b(r,", "),")"))+(n?" repeatable":"")+" on "+b(i," | ")},SchemaExtension:{leave:({directives:t,operationTypes:e})=>b(["extend schema",b(t," "),fe(e)]," ")},ScalarTypeExtension:{leave:({name:t,directives:e})=>b(["extend scalar",t,b(e," ")]," ")},ObjectTypeExtension:{leave:({name:t,interfaces:e,directives:r,fields:n})=>b(["extend type",t,V("implements ",b(e," & ")),b(r," "),fe(n)]," ")},InterfaceTypeExtension:{leave:({name:t,interfaces:e,directives:r,fields:n})=>b(["extend interface",t,V("implements ",b(e," & ")),b(r," "),fe(n)]," ")},UnionTypeExtension:{leave:({name:t,directives:e,types:r})=>b(["extend union",t,b(e," "),V("= ",b(r," | "))]," ")},EnumTypeExtension:{leave:({name:t,directives:e,values:r})=>b(["extend enum",t,b(e," "),fe(r)]," ")},InputObjectTypeExtension:{leave:({name:t,directives:e,fields:r})=>b(["extend input",t,b(e," "),fe(r)]," ")}};function b(t,e=""){var r;return(r=t==null?void 0:t.filter(n=>n).join(e))!==null&&r!==void 0?r:""}function fe(t){return V(`{
`,Gt(b(t,`
`)),`
}`)}function V(t,e,r=""){return e!=null&&e!==""?t+e+r:""}function Gt(t){return V("  ",t.replace(/\n/g,`
  `))}function mi(t){var e;return(e=t==null?void 0:t.some(r=>r.includes(`
`)))!==null&&e!==void 0?e:!1}function da(t,e,r){return t.document?t:{document:t,variables:e,config:r}}function yi(t){var e;let r;const n=t.definitions.filter(i=>i.kind==="OperationDefinition");return n.length===1&&(r=(e=n[0].name)==null?void 0:e.value),r}function ha(t){if(typeof t=="string"){let r;try{const n=Zo(t);r=yi(n)}catch{}return{query:t,operationName:r}}const e=yi(t);return{query:ca(t),operationName:e}}class fa{constructor(e){const{url:r,adminSecret:n}=e;this._url=r,this.accessToken=null,this.adminSecret=n}async request(e,...r){const[n,i]=r,s=da(e,n,i),{headers:o,...d}=i||{},{query:u,operationName:l}=ha(s.document);try{const a=await ti(this.httpUrl,{method:"POST",body:JSON.stringify({operationName:l,query:u,variables:n}),headers:{"Content-Type":"application/json",...this.generateAccessTokenHeaders(),...o},...d});if(!a.ok)return{data:null,error:{error:a.statusText,message:a.statusText,status:a.status}};const{data:c,errors:h}=await a.json();return h?{data:null,error:h}:typeof c!="object"||Array.isArray(c)||c===null?{data:null,error:{error:"invalid-response",message:"incorrect response data from GraphQL server",status:0}}:{data:c,error:null}}catch(a){const c=a;return{data:null,error:{message:c.message,status:c.name==="AbortError"?0:500,error:c.name==="AbortError"?"abort-error":"unknown"}}}}get httpUrl(){return this._url}get wsUrl(){return this._url.replace(/^(http)(s?):\/\//,"ws$2://")}get url(){return this._url}getUrl(){return this._url}setAccessToken(e){if(!e){this.accessToken=null;return}this.accessToken=e}generateAccessTokenHeaders(){return this.adminSecret?{"x-hasura-admin-secret":this.adminSecret}:this.accessToken?{Authorization:`Bearer ${this.accessToken}`}:{}}}const pa=/^((?<protocol>http[s]?):\/\/)?(?<host>(localhost|local))(:(?<port>(\d+|__\w+__)))?$/;function qt(t,e){const{backendUrl:r,subdomain:n,region:i}=t;if(r)return`${r}/v1/${e}`;if(!n)throw new Error("Either `backendUrl` or `subdomain` must be set.");const s=n.match(pa);if(s!=null&&s.groups){const{protocol:o,host:d,port:u}=s.groups;return ya(e)||(d==="localhost"?(console.warn('The `subdomain` is set to "localhost". Support for this will be removed in a future release. Please use "local" instead.'),`${o||"http"}://localhost:${u||1337}/v1/${e}`):u?`${o||"https"}://local.${e}.nhost.run:${u}/v1`:`${o||"https"}://local.${e}.nhost.run/v1`)}if(!i)throw new Error('`region` must be set when using a `subdomain` other than "local".');return`https://${n}.${e}.${i}.nhost.run/v1`}function va(){return typeof window!="undefined"}function ma(){return typeof process!="undefined"&&process.env}function ya(t){return va()||!ma()?null:process.env[`NHOST_${t.toUpperCase()}_URL`]}function ga(t,e){const r=e.startsWith("/")?e:`/${e}`;return t+r}function Ea(t){const e="subdomain"in t||"backendUrl"in t?qt(t,"auth"):t.authUrl;if(!e)throw new Error("Please provide `subdomain` or `authUrl`.");return new po({url:e,...t})}function Ta(t){const e="subdomain"in t||"backendUrl"in t?qt(t,"functions"):t.functionsUrl;if(!e)throw new Error("Please provide `subdomain` or `functionsUrl`.");return new Sa({url:e,...t})}class Sa{constructor(e){const{url:r,adminSecret:n}=e;this.url=r,this.accessToken=null,this.adminSecret=n}async call(e,r,n){var i,s;const o={"Content-Type":"application/json",...this.generateAccessTokenHeaders(),...n==null?void 0:n.headers},d=ga(this.url,e);try{const u=await ti(d,{body:r?JSON.stringify(r):null,headers:o,method:"POST"});if(!u.ok){let a;return(i=u.headers.get("content-type"))!=null&&i.includes("application/json")?a=await u.json():a=await u.text(),{res:null,error:{message:a,error:u.statusText,status:u.status}}}let l;return(s=u.headers.get("content-type"))!=null&&s.includes("application/json")?l=await u.json():l=await u.text(),{res:{data:l,status:u.status,statusText:u.statusText},error:null}}catch(u){const l=u;return{res:null,error:{message:l.message,status:l.name==="AbortError"?0:500,error:l.name==="AbortError"?"abort-error":"unknown"}}}}setAccessToken(e){if(!e){this.accessToken=null;return}this.accessToken=e}generateAccessTokenHeaders(){return this.adminSecret?{"x-hasura-admin-secret":this.adminSecret}:this.accessToken?{Authorization:`Bearer ${this.accessToken}`}:{}}}function wa(t){const e="subdomain"in t||"backendUrl"in t?qt(t,"graphql"):t.graphqlUrl;if(!e)throw new Error("Please provide `subdomain` or `graphqlUrl`.");return new fa({url:e,...t})}function xa(t){const e="subdomain"in t||"backendUrl"in t?qt(t,"storage"):t.storageUrl;if(!e)throw new Error("Please provide `subdomain` or `storageUrl`.");return new yo({url:e,...t})}class Aa{constructor({refreshIntervalTime:e,clientStorage:r,clientStorageType:n,autoRefreshToken:i,autoSignIn:s,adminSecret:o,devTools:d,start:u=!0,...l}){this.auth=Ea({refreshIntervalTime:e,clientStorage:r,clientStorageType:n,autoRefreshToken:i,autoSignIn:s,start:u,...l}),this.storage=xa({adminSecret:o,...l}),this.functions=Ta({adminSecret:o,...l}),this.graphql=wa({adminSecret:o,...l}),this.auth.onAuthStateChanged((a,c)=>{if(a==="SIGNED_OUT"){this.storage.setAccessToken(void 0),this.functions.setAccessToken(void 0),this.graphql.setAccessToken(void 0);return}const h=c==null?void 0:c.accessToken;this.storage.setAccessToken(h),this.functions.setAccessToken(h),this.graphql.setAccessToken(h)}),this.auth.onTokenChanged(a=>{const c=a==null?void 0:a.accessToken;this.storage.setAccessToken(c),this.functions.setAccessToken(c),this.graphql.setAccessToken(c)}),this._adminSecret=o,this.devTools=d}get adminSecret(){return this._adminSecret}set adminSecret(e){this._adminSecret=e,this.storage.setAdminSecret(e)}}const gi=Aa;class Oa extends gi{constructor(e){super({...e,start:!1})}}var Pr={exports:{}},Lr={},Ur={exports:{}},Mr={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ei;function ba(){if(Ei)return Mr;Ei=1;var t=U;function e(c,h){return c===h&&(c!==0||1/c===1/h)||c!==c&&h!==h}var r=typeof Object.is=="function"?Object.is:e,n=t.useState,i=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function d(c,h){var f=h(),p=n({inst:{value:f,getSnapshot:h}}),m=p[0].inst,w=p[1];return s(function(){m.value=f,m.getSnapshot=h,u(m)&&w({inst:m})},[c,f,h]),i(function(){return u(m)&&w({inst:m}),c(function(){u(m)&&w({inst:m})})},[c]),o(f),f}function u(c){var h=c.getSnapshot;c=c.value;try{var f=h();return!r(c,f)}catch{return!0}}function l(c,h){return h()}var a=typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"?l:d;return Mr.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:a,Mr}var jr={};/**
 * @license React
 * use-sync-external-store-shim.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ti;function ka(){return Ti||(Ti=1,process.env.NODE_ENV!=="production"&&function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var t=U,e=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function r(T){{for(var O=arguments.length,I=new Array(O>1?O-1:0),_=1;_<O;_++)I[_-1]=arguments[_];n("error",T,I)}}function n(T,O,I){{var _=e.ReactDebugCurrentFrame,N=_.getStackAddendum();N!==""&&(O+="%s",I=I.concat([N]));var C=I.map(function(P){return String(P)});C.unshift("Warning: "+O),Function.prototype.apply.call(console[T],console,C)}}function i(T,O){return T===O&&(T!==0||1/T===1/O)||T!==T&&O!==O}var s=typeof Object.is=="function"?Object.is:i,o=t.useState,d=t.useEffect,u=t.useLayoutEffect,l=t.useDebugValue,a=!1,c=!1;function h(T,O,I){a||t.startTransition!==void 0&&(a=!0,r("You are using an outdated, pre-release alpha of React 18 that does not support useSyncExternalStore. The use-sync-external-store shim will not work correctly. Upgrade to a newer pre-release."));var _=O();if(!c){var N=O();s(_,N)||(r("The result of getSnapshot should be cached to avoid an infinite loop"),c=!0)}var C=o({inst:{value:_,getSnapshot:O}}),P=C[0].inst,k=C[1];return u(function(){P.value=_,P.getSnapshot=O,f(P)&&k({inst:P})},[T,_,O]),d(function(){f(P)&&k({inst:P});var M=function(){f(P)&&k({inst:P})};return T(M)},[T]),l(_),_}function f(T){var O=T.getSnapshot,I=T.value;try{var _=O();return!s(I,_)}catch{return!0}}function p(T,O,I){return O()}var m=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined",w=!m,E=w?p:h,A=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:E;jr.useSyncExternalStore=A,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}()),jr}process.env.NODE_ENV==="production"?Ur.exports=ba():Ur.exports=ka();var Si=Ur.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wi;function Ia(){if(wi)return Lr;wi=1;var t=U,e=Si;function r(l,a){return l===a&&(l!==0||1/l===1/a)||l!==l&&a!==a}var n=typeof Object.is=="function"?Object.is:r,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,d=t.useMemo,u=t.useDebugValue;return Lr.useSyncExternalStoreWithSelector=function(l,a,c,h,f){var p=s(null);if(p.current===null){var m={hasValue:!1,value:null};p.current=m}else m=p.current;p=d(function(){function E(_){if(!A){if(A=!0,T=_,_=h(_),f!==void 0&&m.hasValue){var N=m.value;if(f(N,_))return O=N}return O=_}if(N=O,n(T,_))return N;var C=h(_);return f!==void 0&&f(N,C)?N:(T=_,O=C)}var A=!1,T,O,I=c===void 0?null:c;return[function(){return E(a())},I===null?void 0:function(){return E(I())}]},[a,c,h,f]);var w=i(l,p[0],p[1]);return o(function(){m.hasValue=!0,m.value=w},[w]),u(w),w},Lr}var Fr={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xi;function _a(){return xi||(xi=1,process.env.NODE_ENV!=="production"&&function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var t=U,e=Si;function r(a,c){return a===c&&(a!==0||1/a===1/c)||a!==a&&c!==c}var n=typeof Object.is=="function"?Object.is:r,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,d=t.useMemo,u=t.useDebugValue;function l(a,c,h,f,p){var m=s(null),w;m.current===null?(w={hasValue:!1,value:null},m.current=w):w=m.current;var E=d(function(){var I=!1,_,N,C=function(Z){if(!I){I=!0,_=Z;var ce=f(Z);if(p!==void 0&&w.hasValue){var J=w.value;if(p(J,ce))return N=J,J}return N=ce,ce}var ye=_,we=N;if(n(ye,Z))return we;var v=f(Z);return p!==void 0&&p(we,v)?we:(_=Z,N=v,v)},P=h===void 0?null:h,k=function(){return C(c())},M=P===null?void 0:function(){return C(P())};return[k,M]},[c,h,f,p]),A=E[0],T=E[1],O=i(a,A,T);return o(function(){w.hasValue=!0,w.value=O},[O]),u(O),O}Fr.useSyncExternalStoreWithSelector=l,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}()),Fr}process.env.NODE_ENV==="production"?Pr.exports=Ia():Pr.exports=_a();var Na=Pr.exports,Da=U.useLayoutEffect;function Ai(t){var e=Ci.useRef();return e.current||(e.current={v:t()}),e.current.v}var Ht=globalThis&&globalThis.__assign||function(){return Ht=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Ht.apply(this,arguments)},Ra=globalThis&&globalThis.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},Oi=globalThis&&globalThis.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(d){o={error:d}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s};function Ca(t,e){var r=Ai(function(){return typeof t=="function"?t():t});if(process.env.NODE_ENV!=="production"&&typeof t!="function"){var n=Oi(U.useState(r),1),i=n[0];t!==i&&console.warn("Machine given to `useMachine` has changed between renders. This is not supported and might lead to unexpected results.\nPlease make sure that you pass the same Machine as argument each time.")}var s=e.context,o=e.guards,d=e.actions,u=e.activities,l=e.services,a=e.delays;e.state;var c=Ra(e,["context","guards","actions","activities","services","delays","state"]),h=Ai(function(){var f={context:s,guards:o,actions:d,activities:u,services:l,delays:a},p=r.withConfig(f,function(){return Ht(Ht({},r.context),s)});return Ce(p,c)});return Da(function(){Object.assign(h.machine.options.actions,d),Object.assign(h.machine.options.guards,o),Object.assign(h.machine.options.activities,u),Object.assign(h.machine.options.services,l),Object.assign(h.machine.options.delays,a)},[d,o,u,l,a]),h}function _e(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=Oi(e,2),i=n[0],s=i===void 0?{}:i,o=n[1],d=Ca(t,s);return U.useEffect(function(){if(o){var u=d.subscribe(Qe(o));return function(){u.unsubscribe()}}},[o]),U.useEffect(function(){var u=s.state;return d.start(u?de.create(u):void 0),function(){d.stop(),d.status=te.NotStarted}},[]),d}function Pa(t){return"state"in t}globalThis&&globalThis.__read,globalThis&&globalThis.__values;function La(t){return t.status!==0?t.state:t.machine.initialState}function Ua(t){return"state"in t&&"machine"in t}var Ma=function(t,e){return t===e},ja=function(t,e){if(Ua(t)){if(t.status===0&&e.current)return e.current;var r=La(t);return e.current=t.status===0?r:null,r}return Pa(t)?t.state:void 0};function g(t,e,r,n){r===void 0&&(r=Ma);var i=U.useRef(null),s=U.useCallback(function(u){var l=t.subscribe(u).unsubscribe;return l},[t]),o=U.useCallback(function(){return n?n(t):ja(t,i)},[t,n]),d=Na.useSyncExternalStoreWithSelector(s,o,o,e,r);return d}const at=U.createContext({}),bi=({nhost:t,initial:e,...r})=>{const n=_e(t.auth.client.machine,{devTools:t.devTools});t.auth.client.start({interpreter:n,initialSession:e,devTools:t.devTools});const i=U.useRef(!0);return U.useEffect(()=>{i.current?i.current=!1:e&&n.send("SESSION_UPDATE",{data:{session:e}})},[e,n]),Di.jsx(at.Provider,{value:t,children:r.children})},Fa=bi,X=()=>{var r;const e=(r=U.useContext(at).auth)==null?void 0:r.client.interpreter;if(!e)throw Error("Could not find the Nhost auth client. Did you wrap your app in <NhostProvider />?");return e},Vr=()=>{const t=X();return g(t,e=>({isAuthenticated:e.matches({authentication:"signedIn"}),isLoading:e.hasTag("loading"),error:e.context.errors.authentication||null,isError:e.matches({authentication:{signedOut:"failed"}}),connectionAttempts:e.context.importTokenAttempts}),(e,r)=>e.isAuthenticated===r.isAuthenticated&&e.isLoading===r.isLoading&&e.connectionAttempts===r.connectionAttempts)};function Va({children:t}){const{isAuthenticated:e}=Vr();return e?U.createElement(U.Fragment,null,t):null}function Ba({children:t}){const{isAuthenticated:e}=Vr();return e?null:U.createElement(U.Fragment,null,t)}const ki=()=>{const t=X();return g(t,e=>e.context.accessToken.value)},Se=()=>U.useContext(at),Ga=()=>{const t=Se(),[e,r]=U.useState(null),n=!e,i=!!e,[s,o]=U.useState(!1);return{add:async u=>{o(!0);const l=await Fn(t.auth.client,u),{error:a}=l;return a&&r(a),o(!1),l},isLoading:s,isSuccess:n,isError:i,error:e}},qa=()=>{const t=X(),[e,r]=U.useState(!!t.status&&t.getSnapshot().matches({authentication:"signedIn"}));return U.useEffect(()=>t.subscribe(i=>{const s=i.matches({authentication:"signedIn"});r(s)}).unsubscribe,[t]),e};function Ha(t){const e=Se(),r=U.useMemo(()=>Ln(e.auth.client),[e]),n=_e(r),i=g(n,l=>l.matches("requesting")),s=g(n,l=>l.context.error),o=g(n,l=>l.matches("idle.error")),d=g(n,l=>l.matches("idle.success"));return{changeEmail:U.useCallback(async(l,a=t)=>Vn(n,l,a),[n,t]),isLoading:i,needsEmailVerification:d,isError:o,error:s}}const Ya=()=>{const t=Se(),e=U.useMemo(()=>Un(t.auth.client),[t]),r=_e(e),n=g(r,u=>u.matches({idle:"error"})),i=g(r,u=>u.matches({idle:"success"})),s=g(r,u=>u.context.error),o=g(r,u=>u.matches("requesting"));return{changePassword:u=>Bn(r,u),isLoading:o,isSuccess:i,isError:n,error:s}},$a=()=>{const t=Se(),e=U.useMemo(()=>co(t.auth.client),[t]),r=_e(e),n=g(r,h=>h.matches({idle:"error"})||h.matches({generated:{idle:"error"}})),i=g(r,h=>h.matches("generating")),s=g(r,h=>h.matches("generated")),o=g(r,h=>h.matches({generated:"activating"})),d=g(r,h=>h.matches({generated:"activated"})),u=g(r,h=>h.context.error),l=g(r,h=>h.context.imageUrl||"");return{generateQrCode:()=>lo(r),isGenerating:i,qrCodeDataUrl:l,isGenerated:s,activateMfa:h=>ho(r,h),isActivating:o,isActivated:d,isError:n,error:u}},Ii=()=>{const t=ki();return t?Gr(t):null},_i=t=>{const e=Se(),r=p=>{t.send({type:"ADD",file:p.file,bucketId:p.bucketId||h})},n=p=>Eo({url:e.storage.url,accessToken:e.auth.getAccessToken(),adminSecret:e.adminSecret,...p},t),i=()=>{t.send("CANCEL")},s=()=>{t.send("DESTROY")},o=g(t,p=>p.matches("uploading")),d=g(t,p=>p.matches("uploaded")),u=g(t,p=>p.matches("error")),l=g(t,p=>p.context.error||null),a=g(t,p=>p.context.progress),c=g(t,p=>p.context.id),h=g(t,p=>p.context.bucketId),f=g(t,p=>{var m;return(m=p.context.file)==null?void 0:m.name});return{add:r,upload:n,cancel:i,destroy:s,isUploaded:d,isUploading:o,isError:u,error:l,progress:a,id:c,bucketId:h,name:f}},za=()=>{const t=_e(Zn);return _i(t)},Ni=()=>{const t=Ii();return(t==null?void 0:t["https://hasura.io/jwt/claims"])||null},Ka=t=>{const e=Ni();return(e==null?void 0:e[t.startsWith("x-hasura-")?t:`x-hasura-${t}`])||null},Ja=()=>{const t=Se(),[e,r]=U.useState([]),n=_e(go,{},f=>{f.event.type==="UPLOAD_ERROR"?r(f.context.files.filter(p=>{var m;return(m=p.getSnapshot())==null?void 0:m.context.error})):(f.matches("uploaded")||f.event.type==="CLEAR")&&e.length>0&&r([])}),i=f=>{n.send({type:"ADD",...f})},s=f=>To({url:t.storage.url,accessToken:t.auth.getAccessToken(),adminSecret:t.adminSecret,...f},n),o=()=>{n.send("CANCEL")},d=()=>{n.send("CLEAR")},u=g(n,f=>f.matches("uploading")),l=g(n,f=>f.matches("uploaded")),a=g(n,f=>f.matches("error")),c=g(n,f=>f.context.progress),h=g(n,f=>f.context.files);return{upload:s,add:i,clear:d,cancel:o,progress:c,isUploaded:l,isUploading:u,files:h,isError:a,errors:e}},Wa=t=>{const[e,r]=U.useState(!0);U.useEffect(()=>{r(!1)},[]);const n=U.useContext(at);return new Proxy({},{get(i,s){return yr(`${n.auth.client.backendUrl}/signin/provider/${s}`,he(e?void 0:n.auth.client.clientUrl,t))}})},Qa=t=>{const e=Se(),r=U.useMemo(()=>Mn(e.auth.client),[e]),n=_e(r),i=g(n,l=>l.matches("requesting")),s=g(n,l=>l.context.error),o=g(n,l=>l.matches("idle.error")),d=g(n,l=>l.matches("idle.success"));return{resetPassword:(l,a=t)=>Gn(n,l,a),isLoading:i,isSent:d,isError:o,error:s}},Xa=t=>{const e=Se(),r=U.useMemo(()=>jn(e.auth.client),[e]),n=_e(r),i=g(n,l=>l.matches({idle:"error"})),s=g(n,l=>l.matches({idle:"success"})),o=g(n,l=>l.context.error),d=g(n,l=>l.matches("requesting"));return{sendEmail:(l,a=t)=>qn(n,l,a),isLoading:d,isSent:s,isError:i,error:o}},Za=()=>{const t=X(),e=()=>Hn(t),r=g(t,u=>u.context.errors.authentication||null,(u,l)=>(u==null?void 0:u.error)===(l==null?void 0:l.error)),n=g(t,u=>u.matches({authentication:{authenticating:"anonymous"}})),i=g(t,u=>u.matches({authentication:"signedIn"})),s=g(t,u=>u.matches({authentication:{signedOut:"failed"}})),o=g(t,u=>u.context.user,(u,l)=>(u==null?void 0:u.id)===(l==null?void 0:l.id));return{accessToken:g(t,u=>u.context.accessToken.value),error:r,isError:s,isLoading:n,isSuccess:i,signInAnonymous:e,user:o}},ec=()=>{const t=X(),e=(f,p)=>Yn(t,f,p),r=f=>zn(t,f),n=g(t,f=>f.context.user,(f,p)=>(f==null?void 0:f.id)===(p==null?void 0:p.id)),i=g(t,f=>f.context.accessToken.value),s=g(t,f=>f.context.refreshToken.value),o=g(t,f=>f.context.errors.authentication||null,(f,p)=>(f==null?void 0:f.error)===(p==null?void 0:p.error)),d=g(t,f=>f.matches({authentication:"signedIn"})),u=g(t,f=>f.matches({authentication:{authenticating:"password"}}),(f,p)=>f===p),l=g(t,f=>f.matches({authentication:{signedOut:"noErrors"},registration:{incomplete:"needsEmailVerification"}}),(f,p)=>f===p),a=g(t,f=>f.matches({authentication:{signedOut:"needsMfa"}}),(f,p)=>f===p),c=g(t,f=>f.matches({authentication:{signedOut:"failed"}}),(f,p)=>f===p),h=g(t,f=>f.context.mfa);return{accessToken:i,refreshToken:s,error:o,isError:c,isLoading:u,isSuccess:d,needsEmailVerification:l,needsMfaOtp:a,mfa:h,sendMfaOtp:r,signInEmailPassword:e,user:n}};function tc(t){const e=X(),r=(d,u=t)=>Er(e,d,u),n=g(e,d=>d.context.errors.registration||null,(d,u)=>(d==null?void 0:d.error)===(u==null?void 0:u.error)),i=g(e,d=>d.matches("registration.passwordlessEmail")),s=g(e,d=>d.matches("registration.incomplete.needsEmailVerification")),o=g(e,d=>d.matches("registration.incomplete.failed"));return{signInEmailPasswordless:r,isLoading:i,isSuccess:s,isError:o,error:n}}const rc=()=>{const t=X(),e=a=>$n(t,a),r=g(t,a=>a.context.user,(a,c)=>(a==null?void 0:a.id)===(c==null?void 0:c.id)),n=g(t,a=>a.context.accessToken.value),i=g(t,a=>a.context.refreshToken.value),s=g(t,a=>a.context.errors.authentication||null,(a,c)=>(a==null?void 0:a.error)===(c==null?void 0:c.error)),o=g(t,a=>a.matches({authentication:"signedIn"})),d=g(t,a=>a.matches({authentication:{authenticating:"securityKeyEmail"}}),(a,c)=>a===c),u=g(t,a=>a.matches({authentication:{signedOut:"noErrors"},registration:{incomplete:"needsEmailVerification"}}),(a,c)=>a===c),l=g(t,a=>a.matches({authentication:{signedOut:"failed"}}),(a,c)=>a===c);return{accessToken:n,refreshToken:i,error:s,isError:l,isLoading:d,isSuccess:o,needsEmailVerification:u,signInEmailSecurityKey:e,user:r}},nc=()=>{const t=X(),e=l=>Kn(t,l),r=g(t,l=>l.context.user,(l,a)=>(l==null?void 0:l.id)===(a==null?void 0:a.id)),n=g(t,l=>l.context.accessToken.value),i=g(t,l=>l.context.refreshToken.value),s=g(t,l=>l.context.errors.authentication||null,(l,a)=>(l==null?void 0:l.error)===(a==null?void 0:a.error)),o=g(t,l=>l.matches({authentication:"signedIn"})),d=g(t,l=>l.matches({authentication:{authenticating:"password"}}),(l,a)=>l===a),u=g(t,l=>l.matches({authentication:{signedOut:"failed"}}),(l,a)=>l===a);return{accessToken:n,refreshToken:i,error:s,isError:u,isLoading:d,isSuccess:o,signInPAT:e,user:r}};function ic(t){const e=X(),[r,n]=U.useState(""),i=(c,h=t)=>(n(c),Tr(e,c,h)),s=async(...c)=>{if(c.length===2){const[f,p]=c;return Sr(e,f,p)}const[h]=c;return Sr(e,r,h)},o=g(e,c=>c.context.errors.registration||null,(c,h)=>(c==null?void 0:c.error)===(h==null?void 0:h.error)),d=g(e,c=>c.matches("registration.passwordlessSms")||c.matches("registration.passwordlessSmsOtp")),u=g(e,c=>c.matches("authentication.signedIn")),l=g(e,c=>c.matches("registration.incomplete.needsOtp")),a=g(e,c=>c.matches("registration.incomplete.failed"));return{signInSmsPasswordless:i,sendOtp:s,isLoading:d,isSuccess:u,needsOtp:l,isError:a,error:o}}const sc=(t=!1)=>{const e=X(),r=s=>Jn(e,typeof s=="boolean"?s:t),n=g(e,s=>s.matches({authentication:{signedOut:"success"}}),(s,o)=>s===o),i=g(e,s=>s.context.errors.signout||null,(s,o)=>(s==null?void 0:s.error)===(o==null?void 0:o.error));return{signOut:r,isSuccess:n,error:i}},oc=t=>{const e=X(),r=g(e,c=>!!c.context.errors.registration),n=g(e,c=>c.context.errors.registration||null,(c,h)=>(c==null?void 0:c.error)===(h==null?void 0:h.error)),i=g(e,c=>c.matches("registration.emailPassword")),s=g(e,c=>c.matches("registration.incomplete.needsEmailVerification")),o=g(e,c=>c.matches({authentication:"signedIn",registration:"complete"})),d=(c,h,f=t)=>wr(e,c,h,f),u=g(e,c=>c.context.user,(c,h)=>(c==null?void 0:c.id)===(h==null?void 0:h.id)),l=g(e,c=>c.context.accessToken.value),a=g(e,c=>c.context.refreshToken.value);return{accessToken:l,refreshToken:a,error:n,isError:r,isLoading:i,isSuccess:o,needsEmailVerification:s,signUpEmailPassword:d,user:u}},ac=t=>{const e=X(),r=g(e,c=>!!c.context.errors.registration),n=g(e,c=>c.context.errors.registration||null,(c,h)=>(c==null?void 0:c.error)===(h==null?void 0:h.error)),i=g(e,c=>c.matches("registration.securityKey")),s=g(e,c=>c.matches("registration.incomplete.needsEmailVerification")),o=g(e,c=>c.matches({authentication:"signedIn",registration:"complete"})),d=(c,h=t)=>Wn(e,c,h),u=g(e,c=>c.context.user,(c,h)=>(c==null?void 0:c.id)===(h==null?void 0:h.id)),l=g(e,c=>c.context.accessToken.value),a=g(e,c=>c.context.refreshToken.value);return{accessToken:l,refreshToken:a,error:n,isError:r,isLoading:i,isSuccess:o,needsEmailVerification:s,signUpEmailSecurityKey:d,user:u}},cc=()=>{const t=X();return g(t,e=>{var r;return(r=e.context.user)==null?void 0:r.avatarUrl},(e,r)=>e===r)},uc=()=>{const t=X();return g(t,e=>e.context.user,(e,r)=>(e&&JSON.stringify(e))===(r&&JSON.stringify(r)))},lc=()=>{const t=X();return g(t,e=>{var r;return(r=e.context.user)==null?void 0:r.defaultRole},(e,r)=>e===r)},dc=()=>{const t=X();return g(t,e=>{var r;return(r=e.context.user)==null?void 0:r.displayName},(e,r)=>e===r)},hc=()=>{const t=X();return g(t,e=>{var r;return(r=e.context.user)==null?void 0:r.email},(e,r)=>e===r)},fc=()=>{const t=X();return g(t,e=>{var r;return(r=e.context.user)==null?void 0:r.id},(e,r)=>e===r)},pc=()=>{const t=X();return g(t,e=>{var r;return(r=e.context.user)==null?void 0:r.isAnonymous},(e,r)=>e===r)},vc=()=>{const t=X();return g(t,e=>{var r;return(r=e.context.user)==null?void 0:r.locale},(e,r)=>e===r)},mc=()=>{const t=X();return g(t,e=>{var r;return e.matches("authentication.signedIn")?((r=e.context.user)==null?void 0:r.roles)||[]:[]})};D.NHOST_REFRESH_TOKEN_KEY=He,D.NhostClient=Oa,D.NhostProvider=bi,D.NhostReactContext=at,D.NhostReactProvider=Fa,D.SignedIn=Va,D.SignedOut=Ba,D.VanillaNhostClient=gi,D.useAccessToken=ki,D.useAddSecurityKey=Ga,D.useAuthInterpreter=X,D.useAuthenticated=qa,D.useAuthenticationStatus=Vr,D.useChangeEmail=Ha,D.useChangePassword=Ya,D.useConfigMfa=$a,D.useDecodedAccessToken=Ii,D.useFileUpload=za,D.useFileUploadItem=_i,D.useHasuraClaim=Ka,D.useHasuraClaims=Ni,D.useMultipleFilesUpload=Ja,D.useNhostClient=Se,D.useProviderLink=Wa,D.useResetPassword=Qa,D.useSendVerificationEmail=Xa,D.useSignInAnonymous=Za,D.useSignInEmailPassword=ec,D.useSignInEmailPasswordless=tc,D.useSignInEmailSecurityKey=rc,D.useSignInPAT=nc,D.useSignInSmsPasswordless=ic,D.useSignOut=sc,D.useSignUpEmailPassword=oc,D.useSignUpEmailSecurityKeyEmail=ac,D.useUserAvatarUrl=cc,D.useUserData=uc,D.useUserDefaultRole=lc,D.useUserDisplayName=dc,D.useUserEmail=hc,D.useUserId=fc,D.useUserIsAnonymous=pc,D.useUserLocale=vc,D.useUserRoles=mc,Object.defineProperty(D,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=react.umd.js.map
